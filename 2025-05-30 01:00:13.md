2025-05-30 01:00:13.395 | 
2025-05-30 01:00:13.395 | > slackbot-framework@1.0.0 start:dev
2025-05-30 01:00:13.395 | > nest start --watch
2025-05-30 01:00:13.395 | 
2025-05-30 01:00:13.897 | [4:00:13 AM] Starting compilation in watch mode...
2025-05-30 01:00:13.897 | 
2025-05-30 01:00:21.357 | [4:00:21 AM] Found 0 errors. Watching for file changes.
2025-05-30 01:00:21.357 | 
2025-05-30 01:00:21.614 | [Nest] 30  - 05/30/2025, 4:00:21 AM     LOG [Bootstrap] Starting suporte-ja...
2025-05-30 01:00:21.614 | [Nest] 30  - 05/30/2025, 4:00:21 AM     LOG [Bootstrap] Loading environment variables from /app/src/bots/suporte-ja/.env
2025-05-30 01:00:21.617 | [Nest] 30  - 05/30/2025, 4:00:21 AM     LOG [Bootstrap] ‚úÖ SLACK_ADMIN_CHANNEL_ID loaded: C08TJQU4695
2025-05-30 01:00:22.105 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [NestFactory] Starting Nest application... +488ms
2025-05-30 01:00:22.123 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [SLAPriorityConfigService] === SLA Configuration Loaded ===
2025-05-30 01:00:22.123 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [SLAPriorityConfigService] P1 (Cr√≠tico): Response 30min, Resolve 2h
2025-05-30 01:00:22.123 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [SLAPriorityConfigService] P2 (Alto): Response 2h, Resolve 8h
2025-05-30 01:00:22.123 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [SLAPriorityConfigService] P3 (M√©dio): Response 4h, Resolve 24h
2025-05-30 01:00:22.123 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [SLAPriorityConfigService] P4 (Baixo): Response 8h, Resolve 3d
2025-05-30 01:00:22.124 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [SLAPriorityConfigService] ================================
2025-05-30 01:00:22.125 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] FormUtilsModule dependencies initialized +2ms
2025-05-30 01:00:22.125 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] ConfigHostModule dependencies initialized +0ms
2025-05-30 01:00:22.125 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] SlackUIModule dependencies initialized +0ms
2025-05-30 01:00:22.126 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] ConfigModule dependencies initialized +0ms
2025-05-30 01:00:22.126 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] ConfigModule dependencies initialized +1ms
2025-05-30 01:00:22.128 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [OpenAIService] ü§ñ OpenAI Service initialized with multi-model support
2025-05-30 01:00:22.128 | [Nest] 30  - 05/30/2025, 4:00:22 AM   DEBUG [OpenAIService] Models configured: JSON=gpt-4o-mini, Analysis=gpt-4o
2025-05-30 01:00:22.128 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [OpenAIClientService] ü§ñ OpenAI Client Service initialized
2025-05-30 01:00:22.142 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [DevelopmentModeGuard] Loaded 2 authorized development users
2025-05-30 01:00:22.142 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] SLAManagementModule dependencies initialized +1ms
2025-05-30 01:00:22.142 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] JiraIntegrationModule dependencies initialized +0ms
2025-05-30 01:00:22.142 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] OpenAIIntegrationModule dependencies initialized +0ms
2025-05-30 01:00:22.142 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] StorageIntegrationModule dependencies initialized +0ms
2025-05-30 01:00:22.142 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] SlackIntegrationModule dependencies initialized +0ms
2025-05-30 01:00:22.143 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] NaturalLanguageModule dependencies initialized +1ms
2025-05-30 01:00:22.143 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [InstanceLoader] SuporteJaModule dependencies initialized +0ms
2025-05-30 01:00:22.146 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [RoutesResolver] EventController {/suporte-ja/events}: +3ms
2025-05-30 01:00:22.146 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [RoutesResolver] FormController {/tech-support/form}: +0ms
2025-05-30 01:00:22.146 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [RoutesResolver] AdminActionController {/admin-actions}: +0ms
2025-05-30 01:00:22.147 | [Nest] 30  - 05/30/2025, 4:00:22 AM     LOG [RouterExplorer] Mapped {/admin-actions/interactive, POST} route +1ms
2025-05-30 01:00:26.482 | [Nest] 30  - 05/30/2025, 4:00:26 AM     LOG [SlackService] ‚ö°Ô∏è Slack Bolt app is running!
2025-05-30 01:00:26.485 | [Nest] 30  - 05/30/2025, 4:00:26 AM     LOG [EventController] ‚úÖ Event controller initialized with admin action handler integration
2025-05-30 01:00:26.487 | [Nest] 30  - 05/30/2025, 4:00:26 AM     LOG [NestApplication] Nest application successfully started +1ms
2025-05-30 01:00:26.489 | [Nest] 30  - 05/30/2025, 4:00:26 AM     LOG [Bootstrap] üöÄ suporte-ja is running on port 4010
2025-05-30 01:01:09.575 | [Nest] 30  - 05/30/2025, 4:01:09 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: N√£o consigo conectar o Pritunl. Ele esta iniciando com duas guias.
2025-05-30 01:01:09.575 | [Nest] 30  - 05/30/2025, 4:01:09 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:01:09.575 | [Nest] 30  - 05/30/2025, 4:01:09 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:01:09.575 | [Nest] 30  - 05/30/2025, 4:01:09 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:01:10.138 | [Nest] 30  - 05/30/2025, 4:01:10 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: N√£o consigo conectar o Pritunl. Ele esta iniciando com duas guias.
2025-05-30 01:01:10.138 | [Nest] 30  - 05/30/2025, 4:01:10 AM   DEBUG [OpenAIService] Generating support response for message: N√£o consigo conectar o Pritunl. Ele esta iniciando com duas guias.
2025-05-30 01:01:10.138 | [Nest] 30  - 05/30/2025, 4:01:10 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:16.265 | [Nest] 30  - 05/30/2025, 4:01:16 AM   DEBUG [OpenAIService] Support response generated: {"message":"Parece que o Pritunl est√° apresentando um problema de inicializa√ß√£o. Tente reiniciar o aplicativo e verifique se ele abre corretamente em uma √∫nica guia.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Reiniciar o aplicativo Pritunl.","followUpQuestions":null,"ticketSummary":null,"confidence":85}
2025-05-30 01:01:16.265 | [Nest] 30  - 05/30/2025, 4:01:16 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Parece que o Pritunl est√° apresentando um problema de inicializa√ß√£o. Tente reiniciar o aplicativo e verifique se ele abre corretamente em uma √∫nica guia.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Reiniciar o aplicativo Pritunl.","followUpQuestions":null,"ticketSummary":null,"confidence":85}
2025-05-30 01:01:18.272 | [Nest] 30  - 05/30/2025, 4:01:18 AM   DEBUG [SlackService] Generating home view for user U7NKC9ADD
2025-05-30 01:01:18.771 | [Nest] 30  - 05/30/2025, 4:01:18 AM    WARN [SlackService] App Home is not enabled in Slack app configuration. Skipping home view publication.
2025-05-30 01:01:22.374 | [Nest] 30  - 05/30/2025, 4:01:22 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Como ativo a autentica√ß√£o de dois fatores no 55PBX?
2025-05-30 01:01:22.374 | [Nest] 30  - 05/30/2025, 4:01:22 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:01:22.374 | [Nest] 30  - 05/30/2025, 4:01:22 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:01:22.374 | [Nest] 30  - 05/30/2025, 4:01:22 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:01:22.946 | [Nest] 30  - 05/30/2025, 4:01:22 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Como ativo a autentica√ß√£o de dois fatores no 55PBX?
2025-05-30 01:01:22.946 | [Nest] 30  - 05/30/2025, 4:01:22 AM   DEBUG [OpenAIService] Generating support response for message: Como ativo a autentica√ß√£o de dois fatores no 55PBX?
2025-05-30 01:01:22.947 | [Nest] 30  - 05/30/2025, 4:01:22 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:23.860 | [Nest] 30  - 05/30/2025, 4:01:23 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: N√£o consigo conectar o Pritunl. Ele esta iniciando com duas guias.
2025-05-30 01:01:23.860 | [Nest] 30  - 05/30/2025, 4:01:23 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:01:23.860 | [Nest] 30  - 05/30/2025, 4:01:23 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:01:23.860 | [Nest] 30  - 05/30/2025, 4:01:23 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:01:24.430 | [Nest] 30  - 05/30/2025, 4:01:24 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: N√£o consigo conectar o Pritunl. Ele esta iniciando com duas guias.
2025-05-30 01:01:24.430 | [Nest] 30  - 05/30/2025, 4:01:24 AM   DEBUG [OpenAIService] Generating support response for message: N√£o consigo conectar o Pritunl. Ele esta iniciando com duas guias.
2025-05-30 01:01:24.431 | [Nest] 30  - 05/30/2025, 4:01:24 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:27.044 | [Nest] 30  - 05/30/2025, 4:01:27 AM   DEBUG [OpenAIService] Support response generated: {"message":"Parece que o Pritunl est√° enfrentando um problema de inicializa√ß√£o. Tente reiniciar o aplicativo e verificar se ele abre corretamente em uma √∫nica guia.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Reiniciar o aplicativo Pritunl.","followUpQuestions":"","ticketSummary":"","confidence":85}
2025-05-30 01:01:27.045 | [Nest] 30  - 05/30/2025, 4:01:27 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Parece que o Pritunl est√° enfrentando um problema de inicializa√ß√£o. Tente reiniciar o aplicativo e verificar se ele abre corretamente em uma √∫nica guia.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Reiniciar o aplicativo Pritunl.","followUpQuestions":"","ticketSummary":"","confidence":85}
2025-05-30 01:01:28.046 | [Nest] 30  - 05/30/2025, 4:01:28 AM   DEBUG [OpenAIService] Support response generated: {"message":"Para ativar a autentica√ß√£o de dois fatores no 55PBX, acesse as configura√ß√µes da sua conta e procure pela op√ß√£o de seguran√ßa. Caso precise de ajuda adicional, vou criar um ticket para suporte especializado.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o para ativa√ß√£o da autentica√ß√£o de dois fatores no 55PBX.","confidence":85}
2025-05-30 01:01:28.046 | [Nest] 30  - 05/30/2025, 4:01:28 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Para ativar a autentica√ß√£o de dois fatores no 55PBX, acesse as configura√ß√µes da sua conta e procure pela op√ß√£o de seguran√ßa. Caso precise de ajuda adicional, vou criar um ticket para suporte especializado.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o para ativa√ß√£o da autentica√ß√£o de dois fatores no 55PBX.","confidence":85}
2025-05-30 01:01:28.489 | [Nest] 30  - 05/30/2025, 4:01:28 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Meu notebook n√£o liga mais. Liguei de manh√£, ele desligou sozinho e n√£o parece estar recebendo energia.
2025-05-30 01:01:28.491 | [Nest] 30  - 05/30/2025, 4:01:28 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:01:28.491 | [Nest] 30  - 05/30/2025, 4:01:28 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:01:28.491 | [Nest] 30  - 05/30/2025, 4:01:28 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:01:28.640 | [Nest] 30  - 05/30/2025, 4:01:28 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577681.435399
2025-05-30 01:01:29.090 | [Nest] 30  - 05/30/2025, 4:01:29 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Meu notebook n√£o liga mais. Liguei de manh√£, ele desligou sozinho e n√£o parece estar recebendo energia.
2025-05-30 01:01:29.091 | [Nest] 30  - 05/30/2025, 4:01:29 AM   DEBUG [OpenAIService] Generating support response for message: Meu notebook n√£o liga mais. Liguei de manh√£, ele desligou sozinho e n√£o parece estar recebendo energia.
2025-05-30 01:01:29.091 | [Nest] 30  - 05/30/2025, 4:01:29 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:29.689 | [Nest] 30  - 05/30/2025, 4:01:29 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577681.435399
2025-05-30 01:01:29.690 | [Nest] 30  - 05/30/2025, 4:01:29 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:01:31.861 | [Nest] 30  - 05/30/2025, 4:01:31 AM   DEBUG [OpenAIService] Support response generated: {"message":"Parece que seu notebook pode estar com problemas de energia. Tente desconectar o carregador, remover a bateria (se poss√≠vel) e pressionar o bot√£o de ligar por 15 segundos antes de reconectar tudo e tentar ligar novamente.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Desconectar o carregador, remover a bateria e pressionar o bot√£o de ligar por 15 segundos.","followUpQuestions":null,"ticketSummary":null,"confidence":85}
2025-05-30 01:01:31.861 | [Nest] 30  - 05/30/2025, 4:01:31 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Parece que seu notebook pode estar com problemas de energia. Tente desconectar o carregador, remover a bateria (se poss√≠vel) e pressionar o bot√£o de ligar por 15 segundos antes de reconectar tudo e tentar ligar novamente.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Desconectar o carregador, remover a bateria e pressionar o bot√£o de ligar por 15 segundos.","followUpQuestions":null,"ticketSummary":null,"confidence":85}
2025-05-30 01:01:35.887 | [Nest] 30  - 05/30/2025, 4:01:35 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:01:36.481 | [Nest] 30  - 05/30/2025, 4:01:36 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Pode adicionar este site no Desktime? <https://www.upwork.com/>
2025-05-30 01:01:36.484 | [Nest] 30  - 05/30/2025, 4:01:36 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:01:36.484 | [Nest] 30  - 05/30/2025, 4:01:36 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:01:36.484 | [Nest] 30  - 05/30/2025, 4:01:36 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:01:37.082 | [Nest] 30  - 05/30/2025, 4:01:37 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Pode adicionar este site no Desktime? <https://www.upwork.com/>
2025-05-30 01:01:37.082 | [Nest] 30  - 05/30/2025, 4:01:37 AM   DEBUG [OpenAIService] Generating support response for message: Pode adicionar este site no Desktime? <https://www.upwork.com/>
2025-05-30 01:01:37.082 | [Nest] 30  - 05/30/2025, 4:01:37 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:39.500 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [JiraService] Retrieved reporter account ID: 712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48
2025-05-30 01:01:39.500 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:01:39.500 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:01:39.500 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:01:39.500 |   customfield_10962: 'Outros',
2025-05-30 01:01:39.500 |   customfield_10963: 'Outros',
2025-05-30 01:01:39.500 |   customfield_10966: 'M√©dia',
2025-05-30 01:01:39.500 |   customfield_10967: 'N√£o'
2025-05-30 01:01:39.500 | }
2025-05-30 01:01:39.500 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:01:39.500 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [JiraService] {
2025-05-30 01:01:39.500 |   "fields": {
2025-05-30 01:01:39.500 |     "project": {
2025-05-30 01:01:39.500 |       "key": "PS4"
2025-05-30 01:01:39.500 |     },
2025-05-30 01:01:39.500 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:01:39.500 |     "description": {
2025-05-30 01:01:39.500 |       "type": "doc",
2025-05-30 01:01:39.500 |       "version": 1,
2025-05-30 01:01:39.500 |       "content": [
2025-05-30 01:01:39.500 |         {
2025-05-30 01:01:39.500 |           "type": "paragraph",
2025-05-30 01:01:39.500 |           "content": [
2025-05-30 01:01:39.500 |             {
2025-05-30 01:01:39.500 |               "type": "text",
2025-05-30 01:01:39.500 |               "text": "**Problema:** Usu√°rio solicita instru√ß√µes para ativar a autentica√ß√£o de dois fatores no sistema 55PBX.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Como ativo a autentica√ß√£o de dois fatores no 55PBX?\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:01:39.500 |             }
2025-05-30 01:01:39.500 |           ]
2025-05-30 01:01:39.500 |         }
2025-05-30 01:01:39.500 |       ]
2025-05-30 01:01:39.500 |     },
2025-05-30 01:01:39.500 |     "issuetype": {
2025-05-30 01:01:39.500 |       "id": "10626"
2025-05-30 01:01:39.500 |     },
2025-05-30 01:01:39.500 |     "reporter": {
2025-05-30 01:01:39.500 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:01:39.500 |     },
2025-05-30 01:01:39.500 |     "customfield_10962": "Outros",
2025-05-30 01:01:39.500 |     "customfield_10963": "Outros",
2025-05-30 01:01:39.500 |     "customfield_10966": "M√©dia",
2025-05-30 01:01:39.500 |     "customfield_10967": "N√£o"
2025-05-30 01:01:39.500 |   }
2025-05-30 01:01:39.500 | }
2025-05-30 01:01:39.500 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:01:39.503 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para adicionar o site https://www.upwork.com/ no Desktime.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Adicionar site no Desktime.","confidence":95}
2025-05-30 01:01:39.503 | [Nest] 30  - 05/30/2025, 4:01:39 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para adicionar o site https://www.upwork.com/ no Desktime.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Adicionar site no Desktime.","confidence":95}
2025-05-30 01:01:40.092 | [Nest] 30  - 05/30/2025, 4:01:40 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577695.313959
2025-05-30 01:01:40.572 | [Nest] 30  - 05/30/2025, 4:01:40 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-278
2025-05-30 01:01:40.573 | [Nest] 30  - 05/30/2025, 4:01:40 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577681.435399 -> PS4-278
2025-05-30 01:01:40.573 | [Nest] 30  - 05/30/2025, 4:01:40 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-278
2025-05-30 01:01:40.573 | [Nest] 30  - 05/30/2025, 4:01:40 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:01:40.573 | [Nest] 30  - 05/30/2025, 4:01:40 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577681.435399
2025-05-30 01:01:41.092 | [Nest] 30  - 05/30/2025, 4:01:41 AM   DEBUG [GptSummarizationService] Summarizing problem text of 51 characters
2025-05-30 01:01:41.092 | [Nest] 30  - 05/30/2025, 4:01:41 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:01:41.668 | [Nest] 30  - 05/30/2025, 4:01:41 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577695.313959
2025-05-30 01:01:41.669 | [Nest] 30  - 05/30/2025, 4:01:41 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:01:41.748 | [Nest] 30  - 05/30/2025, 4:01:41 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Ativa√ß√£o da autentica√ß√£o de dois fatores no 55PBX"
2025-05-30 01:01:41.748 | [Nest] 30  - 05/30/2025, 4:01:41 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:01:44.190 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:01:44.190 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:01:44.190 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:01:44.190 |   task: 'Natural language admin notification generation',
2025-05-30 01:01:44.190 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:01:44.190 |   costMultiplier: 1,
2025-05-30 01:01:44.190 |   estimatedCost: 0.0000153,
2025-05-30 01:01:44.190 |   potentialSavings: 0.00023970000000000003
2025-05-30 01:01:44.190 | }
2025-05-30 01:01:44.190 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:01:44.284 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Preciso instalar minhas credenciais de VPN.
2025-05-30 01:01:44.284 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:01:44.284 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:01:44.284 | [Nest] 30  - 05/30/2025, 4:01:44 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:01:44.876 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Preciso instalar minhas credenciais de VPN.
2025-05-30 01:01:44.876 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [OpenAIService] Generating support response for message: Preciso instalar minhas credenciais de VPN.
2025-05-30 01:01:44.876 | [Nest] 30  - 05/30/2025, 4:01:44 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:45.791 | [Nest] 30  - 05/30/2025, 4:01:45 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:01:45.792 | [Nest] 30  - 05/30/2025, 4:01:45 AM   DEBUG [JiraService] Getting ticket PS4-278
2025-05-30 01:01:46.243 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [TicketService] Using actual Jira priority for PS4-278: Could Have [P3] -> P3
2025-05-30 01:01:46.244 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-278, priority: P3
2025-05-30 01:01:46.244 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:01:46.243Z to 2025-05-30T04:01:46.244Z
2025-05-30 01:01:46.247 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:01:46.243Z to 2025-05-30T04:01:46.244Z
2025-05-30 01:01:46.248 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:01:46.870 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577707.065519 -> PS4-278
2025-05-30 01:01:46.870 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577707.065519","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577707.065519","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-278","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"S/sNv","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-278|*PS4-278*> - Ativa√ß√£o da autentica√ß√£o de dois fatores no 55PBX","verbatim":false}},{"type":"section","block_id":"vexME","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com d√∫vidas sobre como ativar a autentica√ß√£o de dois fatores no 55PBX. Ele n√£o fez tentativas anteriores. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"fuI/S","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"3wab2"},{"type":"actions","block_id":"ticket_actions_PS4-278","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-278\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577681.435399\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-278\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577681.435399\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-278\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577681.435399\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:01:46.870 | [Nest] 30  - 05/30/2025, 4:01:46 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-278
2025-05-30 01:01:46.871 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-278
2025-05-30 01:01:46.871 | [Nest] 30  - 05/30/2025, 4:01:46 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:47.017 | [Nest] 30  - 05/30/2025, 4:01:47 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para a instala√ß√£o das suas credenciais de VPN.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Instala√ß√£o das credenciais de VPN.","confidence":95}
2025-05-30 01:01:47.017 | [Nest] 30  - 05/30/2025, 4:01:47 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para a instala√ß√£o das suas credenciais de VPN.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Instala√ß√£o das credenciais de VPN.","confidence":95}
2025-05-30 01:01:47.628 | [Nest] 30  - 05/30/2025, 4:01:47 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577704.110069
2025-05-30 01:01:48.050 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-278 e a equipe j√° foi notificada. Agora, vamos analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve. (neutral)
2025-05-30 01:01:48.050 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-278 e a equipe j√° foi notificada. Agora, vamos analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:01:48.051 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-278|PS4-278> e a equipe j√° foi notificada. Agora, vamos analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:01:48.051 | 
2025-05-30 01:01:48.051 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:01:48.099 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:01:48.099 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:01:48.099 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:01:48.099 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:01:48.099 |   customfield_10962: 'Outros',
2025-05-30 01:01:48.099 |   customfield_10963: 'Outros',
2025-05-30 01:01:48.099 |   customfield_10966: 'M√©dia',
2025-05-30 01:01:48.099 |   customfield_10967: 'N√£o'
2025-05-30 01:01:48.099 | }
2025-05-30 01:01:48.099 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:01:48.099 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [JiraService] {
2025-05-30 01:01:48.099 |   "fields": {
2025-05-30 01:01:48.099 |     "project": {
2025-05-30 01:01:48.099 |       "key": "PS4"
2025-05-30 01:01:48.099 |     },
2025-05-30 01:01:48.099 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:01:48.099 |     "description": {
2025-05-30 01:01:48.099 |       "type": "doc",
2025-05-30 01:01:48.099 |       "version": 1,
2025-05-30 01:01:48.099 |       "content": [
2025-05-30 01:01:48.099 |         {
2025-05-30 01:01:48.099 |           "type": "paragraph",
2025-05-30 01:01:48.099 |           "content": [
2025-05-30 01:01:48.099 |             {
2025-05-30 01:01:48.099 |               "type": "text",
2025-05-30 01:01:48.099 |               "text": "**Problema:** O usu√°rio solicitou a adi√ß√£o do site 'https://www.upwork.com/' ao DeskTime.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Pode adicionar este site no Desktime? <https://www.upwork.com/>\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:01:48.099 |             }
2025-05-30 01:01:48.099 |           ]
2025-05-30 01:01:48.099 |         }
2025-05-30 01:01:48.099 |       ]
2025-05-30 01:01:48.099 |     },
2025-05-30 01:01:48.099 |     "issuetype": {
2025-05-30 01:01:48.099 |       "id": "10626"
2025-05-30 01:01:48.099 |     },
2025-05-30 01:01:48.099 |     "reporter": {
2025-05-30 01:01:48.099 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:01:48.099 |     },
2025-05-30 01:01:48.099 |     "customfield_10962": "Outros",
2025-05-30 01:01:48.099 |     "customfield_10963": "Outros",
2025-05-30 01:01:48.099 |     "customfield_10966": "M√©dia",
2025-05-30 01:01:48.099 |     "customfield_10967": "N√£o"
2025-05-30 01:01:48.099 |   }
2025-05-30 01:01:48.099 | }
2025-05-30 01:01:48.099 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:01:48.669 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577704.110069
2025-05-30 01:01:48.669 | [Nest] 30  - 05/30/2025, 4:01:48 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:01:49.071 | [Nest] 30  - 05/30/2025, 4:01:49 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-279
2025-05-30 01:01:49.072 | [Nest] 30  - 05/30/2025, 4:01:49 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577695.313959 -> PS4-279
2025-05-30 01:01:49.072 | [Nest] 30  - 05/30/2025, 4:01:49 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-279
2025-05-30 01:01:49.072 | [Nest] 30  - 05/30/2025, 4:01:49 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:01:49.072 | [Nest] 30  - 05/30/2025, 4:01:49 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577695.313959
2025-05-30 01:01:49.563 | [Nest] 30  - 05/30/2025, 4:01:49 AM   DEBUG [GptSummarizationService] Summarizing problem text of 63 characters
2025-05-30 01:01:50.934 | [Nest] 30  - 05/30/2025, 4:01:50 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:01:51.615 | [Nest] 30  - 05/30/2025, 4:01:51 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-278
2025-05-30 01:01:51.616 | [Nest] 30  - 05/30/2025, 4:01:51 AM   DEBUG [JiraService] Adding comment to ticket PS4-278 by suporteja_bot
2025-05-30 01:01:52.062 | [Nest] 30  - 05/30/2025, 4:01:52 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Adicionar site Upwork ao Desktime para monitoramento."
2025-05-30 01:01:52.062 | [Nest] 30  - 05/30/2025, 4:01:52 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:01:52.089 | [Nest] 30  - 05/30/2025, 4:01:52 AM     LOG [JiraService] Added comment to Jira ticket PS4-278
2025-05-30 01:01:54.764 | [Nest] 30  - 05/30/2025, 4:01:54 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:01:54.764 | [Nest] 30  - 05/30/2025, 4:01:54 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:01:54.764 | [Nest] 30  - 05/30/2025, 4:01:54 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:01:54.764 | [Nest] 30  - 05/30/2025, 4:01:54 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:01:54.764 |   customfield_10962: 'Outros',
2025-05-30 01:01:54.764 |   customfield_10963: 'Outros',
2025-05-30 01:01:54.764 |   customfield_10966: 'M√©dia',
2025-05-30 01:01:54.764 |   customfield_10967: 'N√£o'
2025-05-30 01:01:54.764 | }
2025-05-30 01:01:54.764 | [Nest] 30  - 05/30/2025, 4:01:54 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:01:54.764 | [Nest] 30  - 05/30/2025, 4:01:54 AM   DEBUG [JiraService] {
2025-05-30 01:01:54.764 |   "fields": {
2025-05-30 01:01:54.764 |     "project": {
2025-05-30 01:01:54.764 |       "key": "PS4"
2025-05-30 01:01:54.764 |     },
2025-05-30 01:01:54.764 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:01:54.764 |     "description": {
2025-05-30 01:01:54.764 |       "type": "doc",
2025-05-30 01:01:54.764 |       "version": 1,
2025-05-30 01:01:54.764 |       "content": [
2025-05-30 01:01:54.764 |         {
2025-05-30 01:01:54.764 |           "type": "paragraph",
2025-05-30 01:01:54.764 |           "content": [
2025-05-30 01:01:54.764 |             {
2025-05-30 01:01:54.764 |               "type": "text",
2025-05-30 01:01:54.764 |               "text": "**Problema:** O usu√°rio necessita de assist√™ncia para instalar suas credenciais de VPN.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Preciso instalar minhas credenciais de VPN.\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:01:54.764 |             }
2025-05-30 01:01:54.764 |           ]
2025-05-30 01:01:54.764 |         }
2025-05-30 01:01:54.764 |       ]
2025-05-30 01:01:54.764 |     },
2025-05-30 01:01:54.764 |     "issuetype": {
2025-05-30 01:01:54.764 |       "id": "10626"
2025-05-30 01:01:54.764 |     },
2025-05-30 01:01:54.764 |     "reporter": {
2025-05-30 01:01:54.764 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:01:54.764 |     },
2025-05-30 01:01:54.764 |     "customfield_10962": "Outros",
2025-05-30 01:01:54.764 |     "customfield_10963": "Outros",
2025-05-30 01:01:54.764 |     "customfield_10966": "M√©dia",
2025-05-30 01:01:54.764 |     "customfield_10967": "N√£o"
2025-05-30 01:01:54.764 |   }
2025-05-30 01:01:54.764 | }
2025-05-30 01:01:54.764 | [Nest] 30  - 05/30/2025, 4:01:54 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:01:55.454 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:01:55.454 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:01:55.454 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:01:55.454 |   task: 'Natural language admin notification generation',
2025-05-30 01:01:55.454 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:01:55.454 |   costMultiplier: 1,
2025-05-30 01:01:55.454 |   estimatedCost: 0.0000189,
2025-05-30 01:01:55.454 |   potentialSavings: 0.0002961
2025-05-30 01:01:55.454 | }
2025-05-30 01:01:55.454 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:01:55.657 | [Nest] 30  - 05/30/2025, 4:01:55 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-280
2025-05-30 01:01:55.657 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577704.110069 -> PS4-280
2025-05-30 01:01:55.657 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-280
2025-05-30 01:01:55.657 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:01:55.657 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577704.110069
2025-05-30 01:01:55.705 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Onboarding do Phillipe Manes est√° pendente. O que falta?
2025-05-30 01:01:55.705 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:01:55.705 | [Nest] 30  - 05/30/2025, 4:01:55 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:01:55.705 | [Nest] 30  - 05/30/2025, 4:01:55 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:01:56.271 | [Nest] 30  - 05/30/2025, 4:01:56 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Onboarding do Phillipe Manes est√° pendente. O que falta?
2025-05-30 01:01:56.271 | [Nest] 30  - 05/30/2025, 4:01:56 AM   DEBUG [OpenAIService] Generating support response for message: Onboarding do Phillipe Manes est√° pendente. O que falta?
2025-05-30 01:01:56.271 | [Nest] 30  - 05/30/2025, 4:01:56 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:56.274 | [Nest] 30  - 05/30/2025, 4:01:56 AM   DEBUG [GptSummarizationService] Summarizing problem text of 43 characters
2025-05-30 01:01:56.274 | [Nest] 30  - 05/30/2025, 4:01:56 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:01:56.998 | [Nest] 30  - 05/30/2025, 4:01:56 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:01:56.998 | [Nest] 30  - 05/30/2025, 4:01:56 AM   DEBUG [JiraService] Getting ticket PS4-279
2025-05-30 01:01:57.058 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Instala√ß√£o de credenciais de VPN necess√°ria para acesso."
2025-05-30 01:01:57.058 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:01:57.417 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [TicketService] Using actual Jira priority for PS4-279: Could Have [P3] -> P3
2025-05-30 01:01:57.417 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-279, priority: P3
2025-05-30 01:01:57.417 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:01:57.416Z to 2025-05-30T04:01:57.416Z
2025-05-30 01:01:57.418 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:01:57.416Z to 2025-05-30T04:01:57.416Z
2025-05-30 01:01:57.420 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:01:57.966 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577718.170719 -> PS4-279
2025-05-30 01:01:57.966 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577718.170719","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577718.170719","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-279","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"S3PJ5","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-279|*PS4-279*> - Adicionar site Upwork ao Desktime para monitoramento.","verbatim":false}},{"type":"section","block_id":"pGwtx","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o para adicionar o site <https://www.upwork.com/> no Desktime. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"bpan8","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"eUSmh"},{"type":"actions","block_id":"ticket_actions_PS4-279","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-279\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577695.313959\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-279\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577695.313959\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-279\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577695.313959\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:01:57.966 | [Nest] 30  - 05/30/2025, 4:01:57 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-279
2025-05-30 01:01:57.967 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-279
2025-05-30 01:01:57.967 | [Nest] 30  - 05/30/2025, 4:01:57 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:01:58.240 | [Nest] 30  - 05/30/2025, 4:01:58 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para verificar o status do onboarding do Phillipe Manes.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Verificar status do onboarding do Phillipe Manes.","confidence":90}
2025-05-30 01:01:58.240 | [Nest] 30  - 05/30/2025, 4:01:58 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para verificar o status do onboarding do Phillipe Manes.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Verificar status do onboarding do Phillipe Manes.","confidence":90}
2025-05-30 01:01:58.832 | [Nest] 30  - 05/30/2025, 4:01:58 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577714.854549
2025-05-30 01:01:58.904 | [Nest] 30  - 05/30/2025, 4:01:58 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:01:58.904 | [Nest] 30  - 05/30/2025, 4:01:58 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:01:58.904 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:01:58.904 |   task: 'Natural language admin notification generation',
2025-05-30 01:01:58.904 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:01:58.904 |   costMultiplier: 1,
2025-05-30 01:01:58.904 |   estimatedCost: 0.0000129,
2025-05-30 01:01:58.904 |   potentialSavings: 0.00020210000000000003
2025-05-30 01:01:58.904 | }
2025-05-30 01:01:58.904 | [Nest] 30  - 05/30/2025, 4:01:58 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:01:59.312 | [Nest] 30  - 05/30/2025, 4:01:59 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-279 e a equipe j√° foi notificada. Eles v√£o analisar e voc√™ receber√° uma atualiza√ß√£o em breve. (neutral)
2025-05-30 01:01:59.312 | [Nest] 30  - 05/30/2025, 4:01:59 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-279 e a equipe j√° foi notificada. Eles v√£o analisar e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:01:59.312 | [Nest] 30  - 05/30/2025, 4:01:59 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-279|PS4-279> e a equipe j√° foi notificada. Eles v√£o analisar e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:01:59.312 | 
2025-05-30 01:01:59.312 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:01:59.858 | [Nest] 30  - 05/30/2025, 4:01:59 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577714.854549
2025-05-30 01:01:59.858 | [Nest] 30  - 05/30/2025, 4:01:59 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:02:00.138 | [Nest] 30  - 05/30/2025, 4:02:00 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:02:00.138 | [Nest] 30  - 05/30/2025, 4:02:00 AM   DEBUG [JiraService] Getting ticket PS4-280
2025-05-30 01:02:00.471 | [Nest] 30  - 05/30/2025, 4:02:00 AM   DEBUG [TicketService] Using actual Jira priority for PS4-280: Could Have [P3] -> P3
2025-05-30 01:02:00.471 | [Nest] 30  - 05/30/2025, 4:02:00 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-280, priority: P3
2025-05-30 01:02:00.471 | [Nest] 30  - 05/30/2025, 4:02:00 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:00.471Z to 2025-05-30T04:02:00.471Z
2025-05-30 01:02:00.471 | [Nest] 30  - 05/30/2025, 4:02:00 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:00.471Z to 2025-05-30T04:02:00.471Z
2025-05-30 01:02:00.471 | [Nest] 30  - 05/30/2025, 4:02:00 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:02:01.064 | [Nest] 30  - 05/30/2025, 4:02:01 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577721.268729 -> PS4-280
2025-05-30 01:02:01.064 | [Nest] 30  - 05/30/2025, 4:02:01 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577721.268729","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577721.268729","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-280","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"OY+4U","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-280|*PS4-280*> - Instala√ß√£o de credenciais de VPN necess√°ria para acesso.","verbatim":false}},{"type":"section","block_id":"G8aDm","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de instala√ß√£o das suas credenciais de VPN. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"wMvjH","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Instala√ß√£o Software","verbatim":false}]},{"type":"divider","block_id":"z4SJE"},{"type":"actions","block_id":"ticket_actions_PS4-280","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-280\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577704.110069\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-280\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577704.110069\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-280\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577704.110069\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:02:01.065 | [Nest] 30  - 05/30/2025, 4:02:01 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-280
2025-05-30 01:02:01.065 | [Nest] 30  - 05/30/2025, 4:02:01 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-280
2025-05-30 01:02:01.065 | [Nest] 30  - 05/30/2025, 4:02:01 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:02.857 | [Nest] 30  - 05/30/2025, 4:02:02 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-280 e a equipe j√° foi notificada. Eles est√£o analisando os dados e em breve voc√™ receber√° um retorno sobre os pr√≥ximos passos. (neutral)
2025-05-30 01:02:02.857 | [Nest] 30  - 05/30/2025, 4:02:02 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-280 e a equipe j√° foi notificada. Eles est√£o analisando os dados e em breve voc√™ receber√° um retorno sobre os pr√≥ximos passos.
2025-05-30 01:02:02.857 | [Nest] 30  - 05/30/2025, 4:02:02 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-280|PS4-280> e a equipe j√° foi notificada. Eles est√£o analisando os dados e em breve voc√™ receber√° um retorno sobre os pr√≥ximos passos.
2025-05-30 01:02:02.857 | 
2025-05-30 01:02:02.857 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:02:02.915 | [Nest] 30  - 05/30/2025, 4:02:02 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-279
2025-05-30 01:02:02.915 | [Nest] 30  - 05/30/2025, 4:02:02 AM   DEBUG [JiraService] Adding comment to ticket PS4-279 by suporteja_bot
2025-05-30 01:02:03.483 | [Nest] 30  - 05/30/2025, 4:02:03 AM     LOG [JiraService] Added comment to Jira ticket PS4-279
2025-05-30 01:02:06.484 | [Nest] 30  - 05/30/2025, 4:02:06 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-280
2025-05-30 01:02:06.484 | [Nest] 30  - 05/30/2025, 4:02:06 AM   DEBUG [JiraService] Adding comment to ticket PS4-280 by suporteja_bot
2025-05-30 01:02:07.038 | [Nest] 30  - 05/30/2025, 4:02:07 AM     LOG [JiraService] Added comment to Jira ticket PS4-280
2025-05-30 01:02:07.328 | [Nest] 30  - 05/30/2025, 4:02:07 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:02:07.328 | [Nest] 30  - 05/30/2025, 4:02:07 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:02:07.329 | [Nest] 30  - 05/30/2025, 4:02:07 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:02:07.329 | [Nest] 30  - 05/30/2025, 4:02:07 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:02:07.329 |   customfield_10962: 'Outros',
2025-05-30 01:02:07.329 |   customfield_10963: 'Outros',
2025-05-30 01:02:07.329 |   customfield_10966: 'M√©dia',
2025-05-30 01:02:07.329 |   customfield_10967: 'N√£o'
2025-05-30 01:02:07.329 | }
2025-05-30 01:02:07.329 | [Nest] 30  - 05/30/2025, 4:02:07 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:02:07.329 | [Nest] 30  - 05/30/2025, 4:02:07 AM   DEBUG [JiraService] {
2025-05-30 01:02:07.329 |   "fields": {
2025-05-30 01:02:07.329 |     "project": {
2025-05-30 01:02:07.329 |       "key": "PS4"
2025-05-30 01:02:07.329 |     },
2025-05-30 01:02:07.329 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:02:07.329 |     "description": {
2025-05-30 01:02:07.329 |       "type": "doc",
2025-05-30 01:02:07.329 |       "version": 1,
2025-05-30 01:02:07.329 |       "content": [
2025-05-30 01:02:07.329 |         {
2025-05-30 01:02:07.329 |           "type": "paragraph",
2025-05-30 01:02:07.329 |           "content": [
2025-05-30 01:02:07.329 |             {
2025-05-30 01:02:07.329 |               "type": "text",
2025-05-30 01:02:07.329 |               "text": "**Problema:** O onboarding do usu√°rio Phillipe Manes est√° pendente, necessitando de identifica√ß√£o dos passos faltantes para conclus√£o.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Onboarding do Phillipe Manes est√° pendente. O que falta?\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:02:07.329 |             }
2025-05-30 01:02:07.329 |           ]
2025-05-30 01:02:07.329 |         }
2025-05-30 01:02:07.329 |       ]
2025-05-30 01:02:07.329 |     },
2025-05-30 01:02:07.329 |     "issuetype": {
2025-05-30 01:02:07.329 |       "id": "10626"
2025-05-30 01:02:07.329 |     },
2025-05-30 01:02:07.329 |     "reporter": {
2025-05-30 01:02:07.329 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:02:07.329 |     },
2025-05-30 01:02:07.329 |     "customfield_10962": "Outros",
2025-05-30 01:02:07.329 |     "customfield_10963": "Outros",
2025-05-30 01:02:07.329 |     "customfield_10966": "M√©dia",
2025-05-30 01:02:07.329 |     "customfield_10967": "N√£o"
2025-05-30 01:02:07.329 |   }
2025-05-30 01:02:07.329 | }
2025-05-30 01:02:07.329 | [Nest] 30  - 05/30/2025, 4:02:07 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:02:08.335 | [Nest] 30  - 05/30/2025, 4:02:08 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-281
2025-05-30 01:02:08.335 | [Nest] 30  - 05/30/2025, 4:02:08 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577714.854549 -> PS4-281
2025-05-30 01:02:08.337 | [Nest] 30  - 05/30/2025, 4:02:08 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-281
2025-05-30 01:02:08.342 | [Nest] 30  - 05/30/2025, 4:02:08 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:02:08.342 | [Nest] 30  - 05/30/2025, 4:02:08 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577714.854549
2025-05-30 01:02:08.932 | [Nest] 30  - 05/30/2025, 4:02:08 AM   DEBUG [GptSummarizationService] Summarizing problem text of 56 characters
2025-05-30 01:02:08.932 | [Nest] 30  - 05/30/2025, 4:02:08 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:02:09.605 | [Nest] 30  - 05/30/2025, 4:02:09 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Status do onboarding pendente de Phillipe Manes."
2025-05-30 01:02:09.605 | [Nest] 30  - 05/30/2025, 4:02:09 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:02:11.446 | [Nest] 30  - 05/30/2025, 4:02:11 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:02:11.447 | [Nest] 30  - 05/30/2025, 4:02:11 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:02:11.447 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:02:11.447 |   task: 'Natural language admin notification generation',
2025-05-30 01:02:11.447 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:02:11.447 |   costMultiplier: 1,
2025-05-30 01:02:11.447 |   estimatedCost: 0.0000168,
2025-05-30 01:02:11.447 |   potentialSavings: 0.0002632
2025-05-30 01:02:11.447 | }
2025-05-30 01:02:11.447 | [Nest] 30  - 05/30/2025, 4:02:11 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:02:11.826 | [Nest] 30  - 05/30/2025, 4:02:11 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Quero acesso ao e-mail <mailto:qa@ipmedia.com.br|qa@ipmedia.com.br>
2025-05-30 01:02:11.826 | [Nest] 30  - 05/30/2025, 4:02:11 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:02:11.827 | [Nest] 30  - 05/30/2025, 4:02:11 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:02:11.827 | [Nest] 30  - 05/30/2025, 4:02:11 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:02:12.358 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Quero acesso ao e-mail <mailto:qa@ipmedia.com.br|qa@ipmedia.com.br>
2025-05-30 01:02:12.358 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [OpenAIService] Generating support response for message: Quero acesso ao e-mail <mailto:qa@ipmedia.com.br|qa@ipmedia.com.br>
2025-05-30 01:02:12.359 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:12.451 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:02:12.451 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [JiraService] Getting ticket PS4-281
2025-05-30 01:02:12.853 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [TicketService] Using actual Jira priority for PS4-281: Could Have [P3] -> P3
2025-05-30 01:02:12.853 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-281, priority: P3
2025-05-30 01:02:12.854 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:12.853Z to 2025-05-30T04:02:12.853Z
2025-05-30 01:02:12.854 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:12.853Z to 2025-05-30T04:02:12.853Z
2025-05-30 01:02:12.855 | [Nest] 30  - 05/30/2025, 4:02:12 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:02:13.485 | [Nest] 30  - 05/30/2025, 4:02:13 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577733.685989 -> PS4-281
2025-05-30 01:02:13.486 | [Nest] 30  - 05/30/2025, 4:02:13 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577733.685989","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577733.685989","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-281","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"maHbi","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-281|*PS4-281*> - Status do onboarding pendente de Phillipe Manes.","verbatim":false}},{"type":"section","block_id":"+FsbF","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com o onboarding do Phillipe Manes pendente. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"1PPiB","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"KneGA"},{"type":"actions","block_id":"ticket_actions_PS4-281","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-281\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577714.854549\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-281\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577714.854549\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-281\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577714.854549\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:02:13.486 | [Nest] 30  - 05/30/2025, 4:02:13 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-281
2025-05-30 01:02:13.486 | [Nest] 30  - 05/30/2025, 4:02:13 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-281
2025-05-30 01:02:13.486 | [Nest] 30  - 05/30/2025, 4:02:13 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:14.726 | [Nest] 30  - 05/30/2025, 4:02:14 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-281 e a equipe j√° foi notificada. Eles v√£o analisar e entrar em contato com voc√™ em breve com os pr√≥ximos passos. (neutral)
2025-05-30 01:02:14.726 | [Nest] 30  - 05/30/2025, 4:02:14 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-281 e a equipe j√° foi notificada. Eles v√£o analisar e entrar em contato com voc√™ em breve com os pr√≥ximos passos.
2025-05-30 01:02:14.726 | [Nest] 30  - 05/30/2025, 4:02:14 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-281|PS4-281> e a equipe j√° foi notificada. Eles v√£o analisar e entrar em contato com voc√™ em breve com os pr√≥ximos passos.
2025-05-30 01:02:14.726 | 
2025-05-30 01:02:14.726 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:02:16.361 | [Nest] 30  - 05/30/2025, 4:02:16 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para liberar seu acesso ao e-mail qa@ipmedia.com.br.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de acesso ao e-mail qa@ipmedia.com.br.","confidence":100}
2025-05-30 01:02:16.362 | [Nest] 30  - 05/30/2025, 4:02:16 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para liberar seu acesso ao e-mail qa@ipmedia.com.br.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de acesso ao e-mail qa@ipmedia.com.br.","confidence":100}
2025-05-30 01:02:16.946 | [Nest] 30  - 05/30/2025, 4:02:16 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577731.072409
2025-05-30 01:02:17.843 | [Nest] 30  - 05/30/2025, 4:02:17 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Remover os acessos da Thaiana Dias.
2025-05-30 01:02:17.843 | [Nest] 30  - 05/30/2025, 4:02:17 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:02:17.843 | [Nest] 30  - 05/30/2025, 4:02:17 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:02:17.843 | [Nest] 30  - 05/30/2025, 4:02:17 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:02:18.009 | [Nest] 30  - 05/30/2025, 4:02:18 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577731.072409
2025-05-30 01:02:18.009 | [Nest] 30  - 05/30/2025, 4:02:18 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:02:18.368 | [Nest] 30  - 05/30/2025, 4:02:18 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Remover os acessos da Thaiana Dias.
2025-05-30 01:02:18.369 | [Nest] 30  - 05/30/2025, 4:02:18 AM   DEBUG [OpenAIService] Generating support response for message: Remover os acessos da Thaiana Dias.
2025-05-30 01:02:18.369 | [Nest] 30  - 05/30/2025, 4:02:18 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:18.370 | [Nest] 30  - 05/30/2025, 4:02:18 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-281
2025-05-30 01:02:18.370 | [Nest] 30  - 05/30/2025, 4:02:18 AM   DEBUG [JiraService] Adding comment to ticket PS4-281 by suporteja_bot
2025-05-30 01:02:18.913 | [Nest] 30  - 05/30/2025, 4:02:18 AM     LOG [JiraService] Added comment to Jira ticket PS4-281
2025-05-30 01:02:20.266 | [Nest] 30  - 05/30/2025, 4:02:20 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para remover os acessos da Thaiana Dias.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Remover os acessos da Thaiana Dias.","confidence":95}
2025-05-30 01:02:20.266 | [Nest] 30  - 05/30/2025, 4:02:20 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para remover os acessos da Thaiana Dias.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Remover os acessos da Thaiana Dias.","confidence":95}
2025-05-30 01:02:21.459 | [Nest] 30  - 05/30/2025, 4:02:21 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577737.122139
2025-05-30 01:02:22.481 | [Nest] 30  - 05/30/2025, 4:02:22 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577737.122139
2025-05-30 01:02:22.481 | [Nest] 30  - 05/30/2025, 4:02:22 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:02:24.722 | [Nest] 30  - 05/30/2025, 4:02:24 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Troquei de equipamento e perdi acesso ao Printunl.
2025-05-30 01:02:24.722 | [Nest] 30  - 05/30/2025, 4:02:24 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:02:24.722 | [Nest] 30  - 05/30/2025, 4:02:24 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:02:24.722 | [Nest] 30  - 05/30/2025, 4:02:24 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:02:25.012 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:02:25.012 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:02:25.012 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:02:25.012 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:02:25.012 |   customfield_10962: 'Outros',
2025-05-30 01:02:25.012 |   customfield_10963: 'Outros',
2025-05-30 01:02:25.012 |   customfield_10966: 'M√©dia',
2025-05-30 01:02:25.012 |   customfield_10967: 'N√£o'
2025-05-30 01:02:25.012 | }
2025-05-30 01:02:25.012 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:02:25.012 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [JiraService] {
2025-05-30 01:02:25.012 |   "fields": {
2025-05-30 01:02:25.012 |     "project": {
2025-05-30 01:02:25.012 |       "key": "PS4"
2025-05-30 01:02:25.012 |     },
2025-05-30 01:02:25.012 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:02:25.012 |     "description": {
2025-05-30 01:02:25.012 |       "type": "doc",
2025-05-30 01:02:25.012 |       "version": 1,
2025-05-30 01:02:25.012 |       "content": [
2025-05-30 01:02:25.012 |         {
2025-05-30 01:02:25.012 |           "type": "paragraph",
2025-05-30 01:02:25.012 |           "content": [
2025-05-30 01:02:25.012 |             {
2025-05-30 01:02:25.012 |               "type": "text",
2025-05-30 01:02:25.012 |               "text": "**Problema:** Usu√°rio solicita acesso ao e-mail qa@ipmedia.com.br.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Quero acesso ao e-mail <mailto:qa@ipmedia.com.br|qa@ipmedia.com.br>\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:02:25.012 |             }
2025-05-30 01:02:25.012 |           ]
2025-05-30 01:02:25.012 |         }
2025-05-30 01:02:25.012 |       ]
2025-05-30 01:02:25.012 |     },
2025-05-30 01:02:25.012 |     "issuetype": {
2025-05-30 01:02:25.012 |       "id": "10626"
2025-05-30 01:02:25.012 |     },
2025-05-30 01:02:25.012 |     "reporter": {
2025-05-30 01:02:25.012 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:02:25.012 |     },
2025-05-30 01:02:25.012 |     "customfield_10962": "Outros",
2025-05-30 01:02:25.012 |     "customfield_10963": "Outros",
2025-05-30 01:02:25.012 |     "customfield_10966": "M√©dia",
2025-05-30 01:02:25.012 |     "customfield_10967": "N√£o"
2025-05-30 01:02:25.012 |   }
2025-05-30 01:02:25.012 | }
2025-05-30 01:02:25.012 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:02:25.357 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Troquei de equipamento e perdi acesso ao Printunl.
2025-05-30 01:02:25.358 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [OpenAIService] Generating support response for message: Troquei de equipamento e perdi acesso ao Printunl.
2025-05-30 01:02:25.358 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:25.914 | [Nest] 30  - 05/30/2025, 4:02:25 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-282
2025-05-30 01:02:25.914 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577731.072409 -> PS4-282
2025-05-30 01:02:25.914 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-282
2025-05-30 01:02:25.914 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:02:25.914 | [Nest] 30  - 05/30/2025, 4:02:25 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577731.072409
2025-05-30 01:02:26.501 | [Nest] 30  - 05/30/2025, 4:02:26 AM   DEBUG [GptSummarizationService] Summarizing problem text of 67 characters
2025-05-30 01:02:28.230 | [Nest] 30  - 05/30/2025, 4:02:28 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:02:28.232 | [Nest] 30  - 05/30/2025, 4:02:28 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para liberar seu acesso ao Pritunl.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de acesso ao Pritunl ap√≥s troca de equipamento.","confidence":95}
2025-05-30 01:02:28.232 | [Nest] 30  - 05/30/2025, 4:02:28 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para liberar seu acesso ao Pritunl.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de acesso ao Pritunl ap√≥s troca de equipamento.","confidence":95}
2025-05-30 01:02:28.851 | [Nest] 30  - 05/30/2025, 4:02:28 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577743.753449
2025-05-30 01:02:29.112 | [Nest] 30  - 05/30/2025, 4:02:29 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Solicita√ß√£o de acesso ao e-mail qa@ipmedia.com.br"
2025-05-30 01:02:29.112 | [Nest] 30  - 05/30/2025, 4:02:29 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:02:29.872 | [Nest] 30  - 05/30/2025, 4:02:29 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577743.753449
2025-05-30 01:02:29.872 | [Nest] 30  - 05/30/2025, 4:02:29 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:02:31.121 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:02:31.122 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:02:31.122 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:02:31.122 |   task: 'Natural language admin notification generation',
2025-05-30 01:02:31.122 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:02:31.122 |   costMultiplier: 1,
2025-05-30 01:02:31.122 |   estimatedCost: 0.0000201,
2025-05-30 01:02:31.122 |   potentialSavings: 0.0003149
2025-05-30 01:02:31.122 | }
2025-05-30 01:02:31.122 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:02:31.827 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:02:31.827 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:02:31.827 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:02:31.827 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:02:31.827 |   customfield_10962: 'Outros',
2025-05-30 01:02:31.827 |   customfield_10963: 'Outros',
2025-05-30 01:02:31.827 |   customfield_10966: 'M√©dia',
2025-05-30 01:02:31.827 |   customfield_10967: 'N√£o'
2025-05-30 01:02:31.827 | }
2025-05-30 01:02:31.827 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:02:31.827 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [JiraService] {
2025-05-30 01:02:31.827 |   "fields": {
2025-05-30 01:02:31.827 |     "project": {
2025-05-30 01:02:31.827 |       "key": "PS4"
2025-05-30 01:02:31.827 |     },
2025-05-30 01:02:31.827 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:02:31.827 |     "description": {
2025-05-30 01:02:31.827 |       "type": "doc",
2025-05-30 01:02:31.827 |       "version": 1,
2025-05-30 01:02:31.827 |       "content": [
2025-05-30 01:02:31.827 |         {
2025-05-30 01:02:31.827 |           "type": "paragraph",
2025-05-30 01:02:31.827 |           "content": [
2025-05-30 01:02:31.827 |             {
2025-05-30 01:02:31.827 |               "type": "text",
2025-05-30 01:02:31.827 |               "text": "**Problema:** Solicita√ß√£o para remo√ß√£o de acessos de usu√°rio espec√≠fico.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Remover os acessos da Thaiana Dias.\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:02:31.827 |             }
2025-05-30 01:02:31.827 |           ]
2025-05-30 01:02:31.827 |         }
2025-05-30 01:02:31.827 |       ]
2025-05-30 01:02:31.827 |     },
2025-05-30 01:02:31.827 |     "issuetype": {
2025-05-30 01:02:31.827 |       "id": "10626"
2025-05-30 01:02:31.827 |     },
2025-05-30 01:02:31.827 |     "reporter": {
2025-05-30 01:02:31.827 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:02:31.827 |     },
2025-05-30 01:02:31.827 |     "customfield_10962": "Outros",
2025-05-30 01:02:31.827 |     "customfield_10963": "Outros",
2025-05-30 01:02:31.827 |     "customfield_10966": "M√©dia",
2025-05-30 01:02:31.827 |     "customfield_10967": "N√£o"
2025-05-30 01:02:31.827 |   }
2025-05-30 01:02:31.827 | }
2025-05-30 01:02:31.827 | [Nest] 30  - 05/30/2025, 4:02:31 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:02:32.590 | [Nest] 30  - 05/30/2025, 4:02:32 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:02:32.591 | [Nest] 30  - 05/30/2025, 4:02:32 AM   DEBUG [JiraService] Getting ticket PS4-282
2025-05-30 01:02:32.710 | [Nest] 30  - 05/30/2025, 4:02:32 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-283
2025-05-30 01:02:32.710 | [Nest] 30  - 05/30/2025, 4:02:32 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577737.122139 -> PS4-283
2025-05-30 01:02:32.710 | [Nest] 30  - 05/30/2025, 4:02:32 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-283
2025-05-30 01:02:32.710 | [Nest] 30  - 05/30/2025, 4:02:32 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:02:32.710 | [Nest] 30  - 05/30/2025, 4:02:32 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577737.122139
2025-05-30 01:02:33.057 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [TicketService] Using actual Jira priority for PS4-282: Could Have [P3] -> P3
2025-05-30 01:02:33.057 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-282, priority: P3
2025-05-30 01:02:33.057 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:33.055Z to 2025-05-30T04:02:33.055Z
2025-05-30 01:02:33.057 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:33.055Z to 2025-05-30T04:02:33.055Z
2025-05-30 01:02:33.057 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:02:33.279 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [GptSummarizationService] Summarizing problem text of 35 characters
2025-05-30 01:02:33.280 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:02:33.719 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577753.878629 -> PS4-282
2025-05-30 01:02:33.720 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577753.878629","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577753.878629","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-282","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"JjuCx","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-282|*PS4-282*> - Solicita√ß√£o de acesso ao e-mail <mailto:qa@ipmedia.com.br|qa@ipmedia.com.br>","verbatim":false}},{"type":"section","block_id":"v9trA","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com dificuldade para acessar o e-mail <mailto:qa@ipmedia.com.br|qa@ipmedia.com.br>. Ele n√£o fez tentativas anteriores. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"S2+Le","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Acesso/Autentica√ß√£o","verbatim":false}]},{"type":"divider","block_id":"6z81a"},{"type":"actions","block_id":"ticket_actions_PS4-282","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-282\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577731.072409\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-282\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577731.072409\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-282\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577731.072409\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:02:33.720 | [Nest] 30  - 05/30/2025, 4:02:33 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-282
2025-05-30 01:02:33.720 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-282
2025-05-30 01:02:33.720 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:33.910 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Remover acessos de Thaiana Dias no sistema."
2025-05-30 01:02:33.910 | [Nest] 30  - 05/30/2025, 4:02:33 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:02:35.130 | [Nest] 30  - 05/30/2025, 4:02:35 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-282 e a equipe j√° foi notificada. Eles v√£o analisar os dados e em breve voc√™ receber√° um retorno sobre os pr√≥ximos passos. (neutral)
2025-05-30 01:02:35.130 | [Nest] 30  - 05/30/2025, 4:02:35 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-282 e a equipe j√° foi notificada. Eles v√£o analisar os dados e em breve voc√™ receber√° um retorno sobre os pr√≥ximos passos.
2025-05-30 01:02:35.131 | [Nest] 30  - 05/30/2025, 4:02:35 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-282|PS4-282> e a equipe j√° foi notificada. Eles v√£o analisar os dados e em breve voc√™ receber√° um retorno sobre os pr√≥ximos passos.
2025-05-30 01:02:35.131 | 
2025-05-30 01:02:35.131 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:02:35.593 | [Nest] 30  - 05/30/2025, 4:02:35 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:02:35.594 | [Nest] 30  - 05/30/2025, 4:02:35 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:02:35.594 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:02:35.594 |   task: 'Natural language admin notification generation',
2025-05-30 01:02:35.594 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:02:35.594 |   costMultiplier: 1,
2025-05-30 01:02:35.594 |   estimatedCost: 0.0000105,
2025-05-30 01:02:35.594 |   potentialSavings: 0.00016449999999999996
2025-05-30 01:02:35.594 | }
2025-05-30 01:02:35.594 | [Nest] 30  - 05/30/2025, 4:02:35 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:02:37.031 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:02:37.031 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:02:37.031 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:02:37.032 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:02:37.032 |   customfield_10962: 'Outros',
2025-05-30 01:02:37.032 |   customfield_10963: 'Outros',
2025-05-30 01:02:37.032 |   customfield_10966: 'M√©dia',
2025-05-30 01:02:37.032 |   customfield_10967: 'N√£o'
2025-05-30 01:02:37.032 | }
2025-05-30 01:02:37.032 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:02:37.032 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [JiraService] {
2025-05-30 01:02:37.032 |   "fields": {
2025-05-30 01:02:37.032 |     "project": {
2025-05-30 01:02:37.032 |       "key": "PS4"
2025-05-30 01:02:37.032 |     },
2025-05-30 01:02:37.032 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:02:37.032 |     "description": {
2025-05-30 01:02:37.032 |       "type": "doc",
2025-05-30 01:02:37.032 |       "version": 1,
2025-05-30 01:02:37.032 |       "content": [
2025-05-30 01:02:37.032 |         {
2025-05-30 01:02:37.032 |           "type": "paragraph",
2025-05-30 01:02:37.032 |           "content": [
2025-05-30 01:02:37.032 |             {
2025-05-30 01:02:37.032 |               "type": "text",
2025-05-30 01:02:37.032 |               "text": "**Problema:** Usu√°rio perdeu acesso ao sistema Pritunl ap√≥s troca de equipamento.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Troquei de equipamento e perdi acesso ao Printunl.\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:02:37.032 |             }
2025-05-30 01:02:37.032 |           ]
2025-05-30 01:02:37.032 |         }
2025-05-30 01:02:37.033 |       ]
2025-05-30 01:02:37.033 |     },
2025-05-30 01:02:37.033 |     "issuetype": {
2025-05-30 01:02:37.033 |       "id": "10626"
2025-05-30 01:02:37.033 |     },
2025-05-30 01:02:37.033 |     "reporter": {
2025-05-30 01:02:37.033 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:02:37.033 |     },
2025-05-30 01:02:37.033 |     "customfield_10962": "Outros",
2025-05-30 01:02:37.033 |     "customfield_10963": "Outros",
2025-05-30 01:02:37.033 |     "customfield_10966": "M√©dia",
2025-05-30 01:02:37.033 |     "customfield_10967": "N√£o"
2025-05-30 01:02:37.033 |   }
2025-05-30 01:02:37.033 | }
2025-05-30 01:02:37.033 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:02:37.508 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:02:37.509 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [JiraService] Getting ticket PS4-283
2025-05-30 01:02:37.864 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [TicketService] Using actual Jira priority for PS4-283: Could Have [P3] -> P3
2025-05-30 01:02:37.864 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-283, priority: P3
2025-05-30 01:02:37.864 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:37.864Z to 2025-05-30T04:02:37.864Z
2025-05-30 01:02:37.865 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:37.864Z to 2025-05-30T04:02:37.864Z
2025-05-30 01:02:37.865 | [Nest] 30  - 05/30/2025, 4:02:37 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:02:38.258 | [Nest] 30  - 05/30/2025, 4:02:38 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-284
2025-05-30 01:02:38.259 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577743.753449 -> PS4-284
2025-05-30 01:02:38.259 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-284
2025-05-30 01:02:38.259 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:02:38.259 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577743.753449
2025-05-30 01:02:38.497 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577758.696319 -> PS4-283
2025-05-30 01:02:38.497 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577758.696319","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577758.696319","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-283","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"iczt7","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-283|*PS4-283*> - Remover acessos de Thaiana Dias no sistema.","verbatim":false}},{"type":"section","block_id":"44WDI","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de remover os acessos da Thaiana Dias. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"cPb9T","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Acesso/Autentica√ß√£o","verbatim":false}]},{"type":"divider","block_id":"nbmVG"},{"type":"actions","block_id":"ticket_actions_PS4-283","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-283\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577737.122139\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-283\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577737.122139\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-283\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577737.122139\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:02:38.497 | [Nest] 30  - 05/30/2025, 4:02:38 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-283
2025-05-30 01:02:38.497 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-283
2025-05-30 01:02:38.497 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:38.756 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-282
2025-05-30 01:02:38.756 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [JiraService] Adding comment to ticket PS4-282 by suporteja_bot
2025-05-30 01:02:38.790 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [GptSummarizationService] Summarizing problem text of 50 characters
2025-05-30 01:02:38.790 | [Nest] 30  - 05/30/2025, 4:02:38 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:02:39.293 | [Nest] 30  - 05/30/2025, 4:02:39 AM     LOG [JiraService] Added comment to Jira ticket PS4-282
2025-05-30 01:02:39.489 | [Nest] 30  - 05/30/2025, 4:02:39 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Perda de acesso ao Pritunl ap√≥s troca de equipamento"
2025-05-30 01:02:39.489 | [Nest] 30  - 05/30/2025, 4:02:39 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:02:40.597 | [Nest] 30  - 05/30/2025, 4:02:40 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-283 e a equipe j√° foi notificada. Eles v√£o revisar tudo e entraremos em contato em breve com os pr√≥ximos passos. (neutral)
2025-05-30 01:02:40.597 | [Nest] 30  - 05/30/2025, 4:02:40 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-283 e a equipe j√° foi notificada. Eles v√£o revisar tudo e entraremos em contato em breve com os pr√≥ximos passos.
2025-05-30 01:02:40.598 | [Nest] 30  - 05/30/2025, 4:02:40 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-283|PS4-283> e a equipe j√° foi notificada. Eles v√£o revisar tudo e entraremos em contato em breve com os pr√≥ximos passos.
2025-05-30 01:02:40.598 | 
2025-05-30 01:02:40.598 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:02:41.836 | [Nest] 30  - 05/30/2025, 4:02:41 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:02:41.838 | [Nest] 30  - 05/30/2025, 4:02:41 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:02:41.838 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:02:41.838 |   task: 'Natural language admin notification generation',
2025-05-30 01:02:41.838 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:02:41.838 |   costMultiplier: 1,
2025-05-30 01:02:41.838 |   estimatedCost: 0.000015,
2025-05-30 01:02:41.839 |   potentialSavings: 0.000235
2025-05-30 01:02:41.839 | }
2025-05-30 01:02:41.839 | [Nest] 30  - 05/30/2025, 4:02:41 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:02:43.379 | [Nest] 30  - 05/30/2025, 4:02:43 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Voltei das f√©rias e o Excel est√° pedindo ativa√ß√£o. Preciso urgentemente para trabalhar.
2025-05-30 01:02:43.379 | [Nest] 30  - 05/30/2025, 4:02:43 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:02:43.380 | [Nest] 30  - 05/30/2025, 4:02:43 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:02:43.380 | [Nest] 30  - 05/30/2025, 4:02:43 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:02:43.616 | [Nest] 30  - 05/30/2025, 4:02:43 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:02:43.616 | [Nest] 30  - 05/30/2025, 4:02:43 AM   DEBUG [JiraService] Getting ticket PS4-284
2025-05-30 01:02:43.917 | [Nest] 30  - 05/30/2025, 4:02:43 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Voltei das f√©rias e o Excel est√° pedindo ativa√ß√£o. Preciso urgentemente para trabalhar.
2025-05-30 01:02:43.917 | [Nest] 30  - 05/30/2025, 4:02:43 AM   DEBUG [OpenAIService] Generating support response for message: Voltei das f√©rias e o Excel est√° pedindo ativa√ß√£o. Preciso urgentemente para trabalhar.
2025-05-30 01:02:43.917 | [Nest] 30  - 05/30/2025, 4:02:43 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:44.019 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [TicketService] Using actual Jira priority for PS4-284: Could Have [P3] -> P3
2025-05-30 01:02:44.019 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-284, priority: P3
2025-05-30 01:02:44.019 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:44.019Z to 2025-05-30T04:02:44.019Z
2025-05-30 01:02:44.019 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:02:44.019Z to 2025-05-30T04:02:44.019Z
2025-05-30 01:02:44.020 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:02:44.156 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-283
2025-05-30 01:02:44.156 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [JiraService] Adding comment to ticket PS4-283 by suporteja_bot
2025-05-30 01:02:44.621 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577764.821069 -> PS4-284
2025-05-30 01:02:44.621 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577764.821069","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577764.821069","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-284","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"oXLe+","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-284|*PS4-284*> - Perda de acesso ao Pritunl ap√≥s troca de equipamento","verbatim":false}},{"type":"section","block_id":"SbYls","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com acesso ao Pritunl perdido ap√≥s trocar de equipamento. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"TisRR","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Acesso/Autentica√ß√£o","verbatim":false}]},{"type":"divider","block_id":"SPwuv"},{"type":"actions","block_id":"ticket_actions_PS4-284","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-284\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577743.753449\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-284\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577743.753449\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-284\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577743.753449\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:02:44.621 | [Nest] 30  - 05/30/2025, 4:02:44 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-284
2025-05-30 01:02:44.621 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-284
2025-05-30 01:02:44.621 | [Nest] 30  - 05/30/2025, 4:02:44 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:44.671 | [Nest] 30  - 05/30/2025, 4:02:44 AM     LOG [JiraService] Added comment to Jira ticket PS4-283
2025-05-30 01:02:45.838 | [Nest] 30  - 05/30/2025, 4:02:45 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-284 e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve. (neutral)
2025-05-30 01:02:45.839 | [Nest] 30  - 05/30/2025, 4:02:45 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-284 e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:02:45.839 | [Nest] 30  - 05/30/2025, 4:02:45 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-284|PS4-284> e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:02:45.839 | 
2025-05-30 01:02:45.839 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:02:47.151 | [Nest] 30  - 05/30/2025, 4:02:47 AM   DEBUG [OpenAIService] Support response generated: {"message":"Entendo que o Excel est√° pedindo ativa√ß√£o. Voc√™ j√° tentou inserir a chave de produto ou verificar sua conta Microsoft?","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":true,"suggestedActions":"Tente inserir a chave de produto ou verificar sua conta Microsoft.","followUpQuestions":"Qual mensagem de erro espec√≠fica voc√™ est√° recebendo?","ticketSummary":"","confidence":80}
2025-05-30 01:02:47.151 | [Nest] 30  - 05/30/2025, 4:02:47 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Entendo que o Excel est√° pedindo ativa√ß√£o. Voc√™ j√° tentou inserir a chave de produto ou verificar sua conta Microsoft?","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":true,"suggestedActions":"Tente inserir a chave de produto ou verificar sua conta Microsoft.","followUpQuestions":"Qual mensagem de erro espec√≠fica voc√™ est√° recebendo?","ticketSummary":"","confidence":80}
2025-05-30 01:02:49.405 | [Nest] 30  - 05/30/2025, 4:02:49 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-284
2025-05-30 01:02:49.405 | [Nest] 30  - 05/30/2025, 4:02:49 AM   DEBUG [JiraService] Adding comment to ticket PS4-284 by suporteja_bot
2025-05-30 01:02:49.411 | [Nest] 30  - 05/30/2025, 4:02:49 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Tem v√°rias compras no Mercado Livre no meu extrato. Preciso entender o que √© isso.
2025-05-30 01:02:49.411 | [Nest] 30  - 05/30/2025, 4:02:49 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:02:49.411 | [Nest] 30  - 05/30/2025, 4:02:49 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:02:49.412 | [Nest] 30  - 05/30/2025, 4:02:49 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:02:49.962 | [Nest] 30  - 05/30/2025, 4:02:49 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Tem v√°rias compras no Mercado Livre no meu extrato. Preciso entender o que √© isso.
2025-05-30 01:02:49.962 | [Nest] 30  - 05/30/2025, 4:02:49 AM   DEBUG [OpenAIService] Generating support response for message: Tem v√°rias compras no Mercado Livre no meu extrato. Preciso entender o que √© isso.
2025-05-30 01:02:49.962 | [Nest] 30  - 05/30/2025, 4:02:49 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:50.002 | [Nest] 30  - 05/30/2025, 4:02:50 AM     LOG [JiraService] Added comment to Jira ticket PS4-284
2025-05-30 01:02:51.670 | [Nest] 30  - 05/30/2025, 4:02:51 AM   DEBUG [OpenAIService] Support response generated: {"message":"Entendo que voc√™ est√° vendo v√°rias compras no Mercado Livre. Voc√™ pode verificar se essas compras foram feitas por voc√™ ou se h√° algum erro no extrato?","shouldCreateTicket":false,"hasImmediateSolution":false,"needsMoreInfo":true,"suggestedActions":null,"followUpQuestions":"Voc√™ reconhece alguma dessas compras?","ticketSummary":null,"confidence":80}
2025-05-30 01:02:51.670 | [Nest] 30  - 05/30/2025, 4:02:51 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Entendo que voc√™ est√° vendo v√°rias compras no Mercado Livre. Voc√™ pode verificar se essas compras foram feitas por voc√™ ou se h√° algum erro no extrato?","shouldCreateTicket":false,"hasImmediateSolution":false,"needsMoreInfo":true,"suggestedActions":null,"followUpQuestions":"Voc√™ reconhece alguma dessas compras?","ticketSummary":null,"confidence":80}
2025-05-30 01:02:54.426 | [Nest] 30  - 05/30/2025, 4:02:54 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Preparar m√°quina e enviar materiais pelos correios para o Bruno Pires (dev back-end).
2025-05-30 01:02:54.426 | [Nest] 30  - 05/30/2025, 4:02:54 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:02:54.426 | [Nest] 30  - 05/30/2025, 4:02:54 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:02:54.427 | [Nest] 30  - 05/30/2025, 4:02:54 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:02:54.941 | [Nest] 30  - 05/30/2025, 4:02:54 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Preparar m√°quina e enviar materiais pelos correios para o Bruno Pires (dev back-end).
2025-05-30 01:02:54.941 | [Nest] 30  - 05/30/2025, 4:02:54 AM   DEBUG [OpenAIService] Generating support response for message: Preparar m√°quina e enviar materiais pelos correios para o Bruno Pires (dev back-end).
2025-05-30 01:02:54.942 | [Nest] 30  - 05/30/2025, 4:02:54 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:02:57.599 | [Nest] 30  - 05/30/2025, 4:02:57 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para preparar a m√°quina e enviar os materiais para o Bruno Pires.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Preparar m√°quina e enviar materiais para Bruno Pires.","confidence":90}
2025-05-30 01:02:57.599 | [Nest] 30  - 05/30/2025, 4:02:57 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para preparar a m√°quina e enviar os materiais para o Bruno Pires.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Preparar m√°quina e enviar materiais para Bruno Pires.","confidence":90}
2025-05-30 01:02:58.225 | [Nest] 30  - 05/30/2025, 4:02:58 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577774.034159
2025-05-30 01:02:59.256 | [Nest] 30  - 05/30/2025, 4:02:59 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577774.034159
2025-05-30 01:02:59.257 | [Nest] 30  - 05/30/2025, 4:02:59 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:03:01.724 | [Nest] 30  - 05/30/2025, 4:03:01 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Adicionar o Facebook como aplicativo produtivo no Desktime.
2025-05-30 01:03:01.724 | [Nest] 30  - 05/30/2025, 4:03:01 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:03:01.724 | [Nest] 30  - 05/30/2025, 4:03:01 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:03:01.724 | [Nest] 30  - 05/30/2025, 4:03:01 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:03:02.269 | [Nest] 30  - 05/30/2025, 4:03:02 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Adicionar o Facebook como aplicativo produtivo no Desktime.
2025-05-30 01:03:02.270 | [Nest] 30  - 05/30/2025, 4:03:02 AM   DEBUG [OpenAIService] Generating support response for message: Adicionar o Facebook como aplicativo produtivo no Desktime.
2025-05-30 01:03:02.270 | [Nest] 30  - 05/30/2025, 4:03:02 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:04.593 | [Nest] 30  - 05/30/2025, 4:03:04 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para adicionar o Facebook como aplicativo produtivo no Desktime.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Adicionar o Facebook como aplicativo produtivo no Desktime.","confidence":90}
2025-05-30 01:03:04.593 | [Nest] 30  - 05/30/2025, 4:03:04 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para adicionar o Facebook como aplicativo produtivo no Desktime.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Adicionar o Facebook como aplicativo produtivo no Desktime.","confidence":90}
2025-05-30 01:03:05.196 | [Nest] 30  - 05/30/2025, 4:03:05 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577780.821849
2025-05-30 01:03:06.286 | [Nest] 30  - 05/30/2025, 4:03:06 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577780.821849
2025-05-30 01:03:06.286 | [Nest] 30  - 05/30/2025, 4:03:06 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:03:07.765 | [Nest] 30  - 05/30/2025, 4:03:07 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Incluir o Grafana como produtivo no sistema.
2025-05-30 01:03:07.765 | [Nest] 30  - 05/30/2025, 4:03:07 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:03:07.765 | [Nest] 30  - 05/30/2025, 4:03:07 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:03:07.765 | [Nest] 30  - 05/30/2025, 4:03:07 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:03:08.358 | [Nest] 30  - 05/30/2025, 4:03:08 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Incluir o Grafana como produtivo no sistema.
2025-05-30 01:03:08.358 | [Nest] 30  - 05/30/2025, 4:03:08 AM   DEBUG [OpenAIService] Generating support response for message: Incluir o Grafana como produtivo no sistema.
2025-05-30 01:03:08.359 | [Nest] 30  - 05/30/2025, 4:03:08 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:10.858 | [Nest] 30  - 05/30/2025, 4:03:10 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:03:10.860 | [Nest] 30  - 05/30/2025, 4:03:10 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:03:10.860 | [Nest] 30  - 05/30/2025, 4:03:10 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:03:10.860 | [Nest] 30  - 05/30/2025, 4:03:10 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:03:10.860 |   customfield_10962: 'Outros',
2025-05-30 01:03:10.860 |   customfield_10963: 'Outros',
2025-05-30 01:03:10.860 |   customfield_10966: 'M√©dia',
2025-05-30 01:03:10.860 |   customfield_10967: 'N√£o'
2025-05-30 01:03:10.860 | }
2025-05-30 01:03:10.860 | [Nest] 30  - 05/30/2025, 4:03:10 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:03:10.860 | [Nest] 30  - 05/30/2025, 4:03:10 AM   DEBUG [JiraService] {
2025-05-30 01:03:10.860 |   "fields": {
2025-05-30 01:03:10.860 |     "project": {
2025-05-30 01:03:10.860 |       "key": "PS4"
2025-05-30 01:03:10.860 |     },
2025-05-30 01:03:10.860 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:03:10.860 |     "description": {
2025-05-30 01:03:10.860 |       "type": "doc",
2025-05-30 01:03:10.860 |       "version": 1,
2025-05-30 01:03:10.860 |       "content": [
2025-05-30 01:03:10.860 |         {
2025-05-30 01:03:10.860 |           "type": "paragraph",
2025-05-30 01:03:10.860 |           "content": [
2025-05-30 01:03:10.860 |             {
2025-05-30 01:03:10.860 |               "type": "text",
2025-05-30 01:03:10.860 |               "text": "**Problema:** Solicita√ß√£o para preparar uma m√°quina e enviar materiais para um desenvolvedor back-end.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Preparar m√°quina e enviar materiais pelos correios para o Bruno Pires (dev back-end).\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:03:10.860 |             }
2025-05-30 01:03:10.860 |           ]
2025-05-30 01:03:10.860 |         }
2025-05-30 01:03:10.860 |       ]
2025-05-30 01:03:10.860 |     },
2025-05-30 01:03:10.860 |     "issuetype": {
2025-05-30 01:03:10.860 |       "id": "10626"
2025-05-30 01:03:10.860 |     },
2025-05-30 01:03:10.860 |     "reporter": {
2025-05-30 01:03:10.860 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:03:10.860 |     },
2025-05-30 01:03:10.860 |     "customfield_10962": "Outros",
2025-05-30 01:03:10.860 |     "customfield_10963": "Outros",
2025-05-30 01:03:10.860 |     "customfield_10966": "M√©dia",
2025-05-30 01:03:10.860 |     "customfield_10967": "N√£o"
2025-05-30 01:03:10.860 |   }
2025-05-30 01:03:10.860 | }
2025-05-30 01:03:10.860 | [Nest] 30  - 05/30/2025, 4:03:10 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:03:11.148 | [Nest] 30  - 05/30/2025, 4:03:11 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para incluir o Grafana como produtivo no sistema.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Incluir o Grafana como produtivo no sistema.","confidence":90}
2025-05-30 01:03:11.148 | [Nest] 30  - 05/30/2025, 4:03:11 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para incluir o Grafana como produtivo no sistema.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Incluir o Grafana como produtivo no sistema.","confidence":90}
2025-05-30 01:03:11.738 | [Nest] 30  - 05/30/2025, 4:03:11 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577787.501059
2025-05-30 01:03:12.868 | [Nest] 30  - 05/30/2025, 4:03:12 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577787.501059
2025-05-30 01:03:12.868 | [Nest] 30  - 05/30/2025, 4:03:12 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:03:14.162 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Quero comprar uma cadeira com o saldo do Mercado Pago da empresa.
2025-05-30 01:03:14.162 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:03:14.162 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:03:14.162 | [Nest] 30  - 05/30/2025, 4:03:14 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:03:14.710 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Quero comprar uma cadeira com o saldo do Mercado Pago da empresa.
2025-05-30 01:03:14.710 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [OpenAIService] Generating support response for message: Quero comprar uma cadeira com o saldo do Mercado Pago da empresa.
2025-05-30 01:03:14.710 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:14.865 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:03:14.865 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:03:14.865 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:03:14.865 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:03:14.865 |   customfield_10962: 'Outros',
2025-05-30 01:03:14.865 |   customfield_10963: 'Outros',
2025-05-30 01:03:14.865 |   customfield_10966: 'M√©dia',
2025-05-30 01:03:14.865 |   customfield_10967: 'N√£o'
2025-05-30 01:03:14.865 | }
2025-05-30 01:03:14.865 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:03:14.865 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [JiraService] {
2025-05-30 01:03:14.865 |   "fields": {
2025-05-30 01:03:14.865 |     "project": {
2025-05-30 01:03:14.865 |       "key": "PS4"
2025-05-30 01:03:14.865 |     },
2025-05-30 01:03:14.865 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:03:14.865 |     "description": {
2025-05-30 01:03:14.865 |       "type": "doc",
2025-05-30 01:03:14.865 |       "version": 1,
2025-05-30 01:03:14.865 |       "content": [
2025-05-30 01:03:14.865 |         {
2025-05-30 01:03:14.865 |           "type": "paragraph",
2025-05-30 01:03:14.865 |           "content": [
2025-05-30 01:03:14.865 |             {
2025-05-30 01:03:14.865 |               "type": "text",
2025-05-30 01:03:14.865 |               "text": "**Problema:** O usu√°rio solicitou a adi√ß√£o do Facebook como aplicativo produtivo no DeskTime.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Adicionar o Facebook como aplicativo produtivo no Desktime.\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:03:14.865 |             }
2025-05-30 01:03:14.865 |           ]
2025-05-30 01:03:14.865 |         }
2025-05-30 01:03:14.865 |       ]
2025-05-30 01:03:14.865 |     },
2025-05-30 01:03:14.865 |     "issuetype": {
2025-05-30 01:03:14.865 |       "id": "10626"
2025-05-30 01:03:14.865 |     },
2025-05-30 01:03:14.865 |     "reporter": {
2025-05-30 01:03:14.865 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:03:14.865 |     },
2025-05-30 01:03:14.865 |     "customfield_10962": "Outros",
2025-05-30 01:03:14.865 |     "customfield_10963": "Outros",
2025-05-30 01:03:14.865 |     "customfield_10966": "M√©dia",
2025-05-30 01:03:14.865 |     "customfield_10967": "N√£o"
2025-05-30 01:03:14.865 |   }
2025-05-30 01:03:14.865 | }
2025-05-30 01:03:14.865 | [Nest] 30  - 05/30/2025, 4:03:14 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:03:15.150 | [Nest] 30  - 05/30/2025, 4:03:15 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-285
2025-05-30 01:03:15.152 | [Nest] 30  - 05/30/2025, 4:03:15 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577774.034159 -> PS4-285
2025-05-30 01:03:15.152 | [Nest] 30  - 05/30/2025, 4:03:15 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-285
2025-05-30 01:03:15.152 | [Nest] 30  - 05/30/2025, 4:03:15 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:03:15.152 | [Nest] 30  - 05/30/2025, 4:03:15 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577774.034159
2025-05-30 01:03:15.653 | [Nest] 30  - 05/30/2025, 4:03:15 AM   DEBUG [GptSummarizationService] Summarizing problem text of 85 characters
2025-05-30 01:03:16.039 | [Nest] 30  - 05/30/2025, 4:03:16 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-286
2025-05-30 01:03:16.039 | [Nest] 30  - 05/30/2025, 4:03:16 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577780.821849 -> PS4-286
2025-05-30 01:03:16.039 | [Nest] 30  - 05/30/2025, 4:03:16 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-286
2025-05-30 01:03:16.039 | [Nest] 30  - 05/30/2025, 4:03:16 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:03:16.039 | [Nest] 30  - 05/30/2025, 4:03:16 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577780.821849
2025-05-30 01:03:16.600 | [Nest] 30  - 05/30/2025, 4:03:16 AM   DEBUG [GptSummarizationService] Summarizing problem text of 59 characters
2025-05-30 01:03:16.600 | [Nest] 30  - 05/30/2025, 4:03:16 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:03:17.038 | [Nest] 30  - 05/30/2025, 4:03:17 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para verificar a possibilidade de compra da cadeira com o saldo do Mercado Pago da empresa.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de compra de cadeira com saldo do Mercado Pago.","confidence":90}
2025-05-30 01:03:17.038 | [Nest] 30  - 05/30/2025, 4:03:17 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para verificar a possibilidade de compra da cadeira com o saldo do Mercado Pago da empresa.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de compra de cadeira com saldo do Mercado Pago.","confidence":90}
2025-05-30 01:03:17.341 | [Nest] 30  - 05/30/2025, 4:03:17 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Adicionar Facebook como aplicativo produtivo no Desktime"
2025-05-30 01:03:17.341 | [Nest] 30  - 05/30/2025, 4:03:17 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:03:17.610 | [Nest] 30  - 05/30/2025, 4:03:17 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577793.477369
2025-05-30 01:03:17.680 | [Nest] 30  - 05/30/2025, 4:03:17 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:03:18.306 | [Nest] 30  - 05/30/2025, 4:03:18 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Preparar m√°quina e enviar materiais para Bruno Pires."
2025-05-30 01:03:18.306 | [Nest] 30  - 05/30/2025, 4:03:18 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:03:18.657 | [Nest] 30  - 05/30/2025, 4:03:18 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577793.477369
2025-05-30 01:03:18.657 | [Nest] 30  - 05/30/2025, 4:03:18 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:03:19.624 | [Nest] 30  - 05/30/2025, 4:03:19 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Preciso de conta no LastPass para acessar ferramentas pagas como o Semrush
2025-05-30 01:03:19.624 | [Nest] 30  - 05/30/2025, 4:03:19 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:03:19.625 | [Nest] 30  - 05/30/2025, 4:03:19 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:03:19.625 | [Nest] 30  - 05/30/2025, 4:03:19 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:03:19.655 | [Nest] 30  - 05/30/2025, 4:03:19 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:03:19.655 | [Nest] 30  - 05/30/2025, 4:03:19 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:03:19.655 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:03:19.655 |   task: 'Natural language admin notification generation',
2025-05-30 01:03:19.655 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:03:19.655 |   costMultiplier: 1,
2025-05-30 01:03:19.655 |   estimatedCost: 0.0000177,
2025-05-30 01:03:19.655 |   potentialSavings: 0.0002773
2025-05-30 01:03:19.655 | }
2025-05-30 01:03:19.655 | [Nest] 30  - 05/30/2025, 4:03:19 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:03:20.172 | [Nest] 30  - 05/30/2025, 4:03:20 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Preciso de conta no LastPass para acessar ferramentas pagas como o Semrush
2025-05-30 01:03:20.173 | [Nest] 30  - 05/30/2025, 4:03:20 AM   DEBUG [OpenAIService] Generating support response for message: Preciso de conta no LastPass para acessar ferramentas pagas como o Semrush
2025-05-30 01:03:20.175 | [Nest] 30  - 05/30/2025, 4:03:20 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:20.279 | [Nest] 30  - 05/30/2025, 4:03:20 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:03:20.279 | [Nest] 30  - 05/30/2025, 4:03:20 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:03:20.279 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:03:20.279 |   task: 'Natural language admin notification generation',
2025-05-30 01:03:20.279 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:03:20.279 |   costMultiplier: 1,
2025-05-30 01:03:20.279 |   estimatedCost: 0.0000255,
2025-05-30 01:03:20.279 |   potentialSavings: 0.0003995
2025-05-30 01:03:20.279 | }
2025-05-30 01:03:20.279 | [Nest] 30  - 05/30/2025, 4:03:20 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:03:20.874 | [Nest] 30  - 05/30/2025, 4:03:20 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:03:20.875 | [Nest] 30  - 05/30/2025, 4:03:20 AM   DEBUG [JiraService] Getting ticket PS4-286
2025-05-30 01:03:21.169 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:03:21.169 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:03:21.169 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:03:21.170 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:03:21.170 |   customfield_10962: 'Outros',
2025-05-30 01:03:21.170 |   customfield_10963: 'Outros',
2025-05-30 01:03:21.170 |   customfield_10966: 'M√©dia',
2025-05-30 01:03:21.170 |   customfield_10967: 'N√£o'
2025-05-30 01:03:21.170 | }
2025-05-30 01:03:21.170 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:03:21.170 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [JiraService] {
2025-05-30 01:03:21.170 |   "fields": {
2025-05-30 01:03:21.170 |     "project": {
2025-05-30 01:03:21.170 |       "key": "PS4"
2025-05-30 01:03:21.170 |     },
2025-05-30 01:03:21.170 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:03:21.170 |     "description": {
2025-05-30 01:03:21.170 |       "type": "doc",
2025-05-30 01:03:21.170 |       "version": 1,
2025-05-30 01:03:21.170 |       "content": [
2025-05-30 01:03:21.170 |         {
2025-05-30 01:03:21.170 |           "type": "paragraph",
2025-05-30 01:03:21.170 |           "content": [
2025-05-30 01:03:21.170 |             {
2025-05-30 01:03:21.170 |               "type": "text",
2025-05-30 01:03:21.170 |               "text": "**Problema:** O usu√°rio solicitou a inclus√£o do Grafana como um sistema produtivo.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Incluir o Grafana como produtivo no sistema.\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:03:21.170 |             }
2025-05-30 01:03:21.170 |           ]
2025-05-30 01:03:21.170 |         }
2025-05-30 01:03:21.170 |       ]
2025-05-30 01:03:21.170 |     },
2025-05-30 01:03:21.170 |     "issuetype": {
2025-05-30 01:03:21.170 |       "id": "10626"
2025-05-30 01:03:21.170 |     },
2025-05-30 01:03:21.170 |     "reporter": {
2025-05-30 01:03:21.170 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:03:21.170 |     },
2025-05-30 01:03:21.170 |     "customfield_10962": "Outros",
2025-05-30 01:03:21.170 |     "customfield_10963": "Outros",
2025-05-30 01:03:21.170 |     "customfield_10966": "M√©dia",
2025-05-30 01:03:21.170 |     "customfield_10967": "N√£o"
2025-05-30 01:03:21.170 |   }
2025-05-30 01:03:21.170 | }
2025-05-30 01:03:21.170 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:03:21.389 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [TicketService] Using actual Jira priority for PS4-286: Could Have [P3] -> P3
2025-05-30 01:03:21.389 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-286, priority: P3
2025-05-30 01:03:21.391 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:21.389Z to 2025-05-30T04:03:21.389Z
2025-05-30 01:03:21.391 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:21.389Z to 2025-05-30T04:03:21.389Z
2025-05-30 01:03:21.391 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:03:21.898 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:03:21.898 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [JiraService] Getting ticket PS4-285
2025-05-30 01:03:21.976 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577802.185479 -> PS4-286
2025-05-30 01:03:21.977 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577802.185479","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577802.185479","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-286","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"cbU+u","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-286|*PS4-286*> - Adicionar Facebook como aplicativo produtivo no Desktime","verbatim":false}},{"type":"section","block_id":"hWYLY","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de adicionar o Facebook como aplicativo produtivo no Desktime. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"YmcyF","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"edFC5"},{"type":"actions","block_id":"ticket_actions_PS4-286","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-286\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577780.821849\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-286\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577780.821849\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-286\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577780.821849\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:03:21.977 | [Nest] 30  - 05/30/2025, 4:03:21 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-286
2025-05-30 01:03:21.977 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-286
2025-05-30 01:03:21.977 | [Nest] 30  - 05/30/2025, 4:03:21 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:22.026 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para liberar seu acesso ao LastPass.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de cria√ß√£o de conta no LastPass.","confidence":95}
2025-05-30 01:03:22.027 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para liberar seu acesso ao LastPass.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de cria√ß√£o de conta no LastPass.","confidence":95}
2025-05-30 01:03:22.220 | [Nest] 30  - 05/30/2025, 4:03:22 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-287
2025-05-30 01:03:22.220 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577787.501059 -> PS4-287
2025-05-30 01:03:22.220 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-287
2025-05-30 01:03:22.221 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:03:22.221 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577787.501059
2025-05-30 01:03:22.292 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [TicketService] Using actual Jira priority for PS4-285: Could Have [P3] -> P3
2025-05-30 01:03:22.292 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-285, priority: P3
2025-05-30 01:03:22.293 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:22.292Z to 2025-05-30T04:03:22.292Z
2025-05-30 01:03:22.293 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:22.292Z to 2025-05-30T04:03:22.292Z
2025-05-30 01:03:22.293 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:03:22.602 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577798.861059
2025-05-30 01:03:22.747 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [GptSummarizationService] Summarizing problem text of 44 characters
2025-05-30 01:03:22.747 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:03:22.876 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577803.068949 -> PS4-285
2025-05-30 01:03:22.877 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577803.068949","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577803.068949","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-285","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"1Brw4","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-285|*PS4-285*> - Preparar m√°quina e enviar materiais para Bruno Pires.","verbatim":false}},{"type":"section","block_id":"LD5Ru","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de preparar a m√°quina e enviar materiais pelos correios para o Bruno Pires (dev back-end). Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"NUb7e","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"NI44T"},{"type":"actions","block_id":"ticket_actions_PS4-285","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-285\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577774.034159\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-285\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577774.034159\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-285\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577774.034159\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:03:22.877 | [Nest] 30  - 05/30/2025, 4:03:22 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-285
2025-05-30 01:03:22.877 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-285
2025-05-30 01:03:22.877 | [Nest] 30  - 05/30/2025, 4:03:22 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:23.416 | [Nest] 30  - 05/30/2025, 4:03:23 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Incluir Grafana como ambiente produtivo no sistema."
2025-05-30 01:03:23.417 | [Nest] 30  - 05/30/2025, 4:03:23 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:03:23.579 | [Nest] 30  - 05/30/2025, 4:03:23 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-286 e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve. (neutral)
2025-05-30 01:03:23.579 | [Nest] 30  - 05/30/2025, 4:03:23 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-286 e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:23.579 | [Nest] 30  - 05/30/2025, 4:03:23 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-286|PS4-286> e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:23.579 | 
2025-05-30 01:03:23.579 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:03:23.708 | [Nest] 30  - 05/30/2025, 4:03:23 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577798.861059
2025-05-30 01:03:23.708 | [Nest] 30  - 05/30/2025, 4:03:23 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:03:24.447 | [Nest] 30  - 05/30/2025, 4:03:24 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-285 e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve. (neutral)
2025-05-30 01:03:24.448 | [Nest] 30  - 05/30/2025, 4:03:24 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-285 e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:24.448 | [Nest] 30  - 05/30/2025, 4:03:24 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-285|PS4-285> e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:24.448 | 
2025-05-30 01:03:24.448 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:03:26.526 | [Nest] 30  - 05/30/2025, 4:03:26 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:03:26.527 | [Nest] 30  - 05/30/2025, 4:03:26 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:03:26.527 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:03:26.527 |   task: 'Natural language admin notification generation',
2025-05-30 01:03:26.527 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:03:26.527 |   costMultiplier: 1,
2025-05-30 01:03:26.527 |   estimatedCost: 0.000013199999999999999,
2025-05-30 01:03:26.527 |   potentialSavings: 0.00020679999999999999
2025-05-30 01:03:26.527 | }
2025-05-30 01:03:26.527 | [Nest] 30  - 05/30/2025, 4:03:26 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:03:27.239 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-286
2025-05-30 01:03:27.239 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] Adding comment to ticket PS4-286 by suporteja_bot
2025-05-30 01:03:27.242 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:03:27.242 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:03:27.242 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:03:27.243 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:03:27.243 |   customfield_10962: 'Outros',
2025-05-30 01:03:27.243 |   customfield_10963: 'Outros',
2025-05-30 01:03:27.243 |   customfield_10966: 'M√©dia',
2025-05-30 01:03:27.243 |   customfield_10967: 'N√£o'
2025-05-30 01:03:27.243 | }
2025-05-30 01:03:27.243 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:03:27.243 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] {
2025-05-30 01:03:27.243 |   "fields": {
2025-05-30 01:03:27.243 |     "project": {
2025-05-30 01:03:27.243 |       "key": "PS4"
2025-05-30 01:03:27.243 |     },
2025-05-30 01:03:27.243 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:03:27.243 |     "description": {
2025-05-30 01:03:27.243 |       "type": "doc",
2025-05-30 01:03:27.243 |       "version": 1,
2025-05-30 01:03:27.243 |       "content": [
2025-05-30 01:03:27.243 |         {
2025-05-30 01:03:27.243 |           "type": "paragraph",
2025-05-30 01:03:27.243 |           "content": [
2025-05-30 01:03:27.243 |             {
2025-05-30 01:03:27.243 |               "type": "text",
2025-05-30 01:03:27.243 |               "text": "**Problema:** Usu√°rio deseja utilizar o saldo do Mercado Pago da empresa para adquirir uma cadeira.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Quero comprar uma cadeira com o saldo do Mercado Pago da empresa.\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:03:27.243 |             }
2025-05-30 01:03:27.243 |           ]
2025-05-30 01:03:27.243 |         }
2025-05-30 01:03:27.243 |       ]
2025-05-30 01:03:27.243 |     },
2025-05-30 01:03:27.243 |     "issuetype": {
2025-05-30 01:03:27.243 |       "id": "10626"
2025-05-30 01:03:27.243 |     },
2025-05-30 01:03:27.243 |     "reporter": {
2025-05-30 01:03:27.243 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:03:27.243 |     },
2025-05-30 01:03:27.243 |     "customfield_10962": "Outros",
2025-05-30 01:03:27.243 |     "customfield_10963": "Outros",
2025-05-30 01:03:27.243 |     "customfield_10966": "M√©dia",
2025-05-30 01:03:27.243 |     "customfield_10967": "N√£o"
2025-05-30 01:03:27.243 |   }
2025-05-30 01:03:27.243 | }
2025-05-30 01:03:27.243 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:03:27.827 | [Nest] 30  - 05/30/2025, 4:03:27 AM     LOG [JiraService] Added comment to Jira ticket PS4-286
2025-05-30 01:03:27.827 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:03:27.827 | [Nest] 30  - 05/30/2025, 4:03:27 AM   DEBUG [JiraService] Getting ticket PS4-287
2025-05-30 01:03:28.119 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-285
2025-05-30 01:03:28.119 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [JiraService] Adding comment to ticket PS4-285 by suporteja_bot
2025-05-30 01:03:28.186 | [Nest] 30  - 05/30/2025, 4:03:28 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-288
2025-05-30 01:03:28.186 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577793.477369 -> PS4-288
2025-05-30 01:03:28.186 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-288
2025-05-30 01:03:28.186 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:03:28.186 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577793.477369
2025-05-30 01:03:28.244 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [TicketService] Using actual Jira priority for PS4-287: Could Have [P3] -> P3
2025-05-30 01:03:28.244 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-287, priority: P3
2025-05-30 01:03:28.244 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:28.244Z to 2025-05-30T04:03:28.244Z
2025-05-30 01:03:28.244 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:28.244Z to 2025-05-30T04:03:28.244Z
2025-05-30 01:03:28.245 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:03:28.663 | [Nest] 30  - 05/30/2025, 4:03:28 AM     LOG [JiraService] Added comment to Jira ticket PS4-285
2025-05-30 01:03:28.730 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [GptSummarizationService] Summarizing problem text of 65 characters
2025-05-30 01:03:28.804 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577809.010669 -> PS4-287
2025-05-30 01:03:28.804 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577809.010669","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577809.010669","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-287","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"e8qU/","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-287|*PS4-287*> - Incluir Grafana como ambiente produtivo no sistema.","verbatim":false}},{"type":"section","block_id":"03KlU","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de incluir o Grafana como produtivo no sistema. At√© o momento, n√£o houve tentativas anteriores para resolver essa quest√£o. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"vp5WM","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"G8+y2"},{"type":"actions","block_id":"ticket_actions_PS4-287","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-287\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577787.501059\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-287\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577787.501059\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-287\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577787.501059\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:03:28.804 | [Nest] 30  - 05/30/2025, 4:03:28 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-287
2025-05-30 01:03:28.804 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-287
2025-05-30 01:03:28.804 | [Nest] 30  - 05/30/2025, 4:03:28 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:30.589 | [Nest] 30  - 05/30/2025, 4:03:30 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:03:30.590 | [Nest] 30  - 05/30/2025, 4:03:30 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-287 e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve. (neutral)
2025-05-30 01:03:30.590 | [Nest] 30  - 05/30/2025, 4:03:30 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-287 e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:30.590 | [Nest] 30  - 05/30/2025, 4:03:30 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-287|PS4-287> e a equipe j√° foi notificada. Eles v√£o analisar os dados e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:30.590 | 
2025-05-30 01:03:30.590 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:03:31.219 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Compra de cadeira utilizando saldo do Mercado Pago empresarial"
2025-05-30 01:03:31.220 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:03:31.558 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:03:31.559 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:03:31.561 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:03:31.561 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:03:31.561 |   customfield_10962: 'Outros',
2025-05-30 01:03:31.561 |   customfield_10963: 'Outros',
2025-05-30 01:03:31.561 |   customfield_10966: 'M√©dia',
2025-05-30 01:03:31.561 |   customfield_10967: 'N√£o'
2025-05-30 01:03:31.561 | }
2025-05-30 01:03:31.561 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:03:31.561 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [JiraService] {
2025-05-30 01:03:31.561 |   "fields": {
2025-05-30 01:03:31.561 |     "project": {
2025-05-30 01:03:31.561 |       "key": "PS4"
2025-05-30 01:03:31.561 |     },
2025-05-30 01:03:31.561 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:03:31.561 |     "description": {
2025-05-30 01:03:31.561 |       "type": "doc",
2025-05-30 01:03:31.561 |       "version": 1,
2025-05-30 01:03:31.561 |       "content": [
2025-05-30 01:03:31.561 |         {
2025-05-30 01:03:31.561 |           "type": "paragraph",
2025-05-30 01:03:31.561 |           "content": [
2025-05-30 01:03:31.561 |             {
2025-05-30 01:03:31.561 |               "type": "text",
2025-05-30 01:03:31.561 |               "text": "**Problema:** O usu√°rio necessita de uma conta no LastPass para acessar ferramentas pagas, como o Semrush.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Preciso de conta no LastPass para acessar ferramentas pagas como o Semrush\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:03:31.561 |             }
2025-05-30 01:03:31.561 |           ]
2025-05-30 01:03:31.561 |         }
2025-05-30 01:03:31.561 |       ]
2025-05-30 01:03:31.561 |     },
2025-05-30 01:03:31.561 |     "issuetype": {
2025-05-30 01:03:31.561 |       "id": "10626"
2025-05-30 01:03:31.561 |     },
2025-05-30 01:03:31.561 |     "reporter": {
2025-05-30 01:03:31.561 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:03:31.561 |     },
2025-05-30 01:03:31.561 |     "customfield_10962": "Outros",
2025-05-30 01:03:31.561 |     "customfield_10963": "Outros",
2025-05-30 01:03:31.561 |     "customfield_10966": "M√©dia",
2025-05-30 01:03:31.561 |     "customfield_10967": "N√£o"
2025-05-30 01:03:31.561 |   }
2025-05-30 01:03:31.561 | }
2025-05-30 01:03:31.561 | [Nest] 30  - 05/30/2025, 4:03:31 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:03:32.784 | [Nest] 30  - 05/30/2025, 4:03:32 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-289
2025-05-30 01:03:32.784 | [Nest] 30  - 05/30/2025, 4:03:32 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577798.861059 -> PS4-289
2025-05-30 01:03:32.784 | [Nest] 30  - 05/30/2025, 4:03:32 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-289
2025-05-30 01:03:32.784 | [Nest] 30  - 05/30/2025, 4:03:32 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:03:32.785 | [Nest] 30  - 05/30/2025, 4:03:32 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577798.861059
2025-05-30 01:03:33.607 | [Nest] 30  - 05/30/2025, 4:03:33 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:03:33.609 | [Nest] 30  - 05/30/2025, 4:03:33 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:03:33.609 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:03:33.609 |   task: 'Natural language admin notification generation',
2025-05-30 01:03:33.609 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:03:33.609 |   costMultiplier: 1,
2025-05-30 01:03:33.609 |   estimatedCost: 0.000019499999999999996,
2025-05-30 01:03:33.609 |   potentialSavings: 0.0003055
2025-05-30 01:03:33.609 | }
2025-05-30 01:03:33.609 | [Nest] 30  - 05/30/2025, 4:03:33 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:03:33.653 | [Nest] 30  - 05/30/2025, 4:03:33 AM   DEBUG [GptSummarizationService] Summarizing problem text of 74 characters
2025-05-30 01:03:34.547 | [Nest] 30  - 05/30/2025, 4:03:34 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-287
2025-05-30 01:03:34.547 | [Nest] 30  - 05/30/2025, 4:03:34 AM   DEBUG [JiraService] Adding comment to ticket PS4-287 by suporteja_bot
2025-05-30 01:03:35.287 | [Nest] 30  - 05/30/2025, 4:03:35 AM     LOG [JiraService] Added comment to Jira ticket PS4-287
2025-05-30 01:03:35.386 | [Nest] 30  - 05/30/2025, 4:03:35 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:03:35.387 | [Nest] 30  - 05/30/2025, 4:03:35 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:03:35.387 | [Nest] 30  - 05/30/2025, 4:03:35 AM   DEBUG [JiraService] Getting ticket PS4-288
2025-05-30 01:03:35.820 | [Nest] 30  - 05/30/2025, 4:03:35 AM   DEBUG [TicketService] Using actual Jira priority for PS4-288: Could Have [P3] -> P3
2025-05-30 01:03:35.820 | [Nest] 30  - 05/30/2025, 4:03:35 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-288, priority: P3
2025-05-30 01:03:35.820 | [Nest] 30  - 05/30/2025, 4:03:35 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:35.820Z to 2025-05-30T04:03:35.820Z
2025-05-30 01:03:35.821 | [Nest] 30  - 05/30/2025, 4:03:35 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:35.820Z to 2025-05-30T04:03:35.820Z
2025-05-30 01:03:35.821 | [Nest] 30  - 05/30/2025, 4:03:35 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:03:36.260 | [Nest] 30  - 05/30/2025, 4:03:36 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Solicita√ß√£o de conta LastPass para acesso ao Semrush"
2025-05-30 01:03:36.260 | [Nest] 30  - 05/30/2025, 4:03:36 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:03:36.834 | [Nest] 30  - 05/30/2025, 4:03:36 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577816.949739 -> PS4-288
2025-05-30 01:03:36.834 | [Nest] 30  - 05/30/2025, 4:03:36 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577816.949739","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577816.949739","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-288","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"Ml2GZ","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-288|*PS4-288*> - Compra de cadeira utilizando saldo do Mercado Pago empresarial","verbatim":false}},{"type":"section","block_id":"Q5/1z","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de compra de uma cadeira utilizando o saldo do Mercado Pago da empresa. N√£o houve tentativas anteriores de resolu√ß√£o. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"T+2mM","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"Yaa3l"},{"type":"actions","block_id":"ticket_actions_PS4-288","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-288\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577793.477369\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-288\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577793.477369\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-288\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577793.477369\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:03:36.834 | [Nest] 30  - 05/30/2025, 4:03:36 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-288
2025-05-30 01:03:36.834 | [Nest] 30  - 05/30/2025, 4:03:36 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-288
2025-05-30 01:03:36.834 | [Nest] 30  - 05/30/2025, 4:03:36 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:38.270 | [Nest] 30  - 05/30/2025, 4:03:38 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: nao funcionou
2025-05-30 01:03:38.270 | [Nest] 30  - 05/30/2025, 4:03:38 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:03:38.270 | [Nest] 30  - 05/30/2025, 4:03:38 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:03:38.270 | [Nest] 30  - 05/30/2025, 4:03:38 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:03:38.272 | [Nest] 30  - 05/30/2025, 4:03:38 AM   DEBUG [TicketReopenService] Checking if message should reopen ticket in thread 1748577668.953729
2025-05-30 01:03:38.272 | [Nest] 30  - 05/30/2025, 4:03:38 AM   DEBUG [TicketReopenService] No ticket mapping found for thread 1748577668.953729
2025-05-30 01:03:38.469 | [Nest] 30  - 05/30/2025, 4:03:38 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-288 e a equipe j√° foi notificada. Eles v√£o analisar e voc√™ receber√° uma atualiza√ß√£o em breve. (neutral)
2025-05-30 01:03:38.469 | [Nest] 30  - 05/30/2025, 4:03:38 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-288 e a equipe j√° foi notificada. Eles v√£o analisar e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:38.469 | [Nest] 30  - 05/30/2025, 4:03:38 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-288|PS4-288> e a equipe j√° foi notificada. Eles v√£o analisar e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:38.469 | 
2025-05-30 01:03:38.469 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:03:39.119 | [Nest] 30  - 05/30/2025, 4:03:39 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:03:39.119 | [Nest] 30  - 05/30/2025, 4:03:39 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:03:39.119 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:03:39.119 |   task: 'Natural language admin notification generation',
2025-05-30 01:03:39.119 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:03:39.119 |   costMultiplier: 1,
2025-05-30 01:03:39.119 |   estimatedCost: 0.000022199999999999998,
2025-05-30 01:03:39.119 |   potentialSavings: 0.0003478
2025-05-30 01:03:39.119 | }
2025-05-30 01:03:39.119 | [Nest] 30  - 05/30/2025, 4:03:39 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:03:39.505 | [Nest] 30  - 05/30/2025, 4:03:39 AM   DEBUG [ConversationAnalysisAgent] Analyzing continued conversation with 3 messages
2025-05-30 01:03:39.506 | [Nest] 30  - 05/30/2025, 4:03:39 AM   DEBUG [OpenAIService] Generating intelligent support response for conversation with 3 messages
2025-05-30 01:03:39.507 | [Nest] 30  - 05/30/2025, 4:03:39 AM   DEBUG [OpenAIService] Using model gpt-4o for structured response
2025-05-30 01:03:40.197 | [Nest] 30  - 05/30/2025, 4:03:40 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:03:40.198 | [Nest] 30  - 05/30/2025, 4:03:40 AM   DEBUG [JiraService] Getting ticket PS4-289
2025-05-30 01:03:40.625 | [Nest] 30  - 05/30/2025, 4:03:40 AM   DEBUG [TicketService] Using actual Jira priority for PS4-289: Could Have [P3] -> P3
2025-05-30 01:03:40.625 | [Nest] 30  - 05/30/2025, 4:03:40 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-289, priority: P3
2025-05-30 01:03:40.625 | [Nest] 30  - 05/30/2025, 4:03:40 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:40.625Z to 2025-05-30T04:03:40.625Z
2025-05-30 01:03:40.626 | [Nest] 30  - 05/30/2025, 4:03:40 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:03:40.625Z to 2025-05-30T04:03:40.625Z
2025-05-30 01:03:40.627 | [Nest] 30  - 05/30/2025, 4:03:40 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:03:41.233 | [Nest] 30  - 05/30/2025, 4:03:41 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577821.420389 -> PS4-289
2025-05-30 01:03:41.233 | [Nest] 30  - 05/30/2025, 4:03:41 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577821.420389","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577821.420389","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-289","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"i6V5Z","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-289|*PS4-289*> - Solicita√ß√£o de conta LastPass para acesso ao Semrush","verbatim":false}},{"type":"section","block_id":"7Wy3H","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de uma conta no LastPass para acessar ferramentas pagas como o Semrush. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"4VfDE","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"aqbow"},{"type":"actions","block_id":"ticket_actions_PS4-289","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-289\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577798.861059\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-289\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577798.861059\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-289\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577798.861059\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:03:41.233 | [Nest] 30  - 05/30/2025, 4:03:41 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-289
2025-05-30 01:03:41.233 | [Nest] 30  - 05/30/2025, 4:03:41 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-289
2025-05-30 01:03:41.233 | [Nest] 30  - 05/30/2025, 4:03:41 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:03:42.077 | [Nest] 30  - 05/30/2025, 4:03:42 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-288
2025-05-30 01:03:42.077 | [Nest] 30  - 05/30/2025, 4:03:42 AM   DEBUG [JiraService] Adding comment to ticket PS4-288 by suporteja_bot
2025-05-30 01:03:42.508 | [Nest] 30  - 05/30/2025, 4:03:42 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-289 e a equipe j√° foi notificada. Eles v√£o revisar tudo e voc√™ receber√° uma atualiza√ß√£o em breve. (neutral)
2025-05-30 01:03:42.508 | [Nest] 30  - 05/30/2025, 4:03:42 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-289 e a equipe j√° foi notificada. Eles v√£o revisar tudo e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:42.508 | [Nest] 30  - 05/30/2025, 4:03:42 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-289|PS4-289> e a equipe j√° foi notificada. Eles v√£o revisar tudo e voc√™ receber√° uma atualiza√ß√£o em breve.
2025-05-30 01:03:42.508 | 
2025-05-30 01:03:42.508 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:03:42.561 | [Nest] 30  - 05/30/2025, 4:03:42 AM     LOG [JiraService] Added comment to Jira ticket PS4-288
2025-05-30 01:03:46.075 | [Nest] 30  - 05/30/2025, 4:03:46 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-289
2025-05-30 01:03:46.075 | [Nest] 30  - 05/30/2025, 4:03:46 AM   DEBUG [JiraService] Adding comment to ticket PS4-289 by suporteja_bot
2025-05-30 01:03:46.663 | [Nest] 30  - 05/30/2025, 4:03:46 AM     LOG [JiraService] Added comment to Jira ticket PS4-289
2025-05-30 01:03:57.109 | [Nest] 30  - 05/30/2025, 4:03:57 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: nao funcionou
2025-05-30 01:03:57.109 | [Nest] 30  - 05/30/2025, 4:03:57 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:03:57.109 | [Nest] 30  - 05/30/2025, 4:03:57 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:03:57.110 | [Nest] 30  - 05/30/2025, 4:03:57 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:03:57.110 | [Nest] 30  - 05/30/2025, 4:03:57 AM   DEBUG [TicketReopenService] Checking if message should reopen ticket in thread 1748577687.946289
2025-05-30 01:03:57.110 | [Nest] 30  - 05/30/2025, 4:03:57 AM   DEBUG [TicketReopenService] No ticket mapping found for thread 1748577687.946289
2025-05-30 01:03:57.824 | [Nest] 30  - 05/30/2025, 4:03:57 AM   DEBUG [ConversationAnalysisAgent] Analyzing continued conversation with 3 messages
2025-05-30 01:03:57.824 | [Nest] 30  - 05/30/2025, 4:03:57 AM   DEBUG [OpenAIService] Generating intelligent support response for conversation with 3 messages
2025-05-30 01:03:57.824 | [Nest] 30  - 05/30/2025, 4:03:57 AM   DEBUG [OpenAIService] Using model gpt-4o for structured response
2025-05-30 01:03:59.705 | [Nest] 30  - 05/30/2025, 4:03:59 AM   DEBUG [OpenAIService] GPT Analysis Complete:
2025-05-30 01:03:59.705 | [Nest] 30  - 05/30/2025, 4:03:59 AM   DEBUG [OpenAIService] Object(6) {
2025-05-30 01:03:59.705 |   shouldCreateTicket: true,
2025-05-30 01:03:59.705 |   confidence: 90,
2025-05-30 01:03:59.705 |   userSentiment: 'frustrated',
2025-05-30 01:03:59.705 |   problemComplexity: 'moderate',
2025-05-30 01:03:59.705 |   conversationProgress: 'stalled',
2025-05-30 01:03:59.705 |   category: 'Software'
2025-05-30 01:03:59.705 | }
2025-05-30 01:03:59.706 | [Nest] 30  - 05/30/2025, 4:03:59 AM   DEBUG [ConversationAnalysisAgent] Continued conversation analysis complete: {"shouldCreateTicket":true,"confidence":90,"reasoning":"O usu√°rio j√° tentou reiniciar o aplicativo Pritunl, que √© uma solu√ß√£o b√°sica e inicial para problemas de inicializa√ß√£o. Como essa tentativa n√£o resolveu o problema e n√£o h√° outras solu√ß√µes b√°sicas que fa√ßam sentido sem repetir o que j√° foi feito, √© prudente escalar para um ticket. Al√©m disso, o usu√°rio expressou que a solu√ß√£o n√£o funcionou, indicando que o problema persiste.","userSentiment":"frustrated","problemComplexity":"moderate","solutionEffectiveness":"not_working","conversationProgress":"stalled","response":"Parece que j√° tentamos uma solu√ß√£o b√°sica sem sucesso. Vou escalar este problema para nossa equipe t√©cnica avan√ßada para que possamos investigar mais a fundo. Voc√™ receber√° um ticket de suporte em breve.","analysis":{"category":"Software","priority":"Should Have [P2]","affectedSystems":["Pritunl"],"summary":"O aplicativo Pritunl est√° iniciando com duas guias e n√£o est√° funcionando corretamente ap√≥s tentativa de reinicializa√ß√£o.","nextSteps":"Escalar para a equipe t√©cnica para investiga√ß√£o mais aprofundada.","previousAttempts":["Reiniciar o aplicativo Pritunl"]}}
2025-05-30 01:03:59.708 | [Nest] 30  - 05/30/2025, 4:03:59 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_created - ticket TEMP
2025-05-30 01:03:59.708 | [Nest] 30  - 05/30/2025, 4:03:59 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:04:01.805 | [Nest] 30  - 05/30/2025, 4:04:01 AM   DEBUG [NaturalLanguageService] Generated natural language: Entendi que o problema n√£o funcionou como esperado. Criei o ticket TEMP e nossa equipe j√° est√° analisando a situa√ß√£o para resolver isso o mais r√°pido poss√≠vel. Vou te manter atualizado sobre o progresso. (reassuring)
2025-05-30 01:04:02.742 | [Nest] 30  - 05/30/2025, 4:04:02 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577668.953729
2025-05-30 01:04:03.249 | [Nest] 30  - 05/30/2025, 4:04:03 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577668.953729
2025-05-30 01:04:03.250 | [Nest] 30  - 05/30/2025, 4:04:03 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:04:08.702 | [Nest] 30  - 05/30/2025, 4:04:08 AM   DEBUG [OpenAIService] GPT Analysis Complete:
2025-05-30 01:04:08.702 | [Nest] 30  - 05/30/2025, 4:04:08 AM   DEBUG [OpenAIService] Object(6) {
2025-05-30 01:04:08.716 |   shouldCreateTicket: true,
2025-05-30 01:04:08.716 |   confidence: 95,
2025-05-30 01:04:08.716 |   userSentiment: 'frustrated',
2025-05-30 01:04:08.716 |   problemComplexity: 'complex',
2025-05-30 01:04:08.716 |   conversationProgress: 'stalled',
2025-05-30 01:04:08.716 |   category: 'Hardware'
2025-05-30 01:04:08.716 | }
2025-05-30 01:04:08.716 | [Nest] 30  - 05/30/2025, 4:04:08 AM   DEBUG [ConversationAnalysisAgent] Continued conversation analysis complete: {"shouldCreateTicket":true,"confidence":95,"reasoning":"O usu√°rio j√° tentou uma solu√ß√£o b√°sica de troubleshooting para problemas de energia (desconectar o carregador, remover a bateria e pressionar o bot√£o de ligar por 15 segundos), que n√£o funcionou. Isso indica que o problema pode ser mais complexo do que solu√ß√µes b√°sicas podem resolver. Al√©m disso, o problema de energia √© cr√≠tico, pois o notebook n√£o liga, o que impede o usu√°rio de realizar qualquer atividade. N√£o h√° progresso na conversa, e a solu√ß√£o b√°sica falhou, justificando a escala√ß√£o para um ticket.","userSentiment":"frustrated","problemComplexity":"complex","solutionEffectiveness":"not_working","conversationProgress":"stalled","response":"Entendo que a solu√ß√£o sugerida n√£o funcionou. Vou criar um ticket para que nossa equipe t√©cnica possa investigar mais a fundo o problema de energia do seu notebook. Voc√™ receber√° atualiza√ß√µes em breve.","analysis":{"category":"Hardware","priority":"Must Have [P1]","affectedSystems":["Notebook"],"summary":"Notebook n√£o liga e n√£o parece estar recebendo energia, mesmo ap√≥s tentativa de reset de energia.","nextSteps":"Criar ticket para investiga√ß√£o detalhada do problema de energia do notebook.","previousAttempts":["Desconectar carregador, remover bateria, pressionar bot√£o de ligar por 15 segundos"]}}
2025-05-30 01:04:08.716 | [Nest] 30  - 05/30/2025, 4:04:08 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_created - ticket TEMP
2025-05-30 01:04:08.716 | [Nest] 30  - 05/30/2025, 4:04:08 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:04:10.317 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [NaturalLanguageService] Generated natural language: Entendi que o problema n√£o funcionou como esperado. J√° criei o ticket TEMP e nossa equipe vai investigar isso o mais r√°pido poss√≠vel. Vou te manter atualizado sobre o progresso. (reassuring)
2025-05-30 01:04:10.871 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577687.946289
2025-05-30 01:04:10.926 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [JiraService] Creating ticket with custom fields: O aplicativo Pritunl est√° iniciando com duas guias e n√£o est√° funcionando corretamente ap√≥s tentativa de reinicializa√ß√£o.
2025-05-30 01:04:10.926 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:04:10.926 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:04:10.926 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:04:10.926 |   customfield_10962: 'Software',
2025-05-30 01:04:10.926 |   customfield_10963: 'Pritunl',
2025-05-30 01:04:10.926 |   customfield_10966: 'Alta',
2025-05-30 01:04:10.926 |   customfield_10967: 'N√£o'
2025-05-30 01:04:10.926 | }
2025-05-30 01:04:10.926 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:04:10.926 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [JiraService] {
2025-05-30 01:04:10.926 |   "fields": {
2025-05-30 01:04:10.926 |     "project": {
2025-05-30 01:04:10.926 |       "key": "PS4"
2025-05-30 01:04:10.926 |     },
2025-05-30 01:04:10.926 |     "summary": "O aplicativo Pritunl est√° iniciando com duas guias e n√£o est√° funcionando corretamente ap√≥s tentativa de reinicializa√ß√£o.",
2025-05-30 01:04:10.926 |     "description": {
2025-05-30 01:04:10.926 |       "type": "doc",
2025-05-30 01:04:10.926 |       "version": 1,
2025-05-30 01:04:10.926 |       "content": [
2025-05-30 01:04:10.926 |         {
2025-05-30 01:04:10.926 |           "type": "paragraph",
2025-05-30 01:04:10.926 |           "content": [
2025-05-30 01:04:10.926 |             {
2025-05-30 01:04:10.926 |               "type": "text",
2025-05-30 01:04:10.926 |               "text": "**Problema:** O usu√°rio est√° enfrentando dificuldades para conectar-se ao Pritunl, relatando que o aplicativo est√° iniciando com duas guias e n√£o est√° funcionando corretamente.\n\n**Solicitante:** Jeff\n**Sistemas:** Pritunl\n\n*Mensagem original: \"nao funcionou\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:04:10.926 |             }
2025-05-30 01:04:10.926 |           ]
2025-05-30 01:04:10.926 |         }
2025-05-30 01:04:10.926 |       ]
2025-05-30 01:04:10.926 |     },
2025-05-30 01:04:10.926 |     "issuetype": {
2025-05-30 01:04:10.926 |       "id": "10626"
2025-05-30 01:04:10.926 |     },
2025-05-30 01:04:10.926 |     "reporter": {
2025-05-30 01:04:10.926 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:04:10.926 |     },
2025-05-30 01:04:10.926 |     "customfield_10962": "Software",
2025-05-30 01:04:10.926 |     "customfield_10963": "Pritunl",
2025-05-30 01:04:10.926 |     "customfield_10966": "Alta",
2025-05-30 01:04:10.926 |     "customfield_10967": "N√£o"
2025-05-30 01:04:10.926 |   }
2025-05-30 01:04:10.926 | }
2025-05-30 01:04:10.926 | [Nest] 30  - 05/30/2025, 4:04:10 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:04:11.360 | [Nest] 30  - 05/30/2025, 4:04:11 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577687.946289
2025-05-30 01:04:11.360 | [Nest] 30  - 05/30/2025, 4:04:11 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:04:15.095 | [Nest] 30  - 05/30/2025, 4:04:15 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-290
2025-05-30 01:04:15.096 | [Nest] 30  - 05/30/2025, 4:04:15 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577668.953729 -> PS4-290
2025-05-30 01:04:15.096 | [Nest] 30  - 05/30/2025, 4:04:15 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-290
2025-05-30 01:04:15.096 | [Nest] 30  - 05/30/2025, 4:04:15 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:04:15.096 | [Nest] 30  - 05/30/2025, 4:04:15 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577668.953729
2025-05-30 01:04:15.656 | [Nest] 30  - 05/30/2025, 4:04:15 AM   DEBUG [GptSummarizationService] Summarizing problem text of 13 characters
2025-05-30 01:04:15.657 | [Nest] 30  - 05/30/2025, 4:04:15 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:04:16.797 | [Nest] 30  - 05/30/2025, 4:04:16 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Pritunl n√£o inicia corretamente, abre duas guias simultaneamente"
2025-05-30 01:04:16.797 | [Nest] 30  - 05/30/2025, 4:04:16 AM   DEBUG [GptSummarizationService] Summarizing conversation with 4 messages
2025-05-30 01:04:18.836 | [Nest] 30  - 05/30/2025, 4:04:18 AM   DEBUG [JiraService] Creating ticket with custom fields: Notebook n√£o liga e n√£o parece estar recebendo energia, mesmo ap√≥s tentativa de reset de energia.
2025-05-30 01:04:18.836 | [Nest] 30  - 05/30/2025, 4:04:18 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:04:18.836 | [Nest] 30  - 05/30/2025, 4:04:18 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:04:18.836 | [Nest] 30  - 05/30/2025, 4:04:18 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:04:18.836 |   customfield_10962: 'Hardware',
2025-05-30 01:04:18.836 |   customfield_10963: 'Notebook',
2025-05-30 01:04:18.836 |   customfield_10966: 'M√©dia',
2025-05-30 01:04:18.836 |   customfield_10967: 'N√£o'
2025-05-30 01:04:18.836 | }
2025-05-30 01:04:18.837 | [Nest] 30  - 05/30/2025, 4:04:18 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:04:18.837 | [Nest] 30  - 05/30/2025, 4:04:18 AM   DEBUG [JiraService] {
2025-05-30 01:04:18.837 |   "fields": {
2025-05-30 01:04:18.837 |     "project": {
2025-05-30 01:04:18.837 |       "key": "PS4"
2025-05-30 01:04:18.837 |     },
2025-05-30 01:04:18.837 |     "summary": "Notebook n√£o liga e n√£o parece estar recebendo energia, mesmo ap√≥s tentativa de reset de energia.",
2025-05-30 01:04:18.837 |     "description": {
2025-05-30 01:04:18.837 |       "type": "doc",
2025-05-30 01:04:18.837 |       "version": 1,
2025-05-30 01:04:18.837 |       "content": [
2025-05-30 01:04:18.837 |         {
2025-05-30 01:04:18.837 |           "type": "paragraph",
2025-05-30 01:04:18.837 |           "content": [
2025-05-30 01:04:18.837 |             {
2025-05-30 01:04:18.837 |               "type": "text",
2025-05-30 01:04:18.837 |               "text": "**Problema:** O notebook do usu√°rio n√£o liga e n√£o parece estar recebendo energia.\n\n**Solicitante:** Jeff\n**Sistemas:** Notebook\n\n*Mensagem original: \"nao funcionou\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:04:18.837 |             }
2025-05-30 01:04:18.837 |           ]
2025-05-30 01:04:18.837 |         }
2025-05-30 01:04:18.837 |       ]
2025-05-30 01:04:18.837 |     },
2025-05-30 01:04:18.837 |     "issuetype": {
2025-05-30 01:04:18.837 |       "id": "10626"
2025-05-30 01:04:18.837 |     },
2025-05-30 01:04:18.837 |     "reporter": {
2025-05-30 01:04:18.837 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:04:18.837 |     },
2025-05-30 01:04:18.837 |     "customfield_10962": "Hardware",
2025-05-30 01:04:18.837 |     "customfield_10963": "Notebook",
2025-05-30 01:04:18.837 |     "customfield_10966": "M√©dia",
2025-05-30 01:04:18.837 |     "customfield_10967": "N√£o"
2025-05-30 01:04:18.837 |   }
2025-05-30 01:04:18.837 | }
2025-05-30 01:04:18.837 | [Nest] 30  - 05/30/2025, 4:04:18 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:04:19.295 | [Nest] 30  - 05/30/2025, 4:04:19 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:04:19.295 | [Nest] 30  - 05/30/2025, 4:04:19 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:04:19.295 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:04:19.295 |   task: 'Natural language admin notification generation',
2025-05-30 01:04:19.295 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:04:19.296 |   costMultiplier: 1,
2025-05-30 01:04:19.296 |   estimatedCost: 0.0000039,
2025-05-30 01:04:19.296 |   potentialSavings: 0.0000611
2025-05-30 01:04:19.296 | }
2025-05-30 01:04:19.296 | [Nest] 30  - 05/30/2025, 4:04:19 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:04:19.843 | [Nest] 30  - 05/30/2025, 4:04:19 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-291
2025-05-30 01:04:19.843 | [Nest] 30  - 05/30/2025, 4:04:19 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577687.946289 -> PS4-291
2025-05-30 01:04:19.843 | [Nest] 30  - 05/30/2025, 4:04:19 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-291
2025-05-30 01:04:19.843 | [Nest] 30  - 05/30/2025, 4:04:19 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:04:19.844 | [Nest] 30  - 05/30/2025, 4:04:19 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577687.946289
2025-05-30 01:04:20.248 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:04:20.248 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [JiraService] Getting ticket PS4-290
2025-05-30 01:04:20.368 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [GptSummarizationService] Summarizing problem text of 13 characters
2025-05-30 01:04:20.378 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:04:20.662 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [TicketService] Using actual Jira priority for PS4-290: Could Have [P3] -> P3
2025-05-30 01:04:20.662 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-290, priority: P3
2025-05-30 01:04:20.662 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:04:20.662Z to 2025-05-30T04:04:20.662Z
2025-05-30 01:04:20.662 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:04:20.662Z to 2025-05-30T04:04:20.662Z
2025-05-30 01:04:20.664 | [Nest] 30  - 05/30/2025, 4:04:20 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:04:21.214 | [Nest] 30  - 05/30/2025, 4:04:21 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577861.418689 -> PS4-290
2025-05-30 01:04:21.214 | [Nest] 30  - 05/30/2025, 4:04:21 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577861.418689","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577861.418689","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-290","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"q0O/M","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-290|*PS4-290*> - Pritunl n√£o inicia corretamente, abre duas guias simultaneamente","verbatim":false}},{"type":"section","block_id":"JNut5","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com problemas para conectar ao Pritunl, que est√° iniciando com duas guias. Ele j√° tentou reiniciar o aplicativo, mas isso n√£o resolveu. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"RYn+p","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"LLH+9"},{"type":"actions","block_id":"ticket_actions_PS4-290","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-290\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577668.953729\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-290\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577668.953729\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-290\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577668.953729\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:04:21.214 | [Nest] 30  - 05/30/2025, 4:04:21 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-290
2025-05-30 01:04:21.214 | [Nest] 30  - 05/30/2025, 4:04:21 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-290
2025-05-30 01:04:21.215 | [Nest] 30  - 05/30/2025, 4:04:21 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:04:21.484 | [Nest] 30  - 05/30/2025, 4:04:21 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Notebook n√£o liga e n√£o recebe energia el√©trica."
2025-05-30 01:04:21.484 | [Nest] 30  - 05/30/2025, 4:04:21 AM   DEBUG [GptSummarizationService] Summarizing conversation with 4 messages
2025-05-30 01:04:22.520 | [Nest] 30  - 05/30/2025, 4:04:22 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-290 e a equipe j√° foi notificada. Vamos analisar os dados e em breve entraremos em contato com uma atualiza√ß√£o. (reassuring)
2025-05-30 01:04:22.520 | [Nest] 30  - 05/30/2025, 4:04:22 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-290 e a equipe j√° foi notificada. Vamos analisar os dados e em breve entraremos em contato com uma atualiza√ß√£o.
2025-05-30 01:04:22.520 | [Nest] 30  - 05/30/2025, 4:04:22 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-290|PS4-290> e a equipe j√° foi notificada. Vamos analisar os dados e em breve entraremos em contato com uma atualiza√ß√£o.
2025-05-30 01:04:22.520 | 
2025-05-30 01:04:22.520 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:04:23.217 | [Nest] 30  - 05/30/2025, 4:04:23 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-290
2025-05-30 01:04:23.217 | [Nest] 30  - 05/30/2025, 4:04:23 AM   DEBUG [JiraService] Adding comment to ticket PS4-290 by suporteja_bot
2025-05-30 01:04:23.510 | [Nest] 30  - 05/30/2025, 4:04:23 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:04:23.510 | [Nest] 30  - 05/30/2025, 4:04:23 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:04:23.510 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:04:23.510 |   task: 'Natural language admin notification generation',
2025-05-30 01:04:23.510 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:04:23.510 |   costMultiplier: 1,
2025-05-30 01:04:23.510 |   estimatedCost: 0.0000039,
2025-05-30 01:04:23.510 |   potentialSavings: 0.0000611
2025-05-30 01:04:23.510 | }
2025-05-30 01:04:23.510 | [Nest] 30  - 05/30/2025, 4:04:23 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:04:23.700 | [Nest] 30  - 05/30/2025, 4:04:23 AM     LOG [JiraService] Added comment to Jira ticket PS4-290
2025-05-30 01:04:24.942 | [Nest] 30  - 05/30/2025, 4:04:24 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:04:24.943 | [Nest] 30  - 05/30/2025, 4:04:24 AM   DEBUG [JiraService] Getting ticket PS4-291
2025-05-30 01:04:25.327 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [TicketService] Using actual Jira priority for PS4-291: Could Have [P3] -> P3
2025-05-30 01:04:25.327 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-291, priority: P3
2025-05-30 01:04:25.328 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:04:25.327Z to 2025-05-30T04:04:25.327Z
2025-05-30 01:04:25.328 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:04:25.327Z to 2025-05-30T04:04:25.327Z
2025-05-30 01:04:25.332 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:04:25.910 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577866.100889 -> PS4-291
2025-05-30 01:04:25.910 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577866.100889","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577866.100889","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-291","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"DNYTA","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-291|*PS4-291*> - Notebook n√£o liga e n√£o recebe energia el√©trica.","verbatim":false}},{"type":"section","block_id":"VUkz4","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com problemas para ligar o notebook. Ele tentou as orienta√ß√µes de desconectar o carregador, remover a bateria e pressionar o bot√£o de ligar, mas n√£o obteve sucesso. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"TQMeg","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"ef2+2"},{"type":"actions","block_id":"ticket_actions_PS4-291","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-291\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577687.946289\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-291\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577687.946289\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-291\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577687.946289\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:04:25.910 | [Nest] 30  - 05/30/2025, 4:04:25 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-291
2025-05-30 01:04:25.910 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-291
2025-05-30 01:04:25.910 | [Nest] 30  - 05/30/2025, 4:04:25 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:04:27.517 | [Nest] 30  - 05/30/2025, 4:04:27 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-291 e a equipe j√° foi notificada. Eles v√£o analisar tudo e te dar um retorno o mais r√°pido poss√≠vel. (reassuring)
2025-05-30 01:04:27.517 | [Nest] 30  - 05/30/2025, 4:04:27 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-291 e a equipe j√° foi notificada. Eles v√£o analisar tudo e te dar um retorno o mais r√°pido poss√≠vel.
2025-05-30 01:04:27.517 | [Nest] 30  - 05/30/2025, 4:04:27 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-291|PS4-291> e a equipe j√° foi notificada. Eles v√£o analisar tudo e te dar um retorno o mais r√°pido poss√≠vel.
2025-05-30 01:04:27.517 | 
2025-05-30 01:04:27.517 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:04:28.122 | [Nest] 30  - 05/30/2025, 4:04:28 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-291
2025-05-30 01:04:28.122 | [Nest] 30  - 05/30/2025, 4:04:28 AM   DEBUG [JiraService] Adding comment to ticket PS4-291 by suporteja_bot
2025-05-30 01:04:28.541 | [Nest] 30  - 05/30/2025, 4:04:28 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: nao funcionou, nao tenho
2025-05-30 01:04:28.541 | [Nest] 30  - 05/30/2025, 4:04:28 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:04:28.541 | [Nest] 30  - 05/30/2025, 4:04:28 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:04:28.541 | [Nest] 30  - 05/30/2025, 4:04:28 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:04:28.541 | [Nest] 30  - 05/30/2025, 4:04:28 AM   DEBUG [TicketReopenService] Checking if message should reopen ticket in thread 1748577762.846399
2025-05-30 01:04:28.543 | [Nest] 30  - 05/30/2025, 4:04:28 AM   DEBUG [TicketReopenService] No ticket mapping found for thread 1748577762.846399
2025-05-30 01:04:28.685 | [Nest] 30  - 05/30/2025, 4:04:28 AM     LOG [JiraService] Added comment to Jira ticket PS4-291
2025-05-30 01:04:29.118 | [Nest] 30  - 05/30/2025, 4:04:29 AM   DEBUG [ConversationAnalysisAgent] Analyzing continued conversation with 3 messages
2025-05-30 01:04:29.119 | [Nest] 30  - 05/30/2025, 4:04:29 AM   DEBUG [OpenAIService] Generating intelligent support response for conversation with 3 messages
2025-05-30 01:04:29.119 | [Nest] 30  - 05/30/2025, 4:04:29 AM   DEBUG [OpenAIService] Using model gpt-4o for structured response
2025-05-30 01:04:35.655 | [Nest] 30  - 05/30/2025, 4:04:35 AM   DEBUG [OpenAIService] GPT Analysis Complete:
2025-05-30 01:04:35.655 | [Nest] 30  - 05/30/2025, 4:04:35 AM   DEBUG [OpenAIService] Object(6) {
2025-05-30 01:04:35.655 |   shouldCreateTicket: true,
2025-05-30 01:04:35.655 |   confidence: 95,
2025-05-30 01:04:35.655 |   userSentiment: 'frustrated',
2025-05-30 01:04:35.655 |   problemComplexity: 'requires_admin',
2025-05-30 01:04:35.655 |   conversationProgress: 'stalled',
2025-05-30 01:04:35.655 |   category: 'Software'
2025-05-30 01:04:35.655 | }
2025-05-30 01:04:35.655 | [Nest] 30  - 05/30/2025, 4:04:35 AM   DEBUG [ConversationAnalysisAgent] Continued conversation analysis complete: {"shouldCreateTicket":true,"confidence":95,"reasoning":"O usu√°rio j√° tentou inserir a chave de produto e verificar a conta Microsoft, mas n√£o tem a chave. Isso indica que as solu√ß√µes b√°sicas falharam e o problema pode requerer acesso administrativo ou suporte adicional para resolver quest√µes de licen√ßa. O usu√°rio expressou urg√™ncia, o que aumenta a prioridade para uma solu√ß√£o r√°pida.","userSentiment":"frustrated","problemComplexity":"requires_admin","solutionEffectiveness":"not_working","conversationProgress":"stalled","response":"Entendo a urg√™ncia da situa√ß√£o. Como as solu√ß√µes b√°sicas n√£o resolveram o problema e voc√™ n√£o possui a chave de produto, vou criar um ticket para que nossa equipe de suporte possa ajudar com a ativa√ß√£o do Excel.","analysis":{"category":"Software","priority":"Must Have [P1]","affectedSystems":["Microsoft Excel"],"summary":"O Excel est√° pedindo ativa√ß√£o e o usu√°rio n√£o possui a chave de produto.","nextSteps":"Criar um ticket para que a equipe de suporte possa verificar a licen√ßa e ativa√ß√£o do Excel.","previousAttempts":["Inserir chave de produto","Verificar conta Microsoft"]}}
2025-05-30 01:04:35.655 | [Nest] 30  - 05/30/2025, 4:04:35 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_created - ticket TEMP
2025-05-30 01:04:35.655 | [Nest] 30  - 05/30/2025, 4:04:35 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:04:37.269 | [Nest] 30  - 05/30/2025, 4:04:37 AM   DEBUG [NaturalLanguageService] Generated natural language: Entendi que voc√™ est√° enfrentando problemas e j√° criei o ticket TEMP para voc√™. Nossa equipe vai analisar isso e te atualizar em breve sobre a solu√ß√£o. (reassuring)
2025-05-30 01:04:37.864 | [Nest] 30  - 05/30/2025, 4:04:37 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577762.846399
2025-05-30 01:04:38.491 | [Nest] 30  - 05/30/2025, 4:04:38 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577762.846399
2025-05-30 01:04:38.492 | [Nest] 30  - 05/30/2025, 4:04:38 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:04:45.520 | [Nest] 30  - 05/30/2025, 4:04:45 AM   DEBUG [JiraService] Creating ticket with custom fields: O Excel est√° pedindo ativa√ß√£o e o usu√°rio n√£o possui a chave de produto.
2025-05-30 01:04:45.520 | [Nest] 30  - 05/30/2025, 4:04:45 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:04:45.520 | [Nest] 30  - 05/30/2025, 4:04:45 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:04:45.521 | [Nest] 30  - 05/30/2025, 4:04:45 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:04:45.521 |   customfield_10962: 'Software',
2025-05-30 01:04:45.521 |   customfield_10963: 'Microsoft Excel',
2025-05-30 01:04:45.521 |   customfield_10966: 'M√©dia',
2025-05-30 01:04:45.521 |   customfield_10967: 'N√£o'
2025-05-30 01:04:45.521 | }
2025-05-30 01:04:45.521 | [Nest] 30  - 05/30/2025, 4:04:45 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:04:45.521 | [Nest] 30  - 05/30/2025, 4:04:45 AM   DEBUG [JiraService] {
2025-05-30 01:04:45.521 |   "fields": {
2025-05-30 01:04:45.521 |     "project": {
2025-05-30 01:04:45.521 |       "key": "PS4"
2025-05-30 01:04:45.521 |     },
2025-05-30 01:04:45.521 |     "summary": "O Excel est√° pedindo ativa√ß√£o e o usu√°rio n√£o possui a chave de produto.",
2025-05-30 01:04:45.521 |     "description": {
2025-05-30 01:04:45.521 |       "type": "doc",
2025-05-30 01:04:45.521 |       "version": 1,
2025-05-30 01:04:45.521 |       "content": [
2025-05-30 01:04:45.521 |         {
2025-05-30 01:04:45.521 |           "type": "paragraph",
2025-05-30 01:04:45.521 |           "content": [
2025-05-30 01:04:45.522 |             {
2025-05-30 01:04:45.522 |               "type": "text",
2025-05-30 01:04:45.522 |               "text": "**Problema:** Usu√°rio enfrenta problemas de ativa√ß√£o do Excel ap√≥s retorno de f√©rias.\n\n**Solicitante:** Jeff\n**Sistemas:** Microsoft Excel\n\n*Mensagem original: \"nao funcionou, nao tenho\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:04:45.522 |             }
2025-05-30 01:04:45.522 |           ]
2025-05-30 01:04:45.522 |         }
2025-05-30 01:04:45.522 |       ]
2025-05-30 01:04:45.522 |     },
2025-05-30 01:04:45.522 |     "issuetype": {
2025-05-30 01:04:45.522 |       "id": "10626"
2025-05-30 01:04:45.522 |     },
2025-05-30 01:04:45.522 |     "reporter": {
2025-05-30 01:04:45.522 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:04:45.522 |     },
2025-05-30 01:04:45.522 |     "customfield_10962": "Software",
2025-05-30 01:04:45.522 |     "customfield_10963": "Microsoft Excel",
2025-05-30 01:04:45.522 |     "customfield_10966": "M√©dia",
2025-05-30 01:04:45.522 |     "customfield_10967": "N√£o"
2025-05-30 01:04:45.522 |   }
2025-05-30 01:04:45.522 | }
2025-05-30 01:04:45.522 | [Nest] 30  - 05/30/2025, 4:04:45 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:04:46.491 | [Nest] 30  - 05/30/2025, 4:04:46 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-292
2025-05-30 01:04:46.491 | [Nest] 30  - 05/30/2025, 4:04:46 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577762.846399 -> PS4-292
2025-05-30 01:04:46.491 | [Nest] 30  - 05/30/2025, 4:04:46 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-292
2025-05-30 01:04:46.491 | [Nest] 30  - 05/30/2025, 4:04:46 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:04:46.491 | [Nest] 30  - 05/30/2025, 4:04:46 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577762.846399
2025-05-30 01:04:50.186 | [Nest] 30  - 05/30/2025, 4:04:50 AM   DEBUG [GptSummarizationService] Summarizing problem text of 24 characters
2025-05-30 01:04:50.187 | [Nest] 30  - 05/30/2025, 4:04:50 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:04:51.546 | [Nest] 30  - 05/30/2025, 4:04:51 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: h√° algum erro no extrato
2025-05-30 01:04:51.546 | [Nest] 30  - 05/30/2025, 4:04:51 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:04:51.547 | [Nest] 30  - 05/30/2025, 4:04:51 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:04:51.547 | [Nest] 30  - 05/30/2025, 4:04:51 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:04:51.547 | [Nest] 30  - 05/30/2025, 4:04:51 AM   DEBUG [TicketReopenService] Checking if message should reopen ticket in thread 1748577768.844379
2025-05-30 01:04:51.548 | [Nest] 30  - 05/30/2025, 4:04:51 AM   DEBUG [TicketReopenService] No ticket mapping found for thread 1748577768.844379
2025-05-30 01:04:52.111 | [Nest] 30  - 05/30/2025, 4:04:52 AM   DEBUG [ConversationAnalysisAgent] Analyzing continued conversation with 3 messages
2025-05-30 01:04:52.111 | [Nest] 30  - 05/30/2025, 4:04:52 AM   DEBUG [OpenAIService] Generating intelligent support response for conversation with 3 messages
2025-05-30 01:04:52.112 | [Nest] 30  - 05/30/2025, 4:04:52 AM   DEBUG [OpenAIService] Using model gpt-4o for structured response
2025-05-30 01:04:54.745 | [Nest] 30  - 05/30/2025, 4:04:54 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Excel solicita ativa√ß√£o, chave de produto indispon√≠vel."
2025-05-30 01:04:54.745 | [Nest] 30  - 05/30/2025, 4:04:54 AM   DEBUG [GptSummarizationService] Summarizing conversation with 4 messages
2025-05-30 01:04:56.700 | [Nest] 30  - 05/30/2025, 4:04:56 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:04:56.701 | [Nest] 30  - 05/30/2025, 4:04:56 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:04:56.701 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:04:56.701 |   task: 'Natural language admin notification generation',
2025-05-30 01:04:56.701 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:04:56.701 |   costMultiplier: 1,
2025-05-30 01:04:56.701 |   estimatedCost: 0.0000072,
2025-05-30 01:04:56.701 |   potentialSavings: 0.0001128
2025-05-30 01:04:56.701 | }
2025-05-30 01:04:56.701 | [Nest] 30  - 05/30/2025, 4:04:56 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:04:58.331 | [Nest] 30  - 05/30/2025, 4:04:58 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:04:58.331 | [Nest] 30  - 05/30/2025, 4:04:58 AM   DEBUG [JiraService] Getting ticket PS4-292
2025-05-30 01:04:58.807 | [Nest] 30  - 05/30/2025, 4:04:58 AM   DEBUG [TicketService] Using actual Jira priority for PS4-292: Could Have [P3] -> P3
2025-05-30 01:04:58.807 | [Nest] 30  - 05/30/2025, 4:04:58 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-292, priority: P3
2025-05-30 01:04:58.807 | [Nest] 30  - 05/30/2025, 4:04:58 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:04:58.807Z to 2025-05-30T04:04:58.807Z
2025-05-30 01:04:58.807 | [Nest] 30  - 05/30/2025, 4:04:58 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:04:58.807Z to 2025-05-30T04:04:58.807Z
2025-05-30 01:04:58.808 | [Nest] 30  - 05/30/2025, 4:04:58 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:04:59.402 | [Nest] 30  - 05/30/2025, 4:04:59 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577899.605709 -> PS4-292
2025-05-30 01:04:59.402 | [Nest] 30  - 05/30/2025, 4:04:59 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577899.605709","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577899.605709","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-292","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"2Bzd/","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-292|*PS4-292*> - Excel solicita ativa√ß√£o, chave de produto indispon√≠vel.","verbatim":false}},{"type":"section","block_id":"ugGnv","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com problemas para ativar o Excel. Ele informou que n√£o conseguiu resolver e n√£o possui a chave de produto. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"/8/E/","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"taB1Q"},{"type":"actions","block_id":"ticket_actions_PS4-292","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-292\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577762.846399\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-292\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577762.846399\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-292\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577762.846399\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:04:59.402 | [Nest] 30  - 05/30/2025, 4:04:59 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-292
2025-05-30 01:04:59.402 | [Nest] 30  - 05/30/2025, 4:04:59 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-292
2025-05-30 01:04:59.402 | [Nest] 30  - 05/30/2025, 4:04:59 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:05:00.923 | [Nest] 30  - 05/30/2025, 4:05:00 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-292 e a equipe j√° foi notificada. Eles v√£o analisar tudo e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos. (reassuring)
2025-05-30 01:05:00.924 | [Nest] 30  - 05/30/2025, 4:05:00 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-292 e a equipe j√° foi notificada. Eles v√£o analisar tudo e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos.
2025-05-30 01:05:00.924 | [Nest] 30  - 05/30/2025, 4:05:00 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-292|PS4-292> e a equipe j√° foi notificada. Eles v√£o analisar tudo e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos.
2025-05-30 01:05:00.924 | 
2025-05-30 01:05:00.924 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:05:01.606 | [Nest] 30  - 05/30/2025, 4:05:01 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-292
2025-05-30 01:05:01.606 | [Nest] 30  - 05/30/2025, 4:05:01 AM   DEBUG [JiraService] Adding comment to ticket PS4-292 by suporteja_bot
2025-05-30 01:05:02.097 | [Nest] 30  - 05/30/2025, 4:05:02 AM     LOG [JiraService] Added comment to Jira ticket PS4-292
2025-05-30 01:05:07.912 | [Nest] 30  - 05/30/2025, 4:05:07 AM   DEBUG [OpenAIService] GPT Analysis Complete:
2025-05-30 01:05:07.912 | [Nest] 30  - 05/30/2025, 4:05:07 AM   DEBUG [OpenAIService] Object(6) {
2025-05-30 01:05:07.912 |   shouldCreateTicket: true,
2025-05-30 01:05:07.912 |   confidence: 95,
2025-05-30 01:05:07.912 |   userSentiment: 'neutral',
2025-05-30 01:05:07.913 |   problemComplexity: 'complex',
2025-05-30 01:05:07.913 |   conversationProgress: 'stalled',
2025-05-30 01:05:07.913 |   category: 'Outros'
2025-05-30 01:05:07.913 | }
2025-05-30 01:05:07.913 | [Nest] 30  - 05/30/2025, 4:05:07 AM   DEBUG [ConversationAnalysisAgent] Continued conversation analysis complete: {"shouldCreateTicket":true,"confidence":95,"reasoning":"O usu√°rio identificou um erro no extrato relacionado a compras no Mercado Livre. Este tipo de problema geralmente envolve quest√µes financeiras e de seguran√ßa, que n√£o podem ser resolvidas por troubleshooting b√°sico. Al√©m disso, o usu√°rio j√° confirmou que h√° um erro, indicando que as solu√ß√µes b√°sicas de verifica√ß√£o n√£o s√£o suficientes. Portanto, √© necess√°rio escalar para um ticket para investiga√ß√£o mais aprofundada.","userSentiment":"neutral","problemComplexity":"complex","solutionEffectiveness":"unknown","conversationProgress":"stalled","response":"Entendo que voc√™ identificou um erro no seu extrato relacionado a compras no Mercado Livre. Para garantir sua seguran√ßa e resolver este problema, vou criar um ticket para que nossa equipe especializada possa investigar mais a fundo.","analysis":{"category":"Outros","priority":"Must Have [P1]","affectedSystems":["Sistema Financeiro","Extrato Banc√°rio"],"summary":"Erro no extrato banc√°rio relacionado a compras no Mercado Livre.","nextSteps":"Criar um ticket para investiga√ß√£o detalhada do erro no extrato.","previousAttempts":["Verifica√ß√£o de compras no extrato"]}}
2025-05-30 01:05:07.913 | [Nest] 30  - 05/30/2025, 4:05:07 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_created - ticket TEMP
2025-05-30 01:05:07.913 | [Nest] 30  - 05/30/2025, 4:05:07 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:05:09.741 | [Nest] 30  - 05/30/2025, 4:05:09 AM   DEBUG [NaturalLanguageService] Generated natural language: Entendi que voc√™ est√° enfrentando um erro no extrato. Criei o ticket TEMP e nossa equipe j√° est√° analisando o problema. Assim que tivermos uma atualiza√ß√£o, entraremos em contato. (neutral)
2025-05-30 01:05:10.383 | [Nest] 30  - 05/30/2025, 4:05:10 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748577768.844379
2025-05-30 01:05:10.933 | [Nest] 30  - 05/30/2025, 4:05:10 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748577768.844379
2025-05-30 01:05:10.933 | [Nest] 30  - 05/30/2025, 4:05:10 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:05:22.530 | [Nest] 30  - 05/30/2025, 4:05:22 AM   DEBUG [JiraService] Creating ticket with custom fields: Erro no extrato banc√°rio relacionado a compras no Mercado Livre.
2025-05-30 01:05:22.531 | [Nest] 30  - 05/30/2025, 4:05:22 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:05:22.531 | [Nest] 30  - 05/30/2025, 4:05:22 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:05:22.531 | [Nest] 30  - 05/30/2025, 4:05:22 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:05:22.531 |   customfield_10962: 'Outros',
2025-05-30 01:05:22.531 |   customfield_10963: 'Sistema Financeiro',
2025-05-30 01:05:22.531 |   customfield_10966: 'M√©dia',
2025-05-30 01:05:22.531 |   customfield_10967: 'N√£o'
2025-05-30 01:05:22.531 | }
2025-05-30 01:05:22.531 | [Nest] 30  - 05/30/2025, 4:05:22 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:05:22.531 | [Nest] 30  - 05/30/2025, 4:05:22 AM   DEBUG [JiraService] {
2025-05-30 01:05:22.531 |   "fields": {
2025-05-30 01:05:22.531 |     "project": {
2025-05-30 01:05:22.531 |       "key": "PS4"
2025-05-30 01:05:22.531 |     },
2025-05-30 01:05:22.531 |     "summary": "Erro no extrato banc√°rio relacionado a compras no Mercado Livre.",
2025-05-30 01:05:22.531 |     "description": {
2025-05-30 01:05:22.531 |       "type": "doc",
2025-05-30 01:05:22.531 |       "version": 1,
2025-05-30 01:05:22.531 |       "content": [
2025-05-30 01:05:22.531 |         {
2025-05-30 01:05:22.531 |           "type": "paragraph",
2025-05-30 01:05:22.531 |           "content": [
2025-05-30 01:05:22.531 |             {
2025-05-30 01:05:22.531 |               "type": "text",
2025-05-30 01:05:22.531 |               "text": "**Problema:** O usu√°rio relatou a presen√ßa de v√°rias compras n√£o reconhecidas no Mercado Livre em seu extrato banc√°rio, suspeitando de um erro.\n\n**Solicitante:** Jeff\n**Sistemas:** Sistema Financeiro, Extrato Banc√°rio\n\n*Mensagem original: \"h√° algum erro no extrato\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:05:22.531 |             }
2025-05-30 01:05:22.531 |           ]
2025-05-30 01:05:22.531 |         }
2025-05-30 01:05:22.531 |       ]
2025-05-30 01:05:22.531 |     },
2025-05-30 01:05:22.531 |     "issuetype": {
2025-05-30 01:05:22.531 |       "id": "10626"
2025-05-30 01:05:22.531 |     },
2025-05-30 01:05:22.531 |     "reporter": {
2025-05-30 01:05:22.531 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:05:22.531 |     },
2025-05-30 01:05:22.531 |     "customfield_10962": "Outros",
2025-05-30 01:05:22.531 |     "customfield_10963": "Sistema Financeiro",
2025-05-30 01:05:22.531 |     "customfield_10966": "M√©dia",
2025-05-30 01:05:22.531 |     "customfield_10967": "N√£o"
2025-05-30 01:05:22.531 |   }
2025-05-30 01:05:22.531 | }
2025-05-30 01:05:22.531 | [Nest] 30  - 05/30/2025, 4:05:22 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:05:23.638 | [Nest] 30  - 05/30/2025, 4:05:23 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-293
2025-05-30 01:05:23.638 | [Nest] 30  - 05/30/2025, 4:05:23 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748577768.844379 -> PS4-293
2025-05-30 01:05:23.640 | [Nest] 30  - 05/30/2025, 4:05:23 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-293
2025-05-30 01:05:23.640 | [Nest] 30  - 05/30/2025, 4:05:23 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:05:23.640 | [Nest] 30  - 05/30/2025, 4:05:23 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748577768.844379
2025-05-30 01:05:24.145 | [Nest] 30  - 05/30/2025, 4:05:24 AM   DEBUG [GptSummarizationService] Summarizing problem text of 24 characters
2025-05-30 01:05:24.145 | [Nest] 30  - 05/30/2025, 4:05:24 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:05:24.966 | [Nest] 30  - 05/30/2025, 4:05:24 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Extrato apresenta compras desconhecidas do Mercado Livre."
2025-05-30 01:05:24.966 | [Nest] 30  - 05/30/2025, 4:05:24 AM   DEBUG [GptSummarizationService] Summarizing conversation with 4 messages
2025-05-30 01:05:28.243 | [Nest] 30  - 05/30/2025, 4:05:28 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:05:28.243 | [Nest] 30  - 05/30/2025, 4:05:28 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:05:28.243 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:05:28.243 |   task: 'Natural language admin notification generation',
2025-05-30 01:05:28.243 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:05:28.243 |   costMultiplier: 1,
2025-05-30 01:05:28.243 |   estimatedCost: 0.0000072,
2025-05-30 01:05:28.243 |   potentialSavings: 0.0001128
2025-05-30 01:05:28.243 | }
2025-05-30 01:05:28.243 | [Nest] 30  - 05/30/2025, 4:05:28 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:05:31.132 | [Nest] 30  - 05/30/2025, 4:05:31 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:05:31.132 | [Nest] 30  - 05/30/2025, 4:05:31 AM   DEBUG [JiraService] Getting ticket PS4-293
2025-05-30 01:05:34.783 | [Nest] 30  - 05/30/2025, 4:05:34 AM   DEBUG [TicketService] Using actual Jira priority for PS4-293: Could Have [P3] -> P3
2025-05-30 01:05:34.783 | [Nest] 30  - 05/30/2025, 4:05:34 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-293, priority: P3
2025-05-30 01:05:34.784 | [Nest] 30  - 05/30/2025, 4:05:34 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:05:34.783Z to 2025-05-30T04:05:34.783Z
2025-05-30 01:05:34.784 | [Nest] 30  - 05/30/2025, 4:05:34 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:05:34.783Z to 2025-05-30T04:05:34.783Z
2025-05-30 01:05:34.785 | [Nest] 30  - 05/30/2025, 4:05:34 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:05:35.373 | [Nest] 30  - 05/30/2025, 4:05:35 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748577935.578419 -> PS4-293
2025-05-30 01:05:35.373 | [Nest] 30  - 05/30/2025, 4:05:35 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748577935.578419","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748577935.578419","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-293","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"nyI70","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-293|*PS4-293*> - Extrato apresenta compras desconhecidas do Mercado Livre.","verbatim":false}},{"type":"section","block_id":"MtAlj","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com um erro no extrato. Ele mencionou que h√° v√°rias compras no Mercado Livre que precisa entender. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"LGd0J","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"mGyGx"},{"type":"actions","block_id":"ticket_actions_PS4-293","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-293\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577768.844379\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-293\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577768.844379\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-293\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748577768.844379\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:05:35.373 | [Nest] 30  - 05/30/2025, 4:05:35 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-293
2025-05-30 01:05:35.373 | [Nest] 30  - 05/30/2025, 4:05:35 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-293
2025-05-30 01:05:35.373 | [Nest] 30  - 05/30/2025, 4:05:35 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:05:40.029 | [Nest] 30  - 05/30/2025, 4:05:40 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-293 e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos. (neutral)
2025-05-30 01:05:40.030 | [Nest] 30  - 05/30/2025, 4:05:40 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-293 e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos.
2025-05-30 01:05:40.030 | [Nest] 30  - 05/30/2025, 4:05:40 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-293|PS4-293> e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos.
2025-05-30 01:05:40.030 | 
2025-05-30 01:05:40.030 | üìù Suas informa√ß√µes adicionais foram inclu√≠das no ticket existente.
2025-05-30 01:05:40.637 | [Nest] 30  - 05/30/2025, 4:05:40 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-293
2025-05-30 01:05:40.637 | [Nest] 30  - 05/30/2025, 4:05:40 AM   DEBUG [JiraService] Adding comment to ticket PS4-293 by suporteja_bot
2025-05-30 01:05:41.314 | [Nest] 30  - 05/30/2025, 4:05:41 AM     LOG [JiraService] Added comment to Jira ticket PS4-293
2025-05-30 01:05:48.612 | [4:05:48 AM] File change detected. Starting incremental compilation...
2025-05-30 01:05:48.612 | 
2025-05-30 01:05:49.024 | [4:05:49 AM] Found 0 errors. Watching for file changes.
2025-05-30 01:05:49.024 | 
2025-05-30 01:05:49.207 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [Bootstrap] Starting suporte-ja...
2025-05-30 01:05:49.207 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [Bootstrap] Loading environment variables from /app/src/bots/suporte-ja/.env
2025-05-30 01:05:49.209 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [Bootstrap] ‚úÖ SLACK_ADMIN_CHANNEL_ID loaded: C08TJQU4695
2025-05-30 01:05:49.559 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [NestFactory] Starting Nest application... +349ms
2025-05-30 01:05:49.575 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [SLAPriorityConfigService] === SLA Configuration Loaded ===
2025-05-30 01:05:49.575 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [SLAPriorityConfigService] P1 (Cr√≠tico): Response 30min, Resolve 2h
2025-05-30 01:05:49.575 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [SLAPriorityConfigService] P2 (Alto): Response 2h, Resolve 8h
2025-05-30 01:05:49.575 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [SLAPriorityConfigService] P3 (M√©dio): Response 4h, Resolve 24h
2025-05-30 01:05:49.575 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [SLAPriorityConfigService] P4 (Baixo): Response 8h, Resolve 3d
2025-05-30 01:05:49.575 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [SLAPriorityConfigService] ================================
2025-05-30 01:05:49.576 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] FormUtilsModule dependencies initialized +1ms
2025-05-30 01:05:49.576 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] ConfigHostModule dependencies initialized +0ms
2025-05-30 01:05:49.577 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] SlackUIModule dependencies initialized +0ms
2025-05-30 01:05:49.577 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] ConfigModule dependencies initialized +1ms
2025-05-30 01:05:49.577 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] ConfigModule dependencies initialized +0ms
2025-05-30 01:05:49.578 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [OpenAIService] ü§ñ OpenAI Service initialized with multi-model support
2025-05-30 01:05:49.578 | [Nest] 42  - 05/30/2025, 4:05:49 AM   DEBUG [OpenAIService] Models configured: JSON=gpt-4o-mini, Analysis=gpt-4o
2025-05-30 01:05:49.579 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [OpenAIClientService] ü§ñ OpenAI Client Service initialized
2025-05-30 01:05:49.582 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [DevelopmentModeGuard] Loaded 2 authorized development users
2025-05-30 01:05:49.583 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] SLAManagementModule dependencies initialized +1ms
2025-05-30 01:05:49.583 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] JiraIntegrationModule dependencies initialized +0ms
2025-05-30 01:05:49.583 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] OpenAIIntegrationModule dependencies initialized +0ms
2025-05-30 01:05:49.583 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] StorageIntegrationModule dependencies initialized +0ms
2025-05-30 01:05:49.583 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] SlackIntegrationModule dependencies initialized +0ms
2025-05-30 01:05:49.584 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] NaturalLanguageModule dependencies initialized +1ms
2025-05-30 01:05:49.584 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [InstanceLoader] SuporteJaModule dependencies initialized +0ms
2025-05-30 01:05:49.587 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [RoutesResolver] EventController {/suporte-ja/events}: +3ms
2025-05-30 01:05:49.587 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [RoutesResolver] FormController {/tech-support/form}: +0ms
2025-05-30 01:05:49.587 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [RoutesResolver] AdminActionController {/admin-actions}: +0ms
2025-05-30 01:05:49.589 | [Nest] 42  - 05/30/2025, 4:05:49 AM     LOG [RouterExplorer] Mapped {/admin-actions/interactive, POST} route +2ms
2025-05-30 01:05:53.991 | [Nest] 42  - 05/30/2025, 4:05:53 AM     LOG [SlackService] ‚ö°Ô∏è Slack Bolt app is running!
2025-05-30 01:05:53.991 | [Nest] 42  - 05/30/2025, 4:05:53 AM     LOG [EventController] ‚úÖ Event controller initialized with admin action handler integration
2025-05-30 01:05:53.993 | [Nest] 42  - 05/30/2025, 4:05:53 AM     LOG [NestApplication] Nest application successfully started +2ms
2025-05-30 01:05:53.995 | [Nest] 42  - 05/30/2025, 4:05:53 AM     LOG [Bootstrap] üöÄ suporte-ja is running on port 4010
2025-05-30 01:05:57.177 | [4:05:57 AM] File change detected. Starting incremental compilation...
2025-05-30 01:05:57.177 | 
2025-05-30 01:05:57.511 | [4:05:57 AM] Found 0 errors. Watching for file changes.
2025-05-30 01:05:57.511 | 
2025-05-30 01:05:57.692 | [Nest] 54  - 05/30/2025, 4:05:57 AM     LOG [Bootstrap] Starting suporte-ja...
2025-05-30 01:05:57.693 | [Nest] 54  - 05/30/2025, 4:05:57 AM     LOG [Bootstrap] Loading environment variables from /app/src/bots/suporte-ja/.env
2025-05-30 01:05:57.694 | [Nest] 54  - 05/30/2025, 4:05:57 AM     LOG [Bootstrap] ‚úÖ SLACK_ADMIN_CHANNEL_ID loaded: C08TJQU4695
2025-05-30 01:05:58.003 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [NestFactory] Starting Nest application... +309ms
2025-05-30 01:05:58.019 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [SLAPriorityConfigService] === SLA Configuration Loaded ===
2025-05-30 01:05:58.020 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [SLAPriorityConfigService] P1 (Cr√≠tico): Response 30min, Resolve 2h
2025-05-30 01:05:58.020 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [SLAPriorityConfigService] P2 (Alto): Response 2h, Resolve 8h
2025-05-30 01:05:58.020 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [SLAPriorityConfigService] P3 (M√©dio): Response 4h, Resolve 24h
2025-05-30 01:05:58.020 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [SLAPriorityConfigService] P4 (Baixo): Response 8h, Resolve 3d
2025-05-30 01:05:58.020 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [SLAPriorityConfigService] ================================
2025-05-30 01:05:58.020 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] FormUtilsModule dependencies initialized +0ms
2025-05-30 01:05:58.021 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] ConfigHostModule dependencies initialized +1ms
2025-05-30 01:05:58.021 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] SlackUIModule dependencies initialized +0ms
2025-05-30 01:05:58.021 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] ConfigModule dependencies initialized +0ms
2025-05-30 01:05:58.022 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] ConfigModule dependencies initialized +0ms
2025-05-30 01:05:58.023 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [OpenAIService] ü§ñ OpenAI Service initialized with multi-model support
2025-05-30 01:05:58.023 | [Nest] 54  - 05/30/2025, 4:05:58 AM   DEBUG [OpenAIService] Models configured: JSON=gpt-4o-mini, Analysis=gpt-4o
2025-05-30 01:05:58.023 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [OpenAIClientService] ü§ñ OpenAI Client Service initialized
2025-05-30 01:05:58.028 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [DevelopmentModeGuard] Loaded 2 authorized development users
2025-05-30 01:05:58.029 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] SLAManagementModule dependencies initialized +1ms
2025-05-30 01:05:58.029 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] JiraIntegrationModule dependencies initialized +0ms
2025-05-30 01:05:58.029 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] OpenAIIntegrationModule dependencies initialized +0ms
2025-05-30 01:05:58.029 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] StorageIntegrationModule dependencies initialized +0ms
2025-05-30 01:05:58.029 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] SlackIntegrationModule dependencies initialized +0ms
2025-05-30 01:05:58.030 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] NaturalLanguageModule dependencies initialized +1ms
2025-05-30 01:05:58.030 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [InstanceLoader] SuporteJaModule dependencies initialized +0ms
2025-05-30 01:05:58.033 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [RoutesResolver] EventController {/suporte-ja/events}: +3ms
2025-05-30 01:05:58.033 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [RoutesResolver] FormController {/tech-support/form}: +0ms
2025-05-30 01:05:58.033 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [RoutesResolver] AdminActionController {/admin-actions}: +0ms
2025-05-30 01:05:58.035 | [Nest] 54  - 05/30/2025, 4:05:58 AM     LOG [RouterExplorer] Mapped {/admin-actions/interactive, POST} route +2ms
2025-05-30 01:05:59.133 | [Nest] 54  - 05/30/2025, 4:05:59 AM     LOG [SlackService] ‚ö°Ô∏è Slack Bolt app is running!
2025-05-30 01:05:59.135 | [Nest] 54  - 05/30/2025, 4:05:59 AM     LOG [EventController] ‚úÖ Event controller initialized with admin action handler integration
2025-05-30 01:05:59.138 | [Nest] 54  - 05/30/2025, 4:05:59 AM     LOG [NestApplication] Nest application successfully started +3ms
2025-05-30 01:05:59.140 | [Nest] 54  - 05/30/2025, 4:05:59 AM     LOG [Bootstrap] üöÄ suporte-ja is running on port 4010
2025-05-30 01:06:51.750 | [Nest] 54  - 05/30/2025, 4:06:51 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Dar acesso √† Karen ao espa√ßo de tr√°fego no Confluence. Ensinar o Eric como fazer isso tamb√©m.
2025-05-30 01:06:51.750 | [Nest] 54  - 05/30/2025, 4:06:51 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:06:51.751 | [Nest] 54  - 05/30/2025, 4:06:51 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:06:51.751 | [Nest] 54  - 05/30/2025, 4:06:51 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:06:56.243 | [Nest] 54  - 05/30/2025, 4:06:56 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Dar acesso √† Karen ao espa√ßo de tr√°fego no Confluence. Ensinar o Eric como fazer isso tamb√©m.
2025-05-30 01:06:56.244 | [Nest] 54  - 05/30/2025, 4:06:56 AM   DEBUG [OpenAIService] Generating support response for message: Dar acesso √† Karen ao espa√ßo de tr√°fego no Confluence. Ensinar o Eric como fazer isso tamb√©m.
2025-05-30 01:06:56.244 | [Nest] 54  - 05/30/2025, 4:06:56 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:07:02.862 | [Nest] 54  - 05/30/2025, 4:07:02 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para liberar o acesso da Karen ao espa√ßo de tr√°fego no Confluence e tamb√©m para ensinar o Eric como fazer isso.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de acesso ao espa√ßo de tr√°fego no Confluence para Karen e treinamento para Eric.","confidence":95}
2025-05-30 01:07:02.862 | [Nest] 54  - 05/30/2025, 4:07:02 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para liberar o acesso da Karen ao espa√ßo de tr√°fego no Confluence e tamb√©m para ensinar o Eric como fazer isso.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o de acesso ao espa√ßo de tr√°fego no Confluence para Karen e treinamento para Eric.","confidence":95}
2025-05-30 01:07:03.522 | [Nest] 54  - 05/30/2025, 4:07:03 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748578010.406189
2025-05-30 01:07:04.836 | [Nest] 54  - 05/30/2025, 4:07:04 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748578010.406189
2025-05-30 01:07:04.837 | [Nest] 54  - 05/30/2025, 4:07:04 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:07:09.664 | [Nest] 54  - 05/30/2025, 4:07:09 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:07:13.411 | [Nest] 54  - 05/30/2025, 4:07:13 AM   DEBUG [JiraService] Retrieved reporter account ID: 712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48
2025-05-30 01:07:13.411 | [Nest] 54  - 05/30/2025, 4:07:13 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:07:13.411 | [Nest] 54  - 05/30/2025, 4:07:13 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:07:13.412 | [Nest] 54  - 05/30/2025, 4:07:13 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:07:13.412 |   customfield_10962: 'Outros',
2025-05-30 01:07:13.412 |   customfield_10963: 'Outros',
2025-05-30 01:07:13.412 |   customfield_10966: 'M√©dia',
2025-05-30 01:07:13.412 |   customfield_10967: 'N√£o'
2025-05-30 01:07:13.412 | }
2025-05-30 01:07:13.412 | [Nest] 54  - 05/30/2025, 4:07:13 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:07:13.412 | [Nest] 54  - 05/30/2025, 4:07:13 AM   DEBUG [JiraService] {
2025-05-30 01:07:13.412 |   "fields": {
2025-05-30 01:07:13.412 |     "project": {
2025-05-30 01:07:13.412 |       "key": "PS4"
2025-05-30 01:07:13.412 |     },
2025-05-30 01:07:13.412 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:07:13.412 |     "description": {
2025-05-30 01:07:13.412 |       "type": "doc",
2025-05-30 01:07:13.413 |       "version": 1,
2025-05-30 01:07:13.413 |       "content": [
2025-05-30 01:07:13.413 |         {
2025-05-30 01:07:13.413 |           "type": "paragraph",
2025-05-30 01:07:13.413 |           "content": [
2025-05-30 01:07:13.413 |             {
2025-05-30 01:07:13.413 |               "type": "text",
2025-05-30 01:07:13.413 |               "text": "**Problema:** Usu√°rio solicita concess√£o de acesso √† Karen no espa√ßo de tr√°fego do Confluence e instru√ß√µes para Eric sobre como realizar essa tarefa.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Dar acesso √† Karen ao espa√ßo de tr√°fego no Confluence. Ensinar o Eric como fazer isso tamb√©m.\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:07:13.413 |             }
2025-05-30 01:07:13.413 |           ]
2025-05-30 01:07:13.413 |         }
2025-05-30 01:07:13.413 |       ]
2025-05-30 01:07:13.413 |     },
2025-05-30 01:07:13.413 |     "issuetype": {
2025-05-30 01:07:13.413 |       "id": "10626"
2025-05-30 01:07:13.413 |     },
2025-05-30 01:07:13.413 |     "reporter": {
2025-05-30 01:07:13.413 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:07:13.413 |     },
2025-05-30 01:07:13.413 |     "customfield_10962": "Outros",
2025-05-30 01:07:13.413 |     "customfield_10963": "Outros",
2025-05-30 01:07:13.413 |     "customfield_10966": "M√©dia",
2025-05-30 01:07:13.413 |     "customfield_10967": "N√£o"
2025-05-30 01:07:13.413 |   }
2025-05-30 01:07:13.413 | }
2025-05-30 01:07:13.414 | [Nest] 54  - 05/30/2025, 4:07:13 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:07:14.544 | [Nest] 54  - 05/30/2025, 4:07:14 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-294
2025-05-30 01:07:14.544 | [Nest] 54  - 05/30/2025, 4:07:14 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748578010.406189 -> PS4-294
2025-05-30 01:07:14.545 | [Nest] 54  - 05/30/2025, 4:07:14 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-294
2025-05-30 01:07:14.545 | [Nest] 54  - 05/30/2025, 4:07:14 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:07:14.545 | [Nest] 54  - 05/30/2025, 4:07:14 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748578010.406189
2025-05-30 01:07:15.140 | [Nest] 54  - 05/30/2025, 4:07:15 AM   DEBUG [GptSummarizationService] Summarizing problem text of 93 characters
2025-05-30 01:07:17.163 | [Nest] 54  - 05/30/2025, 4:07:17 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:07:17.727 | [Nest] 54  - 05/30/2025, 4:07:17 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Erro ao acessar o Multilogin, especificamente a Google Play.
2025-05-30 01:07:17.727 | [Nest] 54  - 05/30/2025, 4:07:17 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:07:17.727 | [Nest] 54  - 05/30/2025, 4:07:17 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:07:17.728 | [Nest] 54  - 05/30/2025, 4:07:17 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:07:18.204 | [Nest] 54  - 05/30/2025, 4:07:18 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Liberar acesso de Karen e treinar Eric no Confluence"
2025-05-30 01:07:18.204 | [Nest] 54  - 05/30/2025, 4:07:18 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:07:18.358 | [Nest] 54  - 05/30/2025, 4:07:18 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Erro ao acessar o Multilogin, especificamente a Google Play.
2025-05-30 01:07:18.358 | [Nest] 54  - 05/30/2025, 4:07:18 AM   DEBUG [OpenAIService] Generating support response for message: Erro ao acessar o Multilogin, especificamente a Google Play.
2025-05-30 01:07:18.358 | [Nest] 54  - 05/30/2025, 4:07:18 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:07:20.687 | [Nest] 54  - 05/30/2025, 4:07:20 AM   DEBUG [OpenAIService] Support response generated: {"message":"Entendi que voc√™ est√° enfrentando um erro ao acessar o Multilogin na Google Play. Voc√™ pode tentar limpar o cache e os dados do aplicativo Multilogin nas configura√ß√µes do seu dispositivo.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Limpar o cache e os dados do aplicativo Multilogin.","followUpQuestions":null,"ticketSummary":null,"confidence":85}
2025-05-30 01:07:20.687 | [Nest] 54  - 05/30/2025, 4:07:20 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Entendi que voc√™ est√° enfrentando um erro ao acessar o Multilogin na Google Play. Voc√™ pode tentar limpar o cache e os dados do aplicativo Multilogin nas configura√ß√µes do seu dispositivo.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Limpar o cache e os dados do aplicativo Multilogin.","followUpQuestions":null,"ticketSummary":null,"confidence":85}
2025-05-30 01:07:20.691 | [Nest] 54  - 05/30/2025, 4:07:20 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:07:20.691 | [Nest] 54  - 05/30/2025, 4:07:20 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:07:20.691 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:07:20.691 |   task: 'Natural language admin notification generation',
2025-05-30 01:07:20.691 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:07:20.691 |   costMultiplier: 1,
2025-05-30 01:07:20.691 |   estimatedCost: 0.000027899999999999997,
2025-05-30 01:07:20.691 |   potentialSavings: 0.0004371
2025-05-30 01:07:20.691 | }
2025-05-30 01:07:20.691 | [Nest] 54  - 05/30/2025, 4:07:20 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:07:22.247 | [Nest] 54  - 05/30/2025, 4:07:22 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:07:22.248 | [Nest] 54  - 05/30/2025, 4:07:22 AM   DEBUG [JiraService] Getting ticket PS4-294
2025-05-30 01:07:22.685 | [Nest] 54  - 05/30/2025, 4:07:22 AM   DEBUG [TicketService] Using actual Jira priority for PS4-294: Could Have [P3] -> P3
2025-05-30 01:07:22.685 | [Nest] 54  - 05/30/2025, 4:07:22 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-294, priority: P3
2025-05-30 01:07:22.686 | [Nest] 54  - 05/30/2025, 4:07:22 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:07:22.685Z to 2025-05-30T04:07:22.685Z
2025-05-30 01:07:22.689 | [Nest] 54  - 05/30/2025, 4:07:22 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:07:22.685Z to 2025-05-30T04:07:22.685Z
2025-05-30 01:07:22.691 | [Nest] 54  - 05/30/2025, 4:07:22 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:07:23.176 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Criar usu√°rio novo no Datadog.
2025-05-30 01:07:23.176 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:07:23.176 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:07:23.177 | [Nest] 54  - 05/30/2025, 4:07:23 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:07:23.332 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748578043.537169 -> PS4-294
2025-05-30 01:07:23.332 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748578043.537169","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748578043.537169","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-294","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"dsd1v","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-294|*PS4-294*> - Liberar acesso de Karen e treinar Eric no Confluence","verbatim":false}},{"type":"section","block_id":"HF/8e","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de dar acesso √† Karen ao espa√ßo de tr√°fego no Confluence e ensinar o Eric como fazer isso. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"XHrXQ","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Acesso/Autentica√ß√£o","verbatim":false}]},{"type":"divider","block_id":"ezfWi"},{"type":"actions","block_id":"ticket_actions_PS4-294","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-294\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578010.406189\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-294\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578010.406189\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-294\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578010.406189\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:07:23.332 | [Nest] 54  - 05/30/2025, 4:07:23 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-294
2025-05-30 01:07:23.332 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-294
2025-05-30 01:07:23.332 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:07:23.696 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Criar usu√°rio novo no Datadog.
2025-05-30 01:07:23.696 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [OpenAIService] Generating support response for message: Criar usu√°rio novo no Datadog.
2025-05-30 01:07:23.696 | [Nest] 54  - 05/30/2025, 4:07:23 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:07:24.662 | [Nest] 54  - 05/30/2025, 4:07:24 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-294 e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° um retorno com os pr√≥ximos passos. (neutral)
2025-05-30 01:07:24.662 | [Nest] 54  - 05/30/2025, 4:07:24 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-294 e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° um retorno com os pr√≥ximos passos.
2025-05-30 01:07:24.662 | [Nest] 54  - 05/30/2025, 4:07:24 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-294|PS4-294> e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° um retorno com os pr√≥ximos passos.
2025-05-30 01:07:25.802 | [Nest] 54  - 05/30/2025, 4:07:25 AM   DEBUG [OpenAIService] Support response generated: {"message":"Vou criar um ticket para a cria√ß√£o do novo usu√°rio no Datadog.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o para criar novo usu√°rio no Datadog.","confidence":95}
2025-05-30 01:07:25.802 | [Nest] 54  - 05/30/2025, 4:07:25 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Vou criar um ticket para a cria√ß√£o do novo usu√°rio no Datadog.","shouldCreateTicket":true,"hasImmediateSolution":false,"needsMoreInfo":false,"suggestedActions":null,"followUpQuestions":null,"ticketSummary":"Solicita√ß√£o para criar novo usu√°rio no Datadog.","confidence":95}
2025-05-30 01:07:26.411 | [Nest] 54  - 05/30/2025, 4:07:26 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748578041.874859
2025-05-30 01:07:27.444 | [Nest] 54  - 05/30/2025, 4:07:27 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748578041.874859
2025-05-30 01:07:27.444 | [Nest] 54  - 05/30/2025, 4:07:27 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:07:28.267 | [Nest] 54  - 05/30/2025, 4:07:28 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-294
2025-05-30 01:07:28.267 | [Nest] 54  - 05/30/2025, 4:07:28 AM   DEBUG [JiraService] Adding comment to ticket PS4-294 by suporteja_bot
2025-05-30 01:07:28.978 | [Nest] 54  - 05/30/2025, 4:07:28 AM     LOG [JiraService] Added comment to Jira ticket PS4-294
2025-05-30 01:07:30.433 | [Nest] 54  - 05/30/2025, 4:07:30 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Meu notebook travou 3 vezes hoje e pediu rein√≠cio.
2025-05-30 01:07:30.433 | [Nest] 54  - 05/30/2025, 4:07:30 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:07:30.433 | [Nest] 54  - 05/30/2025, 4:07:30 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:07:30.433 | [Nest] 54  - 05/30/2025, 4:07:30 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:07:30.964 | [Nest] 54  - 05/30/2025, 4:07:30 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Meu notebook travou 3 vezes hoje e pediu rein√≠cio.
2025-05-30 01:07:30.965 | [Nest] 54  - 05/30/2025, 4:07:30 AM   DEBUG [OpenAIService] Generating support response for message: Meu notebook travou 3 vezes hoje e pediu rein√≠cio.
2025-05-30 01:07:30.965 | [Nest] 54  - 05/30/2025, 4:07:30 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:07:33.381 | [Nest] 54  - 05/30/2025, 4:07:33 AM   DEBUG [OpenAIService] Support response generated: {"message":"Entendo que seu notebook travou. Tente reiniciar o dispositivo e feche programas desnecess√°rios que possam estar consumindo recursos.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Reiniciar o notebook e fechar programas desnecess√°rios.","followUpQuestions":null,"ticketSummary":null,"confidence":85}
2025-05-30 01:07:33.381 | [Nest] 54  - 05/30/2025, 4:07:33 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"Entendo que seu notebook travou. Tente reiniciar o dispositivo e feche programas desnecess√°rios que possam estar consumindo recursos.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Reiniciar o notebook e fechar programas desnecess√°rios.","followUpQuestions":null,"ticketSummary":null,"confidence":85}
2025-05-30 01:07:34.723 | [Nest] 54  - 05/30/2025, 4:07:34 AM   DEBUG [JiraService] Creating ticket with custom fields: Suporte t√©cnico - Jeff
2025-05-30 01:07:34.724 | [Nest] 54  - 05/30/2025, 4:07:34 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:07:34.724 | [Nest] 54  - 05/30/2025, 4:07:34 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:07:34.724 | [Nest] 54  - 05/30/2025, 4:07:34 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:07:34.724 |   customfield_10962: 'Outros',
2025-05-30 01:07:34.724 |   customfield_10963: 'Outros',
2025-05-30 01:07:34.724 |   customfield_10966: 'M√©dia',
2025-05-30 01:07:34.724 |   customfield_10967: 'N√£o'
2025-05-30 01:07:34.724 | }
2025-05-30 01:07:34.724 | [Nest] 54  - 05/30/2025, 4:07:34 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:07:34.724 | [Nest] 54  - 05/30/2025, 4:07:34 AM   DEBUG [JiraService] {
2025-05-30 01:07:34.724 |   "fields": {
2025-05-30 01:07:34.724 |     "project": {
2025-05-30 01:07:34.724 |       "key": "PS4"
2025-05-30 01:07:34.724 |     },
2025-05-30 01:07:34.724 |     "summary": "Suporte t√©cnico - Jeff",
2025-05-30 01:07:34.724 |     "description": {
2025-05-30 01:07:34.724 |       "type": "doc",
2025-05-30 01:07:34.724 |       "version": 1,
2025-05-30 01:07:34.724 |       "content": [
2025-05-30 01:07:34.724 |         {
2025-05-30 01:07:34.724 |           "type": "paragraph",
2025-05-30 01:07:34.724 |           "content": [
2025-05-30 01:07:34.724 |             {
2025-05-30 01:07:34.724 |               "type": "text",
2025-05-30 01:07:34.724 |               "text": "**Problema:** Usu√°rio solicitou a cria√ß√£o de um novo usu√°rio no Datadog.\n\n**Solicitante:** Jeff\n\n*Mensagem original: \"Criar usu√°rio novo no Datadog.\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:07:34.724 |             }
2025-05-30 01:07:34.724 |           ]
2025-05-30 01:07:34.724 |         }
2025-05-30 01:07:34.724 |       ]
2025-05-30 01:07:34.724 |     },
2025-05-30 01:07:34.724 |     "issuetype": {
2025-05-30 01:07:34.724 |       "id": "10626"
2025-05-30 01:07:34.724 |     },
2025-05-30 01:07:34.724 |     "reporter": {
2025-05-30 01:07:34.724 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:07:34.724 |     },
2025-05-30 01:07:34.724 |     "customfield_10962": "Outros",
2025-05-30 01:07:34.724 |     "customfield_10963": "Outros",
2025-05-30 01:07:34.724 |     "customfield_10966": "M√©dia",
2025-05-30 01:07:34.724 |     "customfield_10967": "N√£o"
2025-05-30 01:07:34.724 |   }
2025-05-30 01:07:34.724 | }
2025-05-30 01:07:34.724 | [Nest] 54  - 05/30/2025, 4:07:34 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:07:35.669 | [Nest] 54  - 05/30/2025, 4:07:35 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-295
2025-05-30 01:07:35.669 | [Nest] 54  - 05/30/2025, 4:07:35 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748578041.874859 -> PS4-295
2025-05-30 01:07:35.669 | [Nest] 54  - 05/30/2025, 4:07:35 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-295
2025-05-30 01:07:35.669 | [Nest] 54  - 05/30/2025, 4:07:35 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:07:35.669 | [Nest] 54  - 05/30/2025, 4:07:35 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748578041.874859
2025-05-30 01:07:36.248 | [Nest] 54  - 05/30/2025, 4:07:36 AM   DEBUG [GptSummarizationService] Summarizing problem text of 30 characters
2025-05-30 01:07:36.248 | [Nest] 54  - 05/30/2025, 4:07:36 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:07:37.052 | [Nest] 54  - 05/30/2025, 4:07:37 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Cria√ß√£o de novo usu√°rio no Datadog necess√°ria."
2025-05-30 01:07:37.052 | [Nest] 54  - 05/30/2025, 4:07:37 AM   DEBUG [GptSummarizationService] Summarizing conversation with 2 messages
2025-05-30 01:07:37.233 | [Nest] 54  - 05/30/2025, 4:07:37 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: Notebook congelou e n√£o responde.
2025-05-30 01:07:37.233 | [Nest] 54  - 05/30/2025, 4:07:37 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:07:37.233 | [Nest] 54  - 05/30/2025, 4:07:37 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:07:37.233 | [Nest] 54  - 05/30/2025, 4:07:37 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:07:37.826 | [Nest] 54  - 05/30/2025, 4:07:37 AM   DEBUG [ConversationAnalysisAgent] Analyzing initial message from U7NKC9ADD: Notebook congelou e n√£o responde.
2025-05-30 01:07:37.826 | [Nest] 54  - 05/30/2025, 4:07:37 AM   DEBUG [OpenAIService] Generating support response for message: Notebook congelou e n√£o responde.
2025-05-30 01:07:37.826 | [Nest] 54  - 05/30/2025, 4:07:37 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:07:38.905 | [Nest] 54  - 05/30/2025, 4:07:38 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:07:38.906 | [Nest] 54  - 05/30/2025, 4:07:38 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:07:38.906 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:07:38.906 |   task: 'Natural language admin notification generation',
2025-05-30 01:07:38.906 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:07:38.906 |   costMultiplier: 1,
2025-05-30 01:07:38.906 |   estimatedCost: 0.000009,
2025-05-30 01:07:38.906 |   potentialSavings: 0.000141
2025-05-30 01:07:38.906 | }
2025-05-30 01:07:38.906 | [Nest] 54  - 05/30/2025, 4:07:38 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:07:40.568 | [Nest] 54  - 05/30/2025, 4:07:40 AM   DEBUG [OpenAIService] Support response generated: {"message":"O notebook pode ser reiniciado para resolver o congelamento. Tente pressionar e segurar o bot√£o de liga/desliga por alguns segundos.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Reinicie o notebook segurando o bot√£o de liga/desliga.","followUpQuestions":null,"ticketSummary":null,"confidence":90}
2025-05-30 01:07:40.568 | [Nest] 54  - 05/30/2025, 4:07:40 AM   DEBUG [ConversationAnalysisAgent] Initial message analysis complete: {"message":"O notebook pode ser reiniciado para resolver o congelamento. Tente pressionar e segurar o bot√£o de liga/desliga por alguns segundos.","shouldCreateTicket":false,"hasImmediateSolution":true,"needsMoreInfo":false,"suggestedActions":"Reinicie o notebook segurando o bot√£o de liga/desliga.","followUpQuestions":null,"ticketSummary":null,"confidence":90}
2025-05-30 01:07:41.091 | [Nest] 54  - 05/30/2025, 4:07:41 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:07:41.091 | [Nest] 54  - 05/30/2025, 4:07:41 AM   DEBUG [JiraService] Getting ticket PS4-295
2025-05-30 01:07:41.572 | [Nest] 54  - 05/30/2025, 4:07:41 AM   DEBUG [TicketService] Using actual Jira priority for PS4-295: Could Have [P3] -> P3
2025-05-30 01:07:41.572 | [Nest] 54  - 05/30/2025, 4:07:41 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-295, priority: P3
2025-05-30 01:07:41.572 | [Nest] 54  - 05/30/2025, 4:07:41 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:07:41.570Z to 2025-05-30T04:07:41.570Z
2025-05-30 01:07:41.572 | [Nest] 54  - 05/30/2025, 4:07:41 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:07:41.570Z to 2025-05-30T04:07:41.570Z
2025-05-30 01:07:41.574 | [Nest] 54  - 05/30/2025, 4:07:41 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:07:42.170 | [Nest] 54  - 05/30/2025, 4:07:42 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748578062.369589 -> PS4-295
2025-05-30 01:07:42.170 | [Nest] 54  - 05/30/2025, 4:07:42 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748578062.369589","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748578062.369589","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-295","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"HNtZV","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-295|*PS4-295*> - Cria√ß√£o de novo usu√°rio no Datadog necess√°ria.","verbatim":false}},{"type":"section","block_id":"/sfHo","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com a solicita√ß√£o de criar um novo usu√°rio no Datadog. Nenhuma tentativa anterior foi registrada. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"DnYFx","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"fn6tH"},{"type":"actions","block_id":"ticket_actions_PS4-295","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-295\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578041.874859\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-295\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578041.874859\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-295\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578041.874859\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:07:42.170 | [Nest] 54  - 05/30/2025, 4:07:42 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-295
2025-05-30 01:07:42.171 | [Nest] 54  - 05/30/2025, 4:07:42 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-295
2025-05-30 01:07:42.171 | [Nest] 54  - 05/30/2025, 4:07:42 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:07:43.433 | [Nest] 54  - 05/30/2025, 4:07:43 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-295 e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos. (neutral)
2025-05-30 01:07:43.433 | [Nest] 54  - 05/30/2025, 4:07:43 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-295 e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos.
2025-05-30 01:07:43.433 | [Nest] 54  - 05/30/2025, 4:07:43 AM   DEBUG [EventController] [handleTicketCreationRequest] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-295|PS4-295> e a equipe j√° foi notificada. Eles v√£o analisar e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos.
2025-05-30 01:07:47.096 | [Nest] 54  - 05/30/2025, 4:07:47 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-295
2025-05-30 01:07:47.099 | [Nest] 54  - 05/30/2025, 4:07:47 AM   DEBUG [JiraService] Adding comment to ticket PS4-295 by suporteja_bot
2025-05-30 01:07:47.738 | [Nest] 54  - 05/30/2025, 4:07:47 AM     LOG [JiraService] Added comment to Jira ticket PS4-295
2025-05-30 01:07:50.691 | [Nest] 54  - 05/30/2025, 4:07:50 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: nao posso por que ta multilogin
2025-05-30 01:07:50.691 | [Nest] 54  - 05/30/2025, 4:07:50 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:07:50.691 | [Nest] 54  - 05/30/2025, 4:07:50 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:07:50.691 | [Nest] 54  - 05/30/2025, 4:07:50 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:07:50.692 | [Nest] 54  - 05/30/2025, 4:07:50 AM   DEBUG [TicketReopenService] Checking if message should reopen ticket in thread 1748578036.392199
2025-05-30 01:07:50.692 | [Nest] 54  - 05/30/2025, 4:07:50 AM   DEBUG [TicketReopenService] No ticket mapping found for thread 1748578036.392199
2025-05-30 01:07:51.244 | [Nest] 54  - 05/30/2025, 4:07:51 AM   DEBUG [ConversationAnalysisAgent] Analyzing continued conversation with 3 messages
2025-05-30 01:07:51.245 | [Nest] 54  - 05/30/2025, 4:07:51 AM   DEBUG [OpenAIService] Generating intelligent support response for conversation with 3 messages
2025-05-30 01:07:51.245 | [Nest] 54  - 05/30/2025, 4:07:51 AM   DEBUG [OpenAIService] Using model gpt-4o for structured response
2025-05-30 01:07:56.586 | [Nest] 54  - 05/30/2025, 4:07:56 AM   DEBUG [OpenAIService] GPT Analysis Complete:
2025-05-30 01:07:56.587 | [Nest] 54  - 05/30/2025, 4:07:56 AM   DEBUG [OpenAIService] Object(6) {
2025-05-30 01:07:56.587 |   shouldCreateTicket: true,
2025-05-30 01:07:56.587 |   confidence: 85,
2025-05-30 01:07:56.587 |   userSentiment: 'confused',
2025-05-30 01:07:56.587 |   problemComplexity: 'requires_admin',
2025-05-30 01:07:56.587 |   conversationProgress: 'stalled',
2025-05-30 01:07:56.587 |   category: 'Software'
2025-05-30 01:07:56.587 | }
2025-05-30 01:07:56.588 | [Nest] 54  - 05/30/2025, 4:07:56 AM   DEBUG [ConversationAnalysisAgent] Continued conversation analysis complete: {"shouldCreateTicket":true,"confidence":85,"reasoning":"O usu√°rio est√° enfrentando um problema espec√≠fico ao acessar o Multilogin na Google Play e n√£o pode realizar a solu√ß√£o sugerida de limpar o cache e os dados do aplicativo. A resposta do usu√°rio indica uma poss√≠vel limita√ß√£o ou configura√ß√£o espec√≠fica que impede a execu√ß√£o da solu√ß√£o b√°sica. N√£o h√° progresso na conversa e o problema pode requerer uma an√°lise mais aprofundada ou permiss√µes administrativas, especialmente se estiver relacionado a configura√ß√µes espec√≠ficas do Multilogin.","userSentiment":"confused","problemComplexity":"requires_admin","solutionEffectiveness":"unknown","conversationProgress":"stalled","response":"Entendo que voc√™ est√° enfrentando dificuldades para acessar o Multilogin na Google Play e n√£o pode limpar o cache e os dados do aplicativo. Vou criar um ticket para que nossa equipe t√©cnica possa investigar mais a fundo e ajudar a resolver esse problema.","analysis":{"category":"Software","priority":"Must Have [P1]","affectedSystems":["Multilogin","Google Play"],"summary":"Usu√°rio n√£o consegue acessar o Multilogin na Google Play e n√£o pode limpar cache/dados do aplicativo.","nextSteps":"Criar um ticket para investiga√ß√£o detalhada do problema, possivelmente envolvendo permiss√µes ou configura√ß√µes espec√≠ficas do Multilogin.","previousAttempts":["Sugest√£o de limpar cache e dados do aplicativo"]}}
2025-05-30 01:07:56.590 | [Nest] 54  - 05/30/2025, 4:07:56 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_created - ticket TEMP
2025-05-30 01:07:56.590 | [Nest] 54  - 05/30/2025, 4:07:56 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:07:58.035 | [Nest] 54  - 05/30/2025, 4:07:58 AM   DEBUG [NaturalLanguageService] Generated natural language: Entendi que voc√™ est√° enfrentando um problema de multilogin. J√° criei o ticket TEMP e nossa equipe vai analisar isso para te ajudar o mais r√°pido poss√≠vel. (reassuring)
2025-05-30 01:07:58.608 | [Nest] 54  - 05/30/2025, 4:07:58 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748578036.392199
2025-05-30 01:07:59.113 | [Nest] 54  - 05/30/2025, 4:07:59 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748578036.392199
2025-05-30 01:07:59.115 | [Nest] 54  - 05/30/2025, 4:07:59 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:08:05.685 | [Nest] 54  - 05/30/2025, 4:08:05 AM   DEBUG [JiraService] Creating ticket with custom fields: Usu√°rio n√£o consegue acessar o Multilogin na Google Play e n√£o pode limpar cache/dados do aplicativo.
2025-05-30 01:08:05.685 | [Nest] 54  - 05/30/2025, 4:08:05 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:08:05.685 | [Nest] 54  - 05/30/2025, 4:08:05 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:08:05.686 | [Nest] 54  - 05/30/2025, 4:08:05 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:08:05.686 |   customfield_10962: 'Software',
2025-05-30 01:08:05.686 |   customfield_10963: 'Multilogin',
2025-05-30 01:08:05.686 |   customfield_10966: 'M√©dia',
2025-05-30 01:08:05.686 |   customfield_10967: 'N√£o'
2025-05-30 01:08:05.686 | }
2025-05-30 01:08:05.686 | [Nest] 54  - 05/30/2025, 4:08:05 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:08:05.686 | [Nest] 54  - 05/30/2025, 4:08:05 AM   DEBUG [JiraService] {
2025-05-30 01:08:05.686 |   "fields": {
2025-05-30 01:08:05.686 |     "project": {
2025-05-30 01:08:05.686 |       "key": "PS4"
2025-05-30 01:08:05.686 |     },
2025-05-30 01:08:05.686 |     "summary": "Usu√°rio n√£o consegue acessar o Multilogin na Google Play e n√£o pode limpar cache/dados do aplicativo.",
2025-05-30 01:08:05.686 |     "description": {
2025-05-30 01:08:05.686 |       "type": "doc",
2025-05-30 01:08:05.686 |       "version": 1,
2025-05-30 01:08:05.686 |       "content": [
2025-05-30 01:08:05.686 |         {
2025-05-30 01:08:05.686 |           "type": "paragraph",
2025-05-30 01:08:05.686 |           "content": [
2025-05-30 01:08:05.686 |             {
2025-05-30 01:08:05.686 |               "type": "text",
2025-05-30 01:08:05.686 |               "text": "**Problema:** O usu√°rio est√° enfrentando dificuldades ao acessar o Multilogin, especificamente ao tentar acessar a Google Play.\n\n**Solicitante:** Jeff\n**Sistemas:** Multilogin, Google Play\n\n*Mensagem original: \"nao posso por que ta multilogin\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:08:05.686 |             }
2025-05-30 01:08:05.686 |           ]
2025-05-30 01:08:05.686 |         }
2025-05-30 01:08:05.686 |       ]
2025-05-30 01:08:05.686 |     },
2025-05-30 01:08:05.686 |     "issuetype": {
2025-05-30 01:08:05.686 |       "id": "10626"
2025-05-30 01:08:05.686 |     },
2025-05-30 01:08:05.686 |     "reporter": {
2025-05-30 01:08:05.686 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:08:05.686 |     },
2025-05-30 01:08:05.686 |     "customfield_10962": "Software",
2025-05-30 01:08:05.686 |     "customfield_10963": "Multilogin",
2025-05-30 01:08:05.686 |     "customfield_10966": "M√©dia",
2025-05-30 01:08:05.686 |     "customfield_10967": "N√£o"
2025-05-30 01:08:05.686 |   }
2025-05-30 01:08:05.686 | }
2025-05-30 01:08:05.686 | [Nest] 54  - 05/30/2025, 4:08:05 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:08:06.788 | [Nest] 54  - 05/30/2025, 4:08:06 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-296
2025-05-30 01:08:06.788 | [Nest] 54  - 05/30/2025, 4:08:06 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748578036.392199 -> PS4-296
2025-05-30 01:08:06.789 | [Nest] 54  - 05/30/2025, 4:08:06 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-296
2025-05-30 01:08:06.789 | [Nest] 54  - 05/30/2025, 4:08:06 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:08:06.789 | [Nest] 54  - 05/30/2025, 4:08:06 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748578036.392199
2025-05-30 01:08:07.315 | [Nest] 54  - 05/30/2025, 4:08:07 AM   DEBUG [GptSummarizationService] Summarizing problem text of 31 characters
2025-05-30 01:08:07.315 | [Nest] 54  - 05/30/2025, 4:08:07 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:08:08.210 | [Nest] 54  - 05/30/2025, 4:08:08 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Erro de acesso ao Multilogin na Google Play Store"
2025-05-30 01:08:08.211 | [Nest] 54  - 05/30/2025, 4:08:08 AM   DEBUG [GptSummarizationService] Summarizing conversation with 4 messages
2025-05-30 01:08:10.369 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: nao funcionou
2025-05-30 01:08:10.369 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:08:10.369 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:08:10.369 | [Nest] 54  - 05/30/2025, 4:08:10 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:08:10.369 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [TicketReopenService] Checking if message should reopen ticket in thread 1748578049.651549
2025-05-30 01:08:10.369 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [TicketReopenService] No ticket mapping found for thread 1748578049.651549
2025-05-30 01:08:10.752 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:08:10.752 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:08:10.752 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:08:10.752 |   task: 'Natural language admin notification generation',
2025-05-30 01:08:10.752 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:08:10.752 |   costMultiplier: 1,
2025-05-30 01:08:10.752 |   estimatedCost: 0.0000093,
2025-05-30 01:08:10.752 |   potentialSavings: 0.0001457
2025-05-30 01:08:10.752 | }
2025-05-30 01:08:10.752 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:08:10.903 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [ConversationAnalysisAgent] Analyzing continued conversation with 3 messages
2025-05-30 01:08:10.903 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [OpenAIService] Generating intelligent support response for conversation with 3 messages
2025-05-30 01:08:10.903 | [Nest] 54  - 05/30/2025, 4:08:10 AM   DEBUG [OpenAIService] Using model gpt-4o for structured response
2025-05-30 01:08:12.494 | [Nest] 54  - 05/30/2025, 4:08:12 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:08:12.495 | [Nest] 54  - 05/30/2025, 4:08:12 AM   DEBUG [JiraService] Getting ticket PS4-296
2025-05-30 01:08:13.012 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [TicketService] Using actual Jira priority for PS4-296: Could Have [P3] -> P3
2025-05-30 01:08:13.012 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-296, priority: P3
2025-05-30 01:08:13.012 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:08:13.012Z to 2025-05-30T04:08:13.012Z
2025-05-30 01:08:13.012 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:08:13.012Z to 2025-05-30T04:08:13.012Z
2025-05-30 01:08:13.012 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:08:13.587 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748578093.789839 -> PS4-296
2025-05-30 01:08:13.587 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748578093.789839","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748578093.789839","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-296","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"hjcax","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-296|*PS4-296*> - Erro de acesso ao Multilogin na Google Play Store","verbatim":false}},{"type":"section","block_id":"tz68D","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com dificuldades para acessar o Multilogin na Google Play. Ele mencionou que n√£o consegue realizar a a√ß√£o devido ao erro. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"zRvbg","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Acesso/Autentica√ß√£o","verbatim":false}]},{"type":"divider","block_id":"lezA6"},{"type":"actions","block_id":"ticket_actions_PS4-296","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-296\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578036.392199\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-296\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578036.392199\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-296\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578036.392199\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:08:13.588 | [Nest] 54  - 05/30/2025, 4:08:13 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-296
2025-05-30 01:08:13.588 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-296
2025-05-30 01:08:13.588 | [Nest] 54  - 05/30/2025, 4:08:13 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:08:15.050 | [Nest] 54  - 05/30/2025, 4:08:15 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-296 e a equipe j√° foi notificada. Eles v√£o analisar tudo e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos. (reassuring)
2025-05-30 01:08:15.050 | [Nest] 54  - 05/30/2025, 4:08:15 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-296 e a equipe j√° foi notificada. Eles v√£o analisar tudo e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos.
2025-05-30 01:08:15.050 | [Nest] 54  - 05/30/2025, 4:08:15 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-296|PS4-296> e a equipe j√° foi notificada. Eles v√£o analisar tudo e em breve voc√™ receber√° uma atualiza√ß√£o sobre os pr√≥ximos passos.
2025-05-30 01:08:15.685 | [Nest] 54  - 05/30/2025, 4:08:15 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-296
2025-05-30 01:08:15.685 | [Nest] 54  - 05/30/2025, 4:08:15 AM   DEBUG [JiraService] Adding comment to ticket PS4-296 by suporteja_bot
2025-05-30 01:08:16.281 | [Nest] 54  - 05/30/2025, 4:08:16 AM     LOG [JiraService] Added comment to Jira ticket PS4-296
2025-05-30 01:08:16.798 | [Nest] 54  - 05/30/2025, 4:08:16 AM   DEBUG [OpenAIService] GPT Analysis Complete:
2025-05-30 01:08:16.798 | [Nest] 54  - 05/30/2025, 4:08:16 AM   DEBUG [OpenAIService] Object(6) {
2025-05-30 01:08:16.799 |   shouldCreateTicket: true,
2025-05-30 01:08:16.799 |   confidence: 95,
2025-05-30 01:08:16.799 |   userSentiment: 'frustrated',
2025-05-30 01:08:16.799 |   problemComplexity: 'complex',
2025-05-30 01:08:16.799 |   conversationProgress: 'stalled',
2025-05-30 01:08:16.799 |   category: 'Hardware'
2025-05-30 01:08:16.799 | }
2025-05-30 01:08:16.799 | [Nest] 54  - 05/30/2025, 4:08:16 AM   DEBUG [ConversationAnalysisAgent] Continued conversation analysis complete: {"shouldCreateTicket":true,"confidence":95,"reasoning":"O usu√°rio j√° tentou reiniciar o dispositivo, que √© uma solu√ß√£o b√°sica e essencial para problemas de travamento. A sugest√£o de fechar programas desnecess√°rios foi redundante, pois o rein√≠cio j√° cobre essa a√ß√£o. Como a reinicializa√ß√£o n√£o resolveu o problema e o usu√°rio indicou que 'n√£o funcionou', √© um sinal claro de que as solu√ß√µes b√°sicas falharam. Al√©m disso, o problema de travamento pode ser complexo, possivelmente relacionado a hardware ou software mais profundo, que requer uma an√°lise mais detalhada. Portanto, √© apropriado escalar para a cria√ß√£o de um ticket.","userSentiment":"frustrated","problemComplexity":"complex","solutionEffectiveness":"not_working","conversationProgress":"stalled","response":"Entendo que o problema persiste mesmo ap√≥s as tentativas iniciais. Vou criar um ticket para que nossa equipe t√©cnica possa investigar mais a fundo e resolver isso para voc√™ o mais r√°pido poss√≠vel.","analysis":{"category":"Hardware","priority":"Must Have [P1]","affectedSystems":["Notebook"],"summary":"Notebook travando repetidamente, reinicializa√ß√£o n√£o resolve.","nextSteps":"Criar ticket para an√°lise detalhada por equipe t√©cnica.","previousAttempts":["Reiniciar o dispositivo","Fechar programas desnecess√°rios"]}}
2025-05-30 01:08:16.799 | [Nest] 54  - 05/30/2025, 4:08:16 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_created - ticket TEMP
2025-05-30 01:08:16.799 | [Nest] 54  - 05/30/2025, 4:08:16 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:08:18.774 | [Nest] 54  - 05/30/2025, 4:08:18 AM   DEBUG [NaturalLanguageService] Generated natural language: Entendi que o problema n√£o funcionou como esperado. J√° criei o ticket TEMP e nossa equipe vai investigar isso o mais r√°pido poss√≠vel para encontrar uma solu√ß√£o. Vou te manter atualizado sobre o progresso. (reassuring)
2025-05-30 01:08:19.410 | [Nest] 54  - 05/30/2025, 4:08:19 AM   DEBUG [TicketService] Creating/updating ticket for thread: 1748578049.651549
2025-05-30 01:08:19.968 | [Nest] 54  - 05/30/2025, 4:08:19 AM   DEBUG [SuporteGptDescriptionGeneratorService] Generating Portuguese technical description for thread 1748578049.651549
2025-05-30 01:08:19.969 | [Nest] 54  - 05/30/2025, 4:08:19 AM   DEBUG [OpenAIClientService] Creating chat completion with model: gpt-4o
2025-05-30 01:08:22.027 | [Nest] 54  - 05/30/2025, 4:08:22 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: okay vou tentar
2025-05-30 01:08:22.027 | [Nest] 54  - 05/30/2025, 4:08:22 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:08:22.028 | [Nest] 54  - 05/30/2025, 4:08:22 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:08:22.028 | [Nest] 54  - 05/30/2025, 4:08:22 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:08:22.028 | [Nest] 54  - 05/30/2025, 4:08:22 AM   DEBUG [TicketReopenService] Checking if message should reopen ticket in thread 1748578056.948509
2025-05-30 01:08:22.028 | [Nest] 54  - 05/30/2025, 4:08:22 AM   DEBUG [TicketReopenService] No ticket mapping found for thread 1748578056.948509
2025-05-30 01:08:22.523 | [Nest] 54  - 05/30/2025, 4:08:22 AM   DEBUG [ConversationAnalysisAgent] Analyzing continued conversation with 3 messages
2025-05-30 01:08:22.524 | [Nest] 54  - 05/30/2025, 4:08:22 AM   DEBUG [OpenAIService] Generating intelligent support response for conversation with 3 messages
2025-05-30 01:08:22.524 | [Nest] 54  - 05/30/2025, 4:08:22 AM   DEBUG [OpenAIService] Using model gpt-4o for structured response
2025-05-30 01:08:27.543 | [Nest] 54  - 05/30/2025, 4:08:27 AM   DEBUG [JiraService] Creating ticket with custom fields: Notebook travando repetidamente, reinicializa√ß√£o n√£o resolve.
2025-05-30 01:08:27.544 | [Nest] 54  - 05/30/2025, 4:08:27 AM   DEBUG [JiraService] Adding pre-mapped custom fields to ticket
2025-05-30 01:08:27.545 | [Nest] 54  - 05/30/2025, 4:08:27 AM   DEBUG [JiraService] Added custom fields to payload:
2025-05-30 01:08:27.545 | [Nest] 54  - 05/30/2025, 4:08:27 AM   DEBUG [JiraService] Object(4) {
2025-05-30 01:08:27.545 |   customfield_10962: 'Hardware',
2025-05-30 01:08:27.545 |   customfield_10963: 'Notebook',
2025-05-30 01:08:27.545 |   customfield_10966: 'M√©dia',
2025-05-30 01:08:27.545 |   customfield_10967: 'N√£o'
2025-05-30 01:08:27.545 | }
2025-05-30 01:08:27.545 | [Nest] 54  - 05/30/2025, 4:08:27 AM   DEBUG [JiraService] Full payload being sent to Jira:
2025-05-30 01:08:27.545 | [Nest] 54  - 05/30/2025, 4:08:27 AM   DEBUG [JiraService] {
2025-05-30 01:08:27.546 |   "fields": {
2025-05-30 01:08:27.546 |     "project": {
2025-05-30 01:08:27.546 |       "key": "PS4"
2025-05-30 01:08:27.546 |     },
2025-05-30 01:08:27.546 |     "summary": "Notebook travando repetidamente, reinicializa√ß√£o n√£o resolve.",
2025-05-30 01:08:27.546 |     "description": {
2025-05-30 01:08:27.546 |       "type": "doc",
2025-05-30 01:08:27.546 |       "version": 1,
2025-05-30 01:08:27.546 |       "content": [
2025-05-30 01:08:27.546 |         {
2025-05-30 01:08:27.546 |           "type": "paragraph",
2025-05-30 01:08:27.546 |           "content": [
2025-05-30 01:08:27.546 |             {
2025-05-30 01:08:27.546 |               "type": "text",
2025-05-30 01:08:27.546 |               "text": "**Problema:** O usu√°rio relatou que seu notebook travou tr√™s vezes em um √∫nico dia e solicitou rein√≠cio, mas o problema persiste.\n\n**Solicitante:** Jeff\n**Sistemas:** Notebook\n\n*Mensagem original: \"nao funcionou\"*\n\n*Criado automaticamente via Slack*"
2025-05-30 01:08:27.546 |             }
2025-05-30 01:08:27.546 |           ]
2025-05-30 01:08:27.546 |         }
2025-05-30 01:08:27.546 |       ]
2025-05-30 01:08:27.546 |     },
2025-05-30 01:08:27.546 |     "issuetype": {
2025-05-30 01:08:27.546 |       "id": "10626"
2025-05-30 01:08:27.546 |     },
2025-05-30 01:08:27.546 |     "reporter": {
2025-05-30 01:08:27.546 |       "accountId": "712020:39fb24cc-4a1b-41ce-bb23-f857c44ebe48"
2025-05-30 01:08:27.546 |     },
2025-05-30 01:08:27.546 |     "customfield_10962": "Hardware",
2025-05-30 01:08:27.546 |     "customfield_10963": "Notebook",
2025-05-30 01:08:27.546 |     "customfield_10966": "M√©dia",
2025-05-30 01:08:27.546 |     "customfield_10967": "N√£o"
2025-05-30 01:08:27.546 |   }
2025-05-30 01:08:27.546 | }
2025-05-30 01:08:27.546 | [Nest] 54  - 05/30/2025, 4:08:27 AM   DEBUG [JiraService] Setting Slack User ID field (customfield_10873) to: @jeff
2025-05-30 01:08:28.094 | [Nest] 54  - 05/30/2025, 4:08:28 AM   DEBUG [OpenAIService] GPT Analysis Complete:
2025-05-30 01:08:28.095 | [Nest] 54  - 05/30/2025, 4:08:28 AM   DEBUG [OpenAIService] Object(6) {
2025-05-30 01:08:28.095 |   shouldCreateTicket: false,
2025-05-30 01:08:28.095 |   confidence: 70,
2025-05-30 01:08:28.095 |   userSentiment: 'cooperative',
2025-05-30 01:08:28.095 |   problemComplexity: 'simple',
2025-05-30 01:08:28.095 |   conversationProgress: 'progressing',
2025-05-30 01:08:28.095 |   category: 'Hardware'
2025-05-30 01:08:28.095 | }
2025-05-30 01:08:28.095 | [Nest] 54  - 05/30/2025, 4:08:28 AM   DEBUG [ConversationAnalysisAgent] Continued conversation analysis complete: {"shouldCreateTicket":false,"confidence":70,"reasoning":"O usu√°rio ainda n√£o confirmou se a solu√ß√£o de reiniciar funcionou ou n√£o. Portanto, n√£o h√° evid√™ncia suficiente para escalar para um ticket. O pr√≥ximo passo l√≥gico √© aguardar a resposta do usu√°rio sobre a efic√°cia da reinicializa√ß√£o.","userSentiment":"cooperative","problemComplexity":"simple","solutionEffectiveness":"unknown","conversationProgress":"progressing","response":"Por favor, me avise se o problema foi resolvido ap√≥s reiniciar o notebook. Se o problema persistir, podemos tentar outras solu√ß√µes.","analysis":{"category":"Hardware","priority":"Could Have [P3]","affectedSystems":["Notebook"],"summary":"Notebook congelou e n√£o responde.","nextSteps":"Aguardar a resposta do usu√°rio sobre a efic√°cia da reinicializa√ß√£o. Se o problema persistir, verificar recursos do sistema e poss√≠veis conflitos de software.","previousAttempts":["Reiniciar o notebook pressionando o bot√£o de liga/desliga"]}}
2025-05-30 01:08:28.446 | [Nest] 54  - 05/30/2025, 4:08:28 AM     LOG [JiraService] Created Jira ticket with custom fields: PS4-297
2025-05-30 01:08:28.448 | [Nest] 54  - 05/30/2025, 4:08:28 AM   DEBUG [ThreadTicketMappingService] Stored mapping: D08UAG7D1Q9:1748578049.651549 -> PS4-297
2025-05-30 01:08:28.448 | [Nest] 54  - 05/30/2025, 4:08:28 AM   DEBUG [TicketService] Attempting to send admin notification for ticket PS4-297
2025-05-30 01:08:28.448 | [Nest] 54  - 05/30/2025, 4:08:28 AM   DEBUG [TicketService] Admin channel ID from env: C08TJQU4695
2025-05-30 01:08:28.448 | [Nest] 54  - 05/30/2025, 4:08:28 AM   DEBUG [EnhancedAdminSummaryService] Generating enhanced summary for thread 1748578049.651549
2025-05-30 01:08:29.407 | [Nest] 54  - 05/30/2025, 4:08:29 AM   DEBUG [GptSummarizationService] Summarizing problem text of 13 characters
2025-05-30 01:08:29.407 | [Nest] 54  - 05/30/2025, 4:08:29 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for short title generation
2025-05-30 01:08:30.628 | [Nest] 54  - 05/30/2025, 4:08:30 AM   DEBUG [EnhancedAdminSummaryService] Generated short title: "Notebook trava repetidamente e solicita rein√≠cio cont√≠nuo."
2025-05-30 01:08:30.628 | [Nest] 54  - 05/30/2025, 4:08:30 AM   DEBUG [GptSummarizationService] Summarizing conversation with 4 messages
2025-05-30 01:08:33.467 | [Nest] 54  - 05/30/2025, 4:08:33 AM   DEBUG [GptModelSelectorService] Model Selection: gpt-4o-mini
2025-05-30 01:08:33.467 | [Nest] 54  - 05/30/2025, 4:08:33 AM   DEBUG [GptModelSelectorService] Object(6) {
2025-05-30 01:08:33.467 |   service: 'EnhancedAdminSummaryService',
2025-05-30 01:08:33.467 |   task: 'Natural language admin notification generation',
2025-05-30 01:08:33.467 |   reasoning: 'Simple natural language task - optimal cost/performance ratio',
2025-05-30 01:08:33.467 |   costMultiplier: 1,
2025-05-30 01:08:33.467 |   estimatedCost: 0.0000039,
2025-05-30 01:08:33.467 |   potentialSavings: 0.0000611
2025-05-30 01:08:33.467 | }
2025-05-30 01:08:33.467 | [Nest] 54  - 05/30/2025, 4:08:33 AM   DEBUG [EnhancedAdminSummaryService] Using gpt-4o-mini for natural language generation: Simple natural language task - optimal cost/performance ratio
2025-05-30 01:08:35.144 | [Nest] 54  - 05/30/2025, 4:08:35 AM   DEBUG [EnhancedAdminSummaryService] Successfully generated GPT description using gpt-4o-mini
2025-05-30 01:08:35.145 | [Nest] 54  - 05/30/2025, 4:08:35 AM   DEBUG [JiraService] Getting ticket PS4-297
2025-05-30 01:08:35.652 | [Nest] 54  - 05/30/2025, 4:08:35 AM   DEBUG [TicketService] Using actual Jira priority for PS4-297: Could Have [P3] -> P3
2025-05-30 01:08:35.653 | [Nest] 54  - 05/30/2025, 4:08:35 AM   DEBUG [EnhancedSLACalculatorService] Calculating SLA for ticket PS4-297, priority: P3
2025-05-30 01:08:35.653 | [Nest] 54  - 05/30/2025, 4:08:35 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:08:35.651Z to 2025-05-30T04:08:35.652Z
2025-05-30 01:08:35.653 | [Nest] 54  - 05/30/2025, 4:08:35 AM   DEBUG [BusinessHoursService] Calculating business minutes from 2025-05-30T04:08:35.651Z to 2025-05-30T04:08:35.652Z
2025-05-30 01:08:35.653 | [Nest] 54  - 05/30/2025, 4:08:35 AM   DEBUG [TicketService] Sending admin notification to channel C08TJQU4695
2025-05-30 01:08:36.260 | [Nest] 54  - 05/30/2025, 4:08:36 AM   DEBUG [ThreadTicketMappingService] Stored mapping: C08TJQU4695:1748578116.467079 -> PS4-297
2025-05-30 01:08:36.260 | [Nest] 54  - 05/30/2025, 4:08:36 AM   DEBUG [TicketService] Admin notification sent successfully: {"ok":true,"channel":"C08TJQU4695","ts":"1748578116.467079","message":{"user":"U08TJLQPNTH","type":"message","ts":"1748578116.467079","bot_id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","text":":ticket: Novo ticket: PS4-297","team":"T3YPJCQN6","bot_profile":{"id":"B08TJLQNXUP","app_id":"A08UAB6J5B3","user_id":"U08TJLQPNTH","name":"Suporte J√°","icons":{"image_36":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_36.png","image_48":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_48.png","image_72":"https://avatars.slack-edge.com/2025-05-25/8942605607987_1fa15df3f6cc00e7c529_72.png"},"deleted":false,"updated":1748289523,"team_id":"T3YPJCQN6"},"blocks":[{"type":"section","block_id":"XjJEm","text":{"type":"mrkdwn","text":":clipboard: <https://ipmediabr.atlassian.net/browse/PS4-297|*PS4-297*> - Notebook trava repetidamente e solicita rein√≠cio cont√≠nuo.","verbatim":false}},{"type":"section","block_id":"hV6s5","text":{"type":"mrkdwn","text":"O usu√°rio <@U7NKC9ADD> est√° com o notebook travando repetidamente. Ele j√° tentou reiniciar o dispositivo e fechar programas desnecess√°rios, mas isso n√£o resolveu. Clique em Assumir para pausar o contador de SLA e entre em contato com <@U7NKC9ADD> para ajudar a resolver o problema.","verbatim":false}},{"type":"context","block_id":"GrWyE","elements":[{"type":"mrkdwn","text":"*Respons√°vel:* N√£o atribu√≠do","verbatim":false},{"type":"mrkdwn","text":"*SLA Resposta:* :stopwatch: 4h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*SLA Resolu√ß√£o:* :stopwatch: 1d 0h 0m restantes","verbatim":false},{"type":"mrkdwn","text":"*Prioridade:* P3 (M√©dio)","verbatim":false},{"type":"mrkdwn","text":"*Status SLA:* :arrow_forward: Ativo","verbatim":false},{"type":"mrkdwn","text":"*Categoria:* Suporte T√©cnico","verbatim":false}]},{"type":"divider","block_id":"uUGMl"},{"type":"actions","block_id":"ticket_actions_PS4-297","elements":[{"type":"button","action_id":"start_working","text":{"type":"plain_text","text":"Assumir","emoji":true},"style":"primary","value":"{\"ticketKey\":\"PS4-297\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578049.651549\",\"status\":\"new\"}"},{"type":"static_select","action_id":"secondary_actions","placeholder":{"type":"plain_text","text":"Mais a√ß√µes...","emoji":true},"options":[{"text":{"type":"plain_text","text":"Rejeitar","emoji":true},"value":"{\"actionId\":\"reject_ticket\",\"ticketKey\":\"PS4-297\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578049.651549\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"Comentar","emoji":true},"value":"{\"actionId\":\"add_comment\",\"ticketKey\":\"PS4-297\",\"userChannel\":\"D08UAG7D1Q9\",\"userThreadTs\":\"1748578049.651549\",\"userId\":\"jeff\",\"status\":\"new\"}"},{"text":{"type":"plain_text","text":"‚ùì Como usar o Suporte J√°","emoji":true},"value":"{\"actionId\":\"show_help\",\"text\":\"Como usar o Suporte J√°\",\"botType\":\"suporte-ja\",\"botName\":\"Suporte J√°\"}"}]}]}]},"response_metadata":{"scopes":["app_mentions:read","channels:history","channels:join","channels:read","chat:write","chat:write.public","files:read","files:write","groups:history","groups:read","im:history","im:read","mpim:history","mpim:read","reactions:read","reactions:write","users:read","users.profile:read"],"acceptedScopes":["chat:write"]}}
2025-05-30 01:08:36.260 | [Nest] 54  - 05/30/2025, 4:08:36 AM     LOG [TicketService] Created ticket with dynamic fields: PS4-297
2025-05-30 01:08:36.260 | [Nest] 54  - 05/30/2025, 4:08:36 AM   DEBUG [NaturalLanguageService] Generating natural language for ticket_updated - ticket PS4-297
2025-05-30 01:08:36.260 | [Nest] 54  - 05/30/2025, 4:08:36 AM   DEBUG [OpenAIService] Using model gpt-4o-mini for structured response
2025-05-30 01:08:37.646 | [Nest] 54  - 05/30/2025, 4:08:37 AM   DEBUG [NaturalLanguageService] Generated natural language: As novas informa√ß√µes foram adicionadas ao ticket PS4-297 e a equipe j√° foi notificada. Eles v√£o analisar os detalhes e entrar em contato com voc√™ em breve para resolver a situa√ß√£o. (reassuring)
2025-05-30 01:08:37.646 | [Nest] 54  - 05/30/2025, 4:08:37 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response before linkify: As novas informa√ß√µes foram adicionadas ao ticket PS4-297 e a equipe j√° foi notificada. Eles v√£o analisar os detalhes e entrar em contato com voc√™ em breve para resolver a situa√ß√£o.
2025-05-30 01:08:37.647 | [Nest] 54  - 05/30/2025, 4:08:37 AM   DEBUG [EventController] [handleTicketCreationRequestWithFullContext] Natural response after linkify: As novas informa√ß√µes foram adicionadas ao ticket <https://ipmediabr.atlassian.net/browse/PS4-297|PS4-297> e a equipe j√° foi notificada. Eles v√£o analisar os detalhes e entrar em contato com voc√™ em breve para resolver a situa√ß√£o.
2025-05-30 01:08:38.201 | [Nest] 54  - 05/30/2025, 4:08:38 AM   DEBUG [TicketService] Syncing comment from user suporteja_bot to ticket PS4-297
2025-05-30 01:08:38.201 | [Nest] 54  - 05/30/2025, 4:08:38 AM   DEBUG [JiraService] Adding comment to ticket PS4-297 by suporteja_bot
2025-05-30 01:08:38.696 | [Nest] 54  - 05/30/2025, 4:08:38 AM     LOG [JiraService] Added comment to Jira ticket PS4-297
2025-05-30 01:08:41.518 | [Nest] 54  - 05/30/2025, 4:08:41 AM   DEBUG [SlackService] Handling message from U7NKC9ADD in D08UAG7D1Q9: ah bom, funcionou obg
2025-05-30 01:08:41.518 | [Nest] 54  - 05/30/2025, 4:08:41 AM   DEBUG [EventController] Processando evento Slack de suporte tipo: message
2025-05-30 01:08:41.519 | [Nest] 54  - 05/30/2025, 4:08:41 AM   DEBUG [EventController] Processando mensagem de suporte t√©cnico de U7NKC9ADD em D08UAG7D1Q9
2025-05-30 01:08:41.519 | [Nest] 54  - 05/30/2025, 4:08:41 AM     LOG [DevelopmentModeGuard] Dev Mode Interaction - User: U7NKC9ADD, Action: message, Authorized: true
2025-05-30 01:08:41.519 | [Nest] 54  - 05/30/2025, 4:08:41 AM   DEBUG [TicketReopenService] Checking if message should reopen ticket in thread 1748578056.948509
2025-05-30 01:08:41.520 | [Nest] 54  - 05/30/2025, 4:08:41 AM   DEBUG [TicketReopenService] No ticket mapping found for thread 1748578056.948509
2025-05-30 01:08:42.085 | [Nest] 54  - 05/30/2025, 4:08:42 AM   DEBUG [ConversationAnalysisAgent] Analyzing continued conversation with 5 messages
2025-05-30 01:08:42.085 | [Nest] 54  - 05/30/2025, 4:08:42 AM   DEBUG [OpenAIService] Generating intelligent support response for conversation with 5 messages
2025-05-30 01:08:42.085 | [Nest] 54  - 05/30/2025, 4:08:42 AM   DEBUG [OpenAIService] Using model gpt-4o for structured response
2025-05-30 01:08:47.037 | [Nest] 54  - 05/30/2025, 4:08:47 AM   DEBUG [OpenAIService] GPT Analysis Complete:
2025-05-30 01:08:47.038 | [Nest] 54  - 05/30/2025, 4:08:47 AM   DEBUG [OpenAIService] Object(6) {
2025-05-30 01:08:47.038 |   shouldCreateTicket: false,
2025-05-30 01:08:47.038 |   confidence: 95,
2025-05-30 01:08:47.038 |   userSentiment: 'cooperative',
2025-05-30 01:08:47.038 |   problemComplexity: 'simple',
2025-05-30 01:08:47.038 |   conversationProgress: 'progressing',
2025-05-30 01:08:47.038 |   category: 'Hardware'
2025-05-30 01:08:47.038 | }
2025-05-30 01:08:47.038 | [Nest] 54  - 05/30/2025, 4:08:47 AM   DEBUG [ConversationAnalysisAgent] Continued conversation analysis complete: {"shouldCreateTicket":false,"confidence":95,"reasoning":"O problema do usu√°rio foi resolvido ap√≥s a tentativa de reiniciar o notebook, que √© uma solu√ß√£o b√°sica e eficaz para casos de congelamento. N√£o h√° necessidade de escalar para a cria√ß√£o de um ticket, pois a solu√ß√£o foi bem-sucedida e o usu√°rio expressou satisfa√ß√£o com o resultado.","userSentiment":"cooperative","problemComplexity":"simple","solutionEffectiveness":"working","conversationProgress":"progressing","response":"Fico feliz que o problema tenha sido resolvido! Se precisar de mais alguma coisa, estou √† disposi√ß√£o.","analysis":{"category":"Hardware","priority":"May Have [P4]","affectedSystems":["Notebook"],"summary":"O notebook do usu√°rio estava congelado e foi resolvido com um rein√≠cio.","nextSteps":"Nenhum pr√≥ximo passo necess√°rio, pois o problema foi resolvido.","previousAttempts":["Reiniciar o notebook"]}}